var cP=t=>{throw TypeError(t)};var Gs=(t,e,n)=>e.has(t)?cP("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);function hP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Z0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var eT={exports:{}},Yu={},tT={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sa=Symbol.for("react.element"),fP=Symbol.for("react.portal"),dP=Symbol.for("react.fragment"),pP=Symbol.for("react.strict_mode"),mP=Symbol.for("react.profiler"),gP=Symbol.for("react.provider"),yP=Symbol.for("react.context"),vP=Symbol.for("react.forward_ref"),_P=Symbol.for("react.suspense"),TP=Symbol.for("react.memo"),EP=Symbol.for("react.lazy"),ny=Symbol.iterator;function SP(t){return t===null||typeof t!="object"?null:(t=ny&&t[ny]||t["@@iterator"],typeof t=="function"?t:null)}var nT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rT=Object.assign,iT={};function Ss(t,e,n){this.props=t,this.context=e,this.refs=iT,this.updater=n||nT}Ss.prototype.isReactComponent={};Ss.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ss.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sT(){}sT.prototype=Ss.prototype;function Kd(t,e,n){this.props=t,this.context=e,this.refs=iT,this.updater=n||nT}var Gd=Kd.prototype=new sT;Gd.constructor=Kd;rT(Gd,Ss.prototype);Gd.isPureReactComponent=!0;var ry=Array.isArray,oT=Object.prototype.hasOwnProperty,qd={current:null},aT={key:!0,ref:!0,__self:!0,__source:!0};function lT(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)oT.call(e,r)&&!aT.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Sa,type:t,key:s,ref:o,props:i,_owner:qd.current}}function CP(t,e){return{$$typeof:Sa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Sa}function wP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var iy=/\/+/g;function eh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?wP(""+t.key):e.toString(36)}function xl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Sa:case fP:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+eh(o,0):r,ry(i)?(n="",t!=null&&(n=t.replace(iy,"$&/")+"/"),xl(i,e,n,"",function(c){return c})):i!=null&&(Qd(i)&&(i=CP(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(iy,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",ry(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+eh(s,a);o+=xl(s,e,n,u,i)}else if(u=SP(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+eh(s,a++),o+=xl(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ya(t,e,n){if(t==null)return t;var r=[],i=0;return xl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function xP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Et={current:null},Pl={transition:null},PP={ReactCurrentDispatcher:Et,ReactCurrentBatchConfig:Pl,ReactCurrentOwner:qd};function uT(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:Ya,forEach:function(t,e,n){Ya(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ya(t,function(){e++}),e},toArray:function(t){return Ya(t,function(e){return e})||[]},only:function(t){if(!Qd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=Ss;ae.Fragment=dP;ae.Profiler=mP;ae.PureComponent=Kd;ae.StrictMode=pP;ae.Suspense=_P;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PP;ae.act=uT;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=rT({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=qd.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)oT.call(e,u)&&!aT.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Sa,type:t.type,key:i,ref:s,props:r,_owner:o}};ae.createContext=function(t){return t={$$typeof:yP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gP,_context:t},t.Consumer=t};ae.createElement=lT;ae.createFactory=function(t){var e=lT.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:vP,render:t}};ae.isValidElement=Qd;ae.lazy=function(t){return{$$typeof:EP,_payload:{_status:-1,_result:t},_init:xP}};ae.memo=function(t,e){return{$$typeof:TP,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=Pl.transition;Pl.transition={};try{t()}finally{Pl.transition=e}};ae.unstable_act=uT;ae.useCallback=function(t,e){return Et.current.useCallback(t,e)};ae.useContext=function(t){return Et.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return Et.current.useDeferredValue(t)};ae.useEffect=function(t,e){return Et.current.useEffect(t,e)};ae.useId=function(){return Et.current.useId()};ae.useImperativeHandle=function(t,e,n){return Et.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return Et.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return Et.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return Et.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return Et.current.useReducer(t,e,n)};ae.useRef=function(t){return Et.current.useRef(t)};ae.useState=function(t){return Et.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return Et.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return Et.current.useTransition()};ae.version="18.3.1";tT.exports=ae;var L=tT.exports;const ti=Z0(L);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RP=L,IP=Symbol.for("react.element"),AP=Symbol.for("react.fragment"),kP=Object.prototype.hasOwnProperty,bP=RP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DP={key:!0,ref:!0,__self:!0,__source:!0};function cT(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)kP.call(e,r)&&!DP.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:IP,type:t,key:s,ref:o,props:i,_owner:bP.current}}Yu.Fragment=AP;Yu.jsx=cT;Yu.jsxs=cT;eT.exports=Yu;var M=eT.exports,ef={},hT={exports:{}},jt={},fT={exports:{}},dT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,W){var Z=U.length;U.push(W);e:for(;0<Z;){var Q=Z-1>>>1,re=U[Q];if(0<i(re,W))U[Q]=W,U[Z]=re,Z=Q;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var W=U[0],Z=U.pop();if(Z!==W){U[0]=Z;e:for(var Q=0,re=U.length,De=re>>>1;Q<De;){var We=2*(Q+1)-1,Ct=U[We],Jt=We+1,Kn=U[Jt];if(0>i(Ct,Z))Jt<re&&0>i(Kn,Ct)?(U[Q]=Kn,U[Jt]=Z,Q=Jt):(U[Q]=Ct,U[We]=Z,Q=We);else if(Jt<re&&0>i(Kn,Z))U[Q]=Kn,U[Jt]=Z,Q=Jt;else break e}}return W}function i(U,W){var Z=U.sortIndex-W.sortIndex;return Z!==0?Z:U.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],h=1,f=null,p=3,g=!1,w=!1,P=!1,A=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(U){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=U)r(c),W.sortIndex=W.expirationTime,e(u,W);else break;W=n(c)}}function k(U){if(P=!1,C(U),!w)if(n(u)!==null)w=!0,X(D);else{var W=n(c);W!==null&&ne(k,W.startTime-U)}}function D(U,W){w=!1,P&&(P=!1,T(y),y=-1),g=!0;var Z=p;try{for(C(W),f=n(u);f!==null&&(!(f.expirationTime>W)||U&&!I());){var Q=f.callback;if(typeof Q=="function"){f.callback=null,p=f.priorityLevel;var re=Q(f.expirationTime<=W);W=t.unstable_now(),typeof re=="function"?f.callback=re:f===n(u)&&r(u),C(W)}else r(u);f=n(u)}if(f!==null)var De=!0;else{var We=n(c);We!==null&&ne(k,We.startTime-W),De=!1}return De}finally{f=null,p=Z,g=!1}}var O=!1,E=null,y=-1,S=5,x=-1;function I(){return!(t.unstable_now()-x<S)}function b(){if(E!==null){var U=t.unstable_now();x=U;var W=!0;try{W=E(!0,U)}finally{W?R():(O=!1,E=null)}}else O=!1}var R;if(typeof v=="function")R=function(){v(b)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,G=K.port2;K.port1.onmessage=b,R=function(){G.postMessage(null)}}else R=function(){A(b,0)};function X(U){E=U,O||(O=!0,R())}function ne(U,W){y=A(function(){U(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){w||g||(w=!0,X(D))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var Z=p;p=W;try{return U()}finally{p=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,W){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Z=p;p=U;try{return W()}finally{p=Z}},t.unstable_scheduleCallback=function(U,W,Z){var Q=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?Q+Z:Q):Z=Q,U){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=Z+re,U={id:h++,callback:W,priorityLevel:U,startTime:Z,expirationTime:re,sortIndex:-1},Z>Q?(U.sortIndex=Z,e(c,U),n(u)===null&&U===n(c)&&(P?(T(y),y=-1):P=!0,ne(k,Z-Q))):(U.sortIndex=re,e(u,U),w||g||(w=!0,X(D))),U},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(U){var W=p;return function(){var Z=p;p=W;try{return U.apply(this,arguments)}finally{p=Z}}}})(dT);fT.exports=dT;var VP=fT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MP=L,Lt=VP;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pT=new Set,Bo={};function di(t,e){ss(t,e),ss(t+"Capture",e)}function ss(t,e){for(Bo[t]=e,t=0;t<e.length;t++)pT.add(e[t])}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tf=Object.prototype.hasOwnProperty,NP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sy={},oy={};function OP(t){return tf.call(oy,t)?!0:tf.call(sy,t)?!1:NP.test(t)?oy[t]=!0:(sy[t]=!0,!1)}function LP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function FP(t,e,n,r){if(e===null||typeof e>"u"||LP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function St(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nt[t]=new St(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nt[e]=new St(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nt[t]=new St(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nt[t]=new St(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nt[t]=new St(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nt[t]=new St(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nt[t]=new St(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nt[t]=new St(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nt[t]=new St(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yd=/[\-:]([a-z])/g;function Xd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yd,Xd);nt[e]=new St(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yd,Xd);nt[e]=new St(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yd,Xd);nt[e]=new St(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nt[t]=new St(t,1,!1,t.toLowerCase(),null,!1,!1)});nt.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nt[t]=new St(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jd(t,e,n,r){var i=nt.hasOwnProperty(e)?nt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(FP(e,n,i,r)&&(n=null),r||i===null?OP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Wn=MP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xa=Symbol.for("react.element"),Di=Symbol.for("react.portal"),Vi=Symbol.for("react.fragment"),Zd=Symbol.for("react.strict_mode"),nf=Symbol.for("react.profiler"),mT=Symbol.for("react.provider"),gT=Symbol.for("react.context"),ep=Symbol.for("react.forward_ref"),rf=Symbol.for("react.suspense"),sf=Symbol.for("react.suspense_list"),tp=Symbol.for("react.memo"),tr=Symbol.for("react.lazy"),yT=Symbol.for("react.offscreen"),ay=Symbol.iterator;function qs(t){return t===null||typeof t!="object"?null:(t=ay&&t[ay]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Object.assign,th;function so(t){if(th===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);th=e&&e[1]||""}return`
`+th+t}var nh=!1;function rh(t,e){if(!t||nh)return"";nh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{nh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?so(t):""}function jP(t){switch(t.tag){case 5:return so(t.type);case 16:return so("Lazy");case 13:return so("Suspense");case 19:return so("SuspenseList");case 0:case 2:case 15:return t=rh(t.type,!1),t;case 11:return t=rh(t.type.render,!1),t;case 1:return t=rh(t.type,!0),t;default:return""}}function of(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vi:return"Fragment";case Di:return"Portal";case nf:return"Profiler";case Zd:return"StrictMode";case rf:return"Suspense";case sf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gT:return(t.displayName||"Context")+".Consumer";case mT:return(t._context.displayName||"Context")+".Provider";case ep:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tp:return e=t.displayName||null,e!==null?e:of(t.type)||"Memo";case tr:e=t._payload,t=t._init;try{return of(t(e))}catch{}}return null}function UP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return of(e);case 8:return e===Zd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function BP(t){var e=vT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ja(t){t._valueTracker||(t._valueTracker=BP(t))}function _T(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=vT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Jl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function af(t,e){var n=e.checked;return Re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ly(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=wr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function TT(t,e){e=e.checked,e!=null&&Jd(t,"checked",e,!1)}function lf(t,e){TT(t,e);var n=wr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?uf(t,e.type,n):e.hasOwnProperty("defaultValue")&&uf(t,e.type,wr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function uy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function uf(t,e,n){(e!=="number"||Jl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var oo=Array.isArray;function Yi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+wr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function cf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function cy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(oo(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:wr(n)}}function ET(t,e){var n=wr(e.value),r=wr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function hy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ST(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ST(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Za,CT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Za=Za||document.createElement("div"),Za.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Za.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $o(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var _o={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$P=["Webkit","ms","Moz","O"];Object.keys(_o).forEach(function(t){$P.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_o[e]=_o[t]})});function wT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||_o.hasOwnProperty(t)&&_o[t]?(""+e).trim():e+"px"}function xT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=wT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var zP=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ff(t,e){if(e){if(zP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function df(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pf=null;function np(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mf=null,Xi=null,Ji=null;function fy(t){if(t=xa(t)){if(typeof mf!="function")throw Error(B(280));var e=t.stateNode;e&&(e=tc(e),mf(t.stateNode,t.type,e))}}function PT(t){Xi?Ji?Ji.push(t):Ji=[t]:Xi=t}function RT(){if(Xi){var t=Xi,e=Ji;if(Ji=Xi=null,fy(t),e)for(t=0;t<e.length;t++)fy(e[t])}}function IT(t,e){return t(e)}function AT(){}var ih=!1;function kT(t,e,n){if(ih)return t(e,n);ih=!0;try{return IT(t,e,n)}finally{ih=!1,(Xi!==null||Ji!==null)&&(AT(),RT())}}function zo(t,e){var n=t.stateNode;if(n===null)return null;var r=tc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var gf=!1;if(Ln)try{var Qs={};Object.defineProperty(Qs,"passive",{get:function(){gf=!0}}),window.addEventListener("test",Qs,Qs),window.removeEventListener("test",Qs,Qs)}catch{gf=!1}function HP(t,e,n,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var To=!1,Zl=null,eu=!1,yf=null,WP={onError:function(t){To=!0,Zl=t}};function KP(t,e,n,r,i,s,o,a,u){To=!1,Zl=null,HP.apply(WP,arguments)}function GP(t,e,n,r,i,s,o,a,u){if(KP.apply(this,arguments),To){if(To){var c=Zl;To=!1,Zl=null}else throw Error(B(198));eu||(eu=!0,yf=c)}}function pi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function bT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function dy(t){if(pi(t)!==t)throw Error(B(188))}function qP(t){var e=t.alternate;if(!e){if(e=pi(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return dy(i),t;if(s===r)return dy(i),e;s=s.sibling}throw Error(B(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function DT(t){return t=qP(t),t!==null?VT(t):null}function VT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=VT(t);if(e!==null)return e;t=t.sibling}return null}var MT=Lt.unstable_scheduleCallback,py=Lt.unstable_cancelCallback,QP=Lt.unstable_shouldYield,YP=Lt.unstable_requestPaint,Ne=Lt.unstable_now,XP=Lt.unstable_getCurrentPriorityLevel,rp=Lt.unstable_ImmediatePriority,NT=Lt.unstable_UserBlockingPriority,tu=Lt.unstable_NormalPriority,JP=Lt.unstable_LowPriority,OT=Lt.unstable_IdlePriority,Xu=null,vn=null;function ZP(t){if(vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot(Xu,t,void 0,(t.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:nR,eR=Math.log,tR=Math.LN2;function nR(t){return t>>>=0,t===0?32:31-(eR(t)/tR|0)|0}var el=64,tl=4194304;function ao(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ao(a):(s&=o,s!==0&&(r=ao(s)))}else o=n&~i,o!==0?r=ao(o):s!==0&&(r=ao(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ln(e),i=1<<n,r|=t[n],e&=~i;return r}function rR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iR(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ln(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=rR(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function vf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function LT(){var t=el;return el<<=1,!(el&4194240)&&(el=64),t}function sh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ca(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ln(e),t[e]=n}function sR(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ln(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ip(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ln(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var pe=0;function FT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jT,sp,UT,BT,$T,_f=!1,nl=[],ur=null,cr=null,hr=null,Ho=new Map,Wo=new Map,rr=[],oR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function my(t,e){switch(t){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":Ho.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wo.delete(e.pointerId)}}function Ys(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=xa(e),e!==null&&sp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function aR(t,e,n,r,i){switch(e){case"focusin":return ur=Ys(ur,t,e,n,r,i),!0;case"dragenter":return cr=Ys(cr,t,e,n,r,i),!0;case"mouseover":return hr=Ys(hr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ho.set(s,Ys(Ho.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Wo.set(s,Ys(Wo.get(s)||null,t,e,n,r,i)),!0}return!1}function zT(t){var e=Yr(t.target);if(e!==null){var n=pi(e);if(n!==null){if(e=n.tag,e===13){if(e=bT(n),e!==null){t.blockedOn=e,$T(t.priority,function(){UT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Rl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Tf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);pf=r,n.target.dispatchEvent(r),pf=null}else return e=xa(n),e!==null&&sp(e),t.blockedOn=n,!1;e.shift()}return!0}function gy(t,e,n){Rl(t)&&n.delete(e)}function lR(){_f=!1,ur!==null&&Rl(ur)&&(ur=null),cr!==null&&Rl(cr)&&(cr=null),hr!==null&&Rl(hr)&&(hr=null),Ho.forEach(gy),Wo.forEach(gy)}function Xs(t,e){t.blockedOn===e&&(t.blockedOn=null,_f||(_f=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,lR)))}function Ko(t){function e(i){return Xs(i,t)}if(0<nl.length){Xs(nl[0],t);for(var n=1;n<nl.length;n++){var r=nl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ur!==null&&Xs(ur,t),cr!==null&&Xs(cr,t),hr!==null&&Xs(hr,t),Ho.forEach(e),Wo.forEach(e),n=0;n<rr.length;n++)r=rr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<rr.length&&(n=rr[0],n.blockedOn===null);)zT(n),n.blockedOn===null&&rr.shift()}var Zi=Wn.ReactCurrentBatchConfig,ru=!0;function uR(t,e,n,r){var i=pe,s=Zi.transition;Zi.transition=null;try{pe=1,op(t,e,n,r)}finally{pe=i,Zi.transition=s}}function cR(t,e,n,r){var i=pe,s=Zi.transition;Zi.transition=null;try{pe=4,op(t,e,n,r)}finally{pe=i,Zi.transition=s}}function op(t,e,n,r){if(ru){var i=Tf(t,e,n,r);if(i===null)mh(t,e,r,iu,n),my(t,r);else if(aR(i,t,e,n,r))r.stopPropagation();else if(my(t,r),e&4&&-1<oR.indexOf(t)){for(;i!==null;){var s=xa(i);if(s!==null&&jT(s),s=Tf(t,e,n,r),s===null&&mh(t,e,r,iu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else mh(t,e,r,null,n)}}var iu=null;function Tf(t,e,n,r){if(iu=null,t=np(r),t=Yr(t),t!==null)if(e=pi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=bT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return iu=t,null}function HT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XP()){case rp:return 1;case NT:return 4;case tu:case JP:return 16;case OT:return 536870912;default:return 16}default:return 16}}var sr=null,ap=null,Il=null;function WT(){if(Il)return Il;var t,e=ap,n=e.length,r,i="value"in sr?sr.value:sr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Il=i.slice(t,1<r?1-r:void 0)}function Al(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function rl(){return!0}function yy(){return!1}function Ut(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?rl:yy,this.isPropagationStopped=yy,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rl)},persist:function(){},isPersistent:rl}),e}var Cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lp=Ut(Cs),wa=Re({},Cs,{view:0,detail:0}),hR=Ut(wa),oh,ah,Js,Ju=Re({},wa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:up,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Js&&(Js&&t.type==="mousemove"?(oh=t.screenX-Js.screenX,ah=t.screenY-Js.screenY):ah=oh=0,Js=t),oh)},movementY:function(t){return"movementY"in t?t.movementY:ah}}),vy=Ut(Ju),fR=Re({},Ju,{dataTransfer:0}),dR=Ut(fR),pR=Re({},wa,{relatedTarget:0}),lh=Ut(pR),mR=Re({},Cs,{animationName:0,elapsedTime:0,pseudoElement:0}),gR=Ut(mR),yR=Re({},Cs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vR=Ut(yR),_R=Re({},Cs,{data:0}),_y=Ut(_R),TR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ER={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=SR[t])?!!e[t]:!1}function up(){return CR}var wR=Re({},wa,{key:function(t){if(t.key){var e=TR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Al(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ER[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:up,charCode:function(t){return t.type==="keypress"?Al(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Al(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xR=Ut(wR),PR=Re({},Ju,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ty=Ut(PR),RR=Re({},wa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:up}),IR=Ut(RR),AR=Re({},Cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),kR=Ut(AR),bR=Re({},Ju,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),DR=Ut(bR),VR=[9,13,27,32],cp=Ln&&"CompositionEvent"in window,Eo=null;Ln&&"documentMode"in document&&(Eo=document.documentMode);var MR=Ln&&"TextEvent"in window&&!Eo,KT=Ln&&(!cp||Eo&&8<Eo&&11>=Eo),Ey=" ",Sy=!1;function GT(t,e){switch(t){case"keyup":return VR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Mi=!1;function NR(t,e){switch(t){case"compositionend":return qT(e);case"keypress":return e.which!==32?null:(Sy=!0,Ey);case"textInput":return t=e.data,t===Ey&&Sy?null:t;default:return null}}function OR(t,e){if(Mi)return t==="compositionend"||!cp&&GT(t,e)?(t=WT(),Il=ap=sr=null,Mi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return KT&&e.locale!=="ko"?null:e.data;default:return null}}var LR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!LR[t.type]:e==="textarea"}function QT(t,e,n,r){PT(r),e=su(e,"onChange"),0<e.length&&(n=new lp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var So=null,Go=null;function FR(t){oE(t,0)}function Zu(t){var e=Li(t);if(_T(e))return t}function jR(t,e){if(t==="change")return e}var YT=!1;if(Ln){var uh;if(Ln){var ch="oninput"in document;if(!ch){var wy=document.createElement("div");wy.setAttribute("oninput","return;"),ch=typeof wy.oninput=="function"}uh=ch}else uh=!1;YT=uh&&(!document.documentMode||9<document.documentMode)}function xy(){So&&(So.detachEvent("onpropertychange",XT),Go=So=null)}function XT(t){if(t.propertyName==="value"&&Zu(Go)){var e=[];QT(e,Go,t,np(t)),kT(FR,e)}}function UR(t,e,n){t==="focusin"?(xy(),So=e,Go=n,So.attachEvent("onpropertychange",XT)):t==="focusout"&&xy()}function BR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zu(Go)}function $R(t,e){if(t==="click")return Zu(e)}function zR(t,e){if(t==="input"||t==="change")return Zu(e)}function HR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hn=typeof Object.is=="function"?Object.is:HR;function qo(t,e){if(hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!tf.call(e,i)||!hn(t[i],e[i]))return!1}return!0}function Py(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ry(t,e){var n=Py(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Py(n)}}function JT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?JT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ZT(){for(var t=window,e=Jl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Jl(t.document)}return e}function hp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function WR(t){var e=ZT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&JT(n.ownerDocument.documentElement,n)){if(r!==null&&hp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Ry(n,s);var o=Ry(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var KR=Ln&&"documentMode"in document&&11>=document.documentMode,Ni=null,Ef=null,Co=null,Sf=!1;function Iy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Sf||Ni==null||Ni!==Jl(r)||(r=Ni,"selectionStart"in r&&hp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Co&&qo(Co,r)||(Co=r,r=su(Ef,"onSelect"),0<r.length&&(e=new lp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ni)))}function il(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Oi={animationend:il("Animation","AnimationEnd"),animationiteration:il("Animation","AnimationIteration"),animationstart:il("Animation","AnimationStart"),transitionend:il("Transition","TransitionEnd")},hh={},eE={};Ln&&(eE=document.createElement("div").style,"AnimationEvent"in window||(delete Oi.animationend.animation,delete Oi.animationiteration.animation,delete Oi.animationstart.animation),"TransitionEvent"in window||delete Oi.transitionend.transition);function ec(t){if(hh[t])return hh[t];if(!Oi[t])return t;var e=Oi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in eE)return hh[t]=e[n];return t}var tE=ec("animationend"),nE=ec("animationiteration"),rE=ec("animationstart"),iE=ec("transitionend"),sE=new Map,Ay="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(t,e){sE.set(t,e),di(e,[t])}for(var fh=0;fh<Ay.length;fh++){var dh=Ay[fh],GR=dh.toLowerCase(),qR=dh[0].toUpperCase()+dh.slice(1);Mr(GR,"on"+qR)}Mr(tE,"onAnimationEnd");Mr(nE,"onAnimationIteration");Mr(rE,"onAnimationStart");Mr("dblclick","onDoubleClick");Mr("focusin","onFocus");Mr("focusout","onBlur");Mr(iE,"onTransitionEnd");ss("onMouseEnter",["mouseout","mouseover"]);ss("onMouseLeave",["mouseout","mouseover"]);ss("onPointerEnter",["pointerout","pointerover"]);ss("onPointerLeave",["pointerout","pointerover"]);di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));di("onBeforeInput",["compositionend","keypress","textInput","paste"]);di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QR=new Set("cancel close invalid load scroll toggle".split(" ").concat(lo));function ky(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,GP(r,e,void 0,t),t.currentTarget=null}function oE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;ky(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;ky(i,a,c),s=u}}}if(eu)throw t=yf,eu=!1,yf=null,t}function _e(t,e){var n=e[Rf];n===void 0&&(n=e[Rf]=new Set);var r=t+"__bubble";n.has(r)||(aE(e,t,2,!1),n.add(r))}function ph(t,e,n){var r=0;e&&(r|=4),aE(n,t,r,e)}var sl="_reactListening"+Math.random().toString(36).slice(2);function Qo(t){if(!t[sl]){t[sl]=!0,pT.forEach(function(n){n!=="selectionchange"&&(QR.has(n)||ph(n,!1,t),ph(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[sl]||(e[sl]=!0,ph("selectionchange",!1,e))}}function aE(t,e,n,r){switch(HT(e)){case 1:var i=uR;break;case 4:i=cR;break;default:i=op}n=i.bind(null,e,n,t),i=void 0,!gf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function mh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Yr(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}kT(function(){var c=s,h=np(n),f=[];e:{var p=sE.get(t);if(p!==void 0){var g=lp,w=t;switch(t){case"keypress":if(Al(n)===0)break e;case"keydown":case"keyup":g=xR;break;case"focusin":w="focus",g=lh;break;case"focusout":w="blur",g=lh;break;case"beforeblur":case"afterblur":g=lh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=vy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=dR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=IR;break;case tE:case nE:case rE:g=gR;break;case iE:g=kR;break;case"scroll":g=hR;break;case"wheel":g=DR;break;case"copy":case"cut":case"paste":g=vR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Ty}var P=(e&4)!==0,A=!P&&t==="scroll",T=P?p!==null?p+"Capture":null:p;P=[];for(var v=c,C;v!==null;){C=v;var k=C.stateNode;if(C.tag===5&&k!==null&&(C=k,T!==null&&(k=zo(v,T),k!=null&&P.push(Yo(v,k,C)))),A)break;v=v.return}0<P.length&&(p=new g(p,w,null,n,h),f.push({event:p,listeners:P}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==pf&&(w=n.relatedTarget||n.fromElement)&&(Yr(w)||w[Fn]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=c,w=w?Yr(w):null,w!==null&&(A=pi(w),w!==A||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=c),g!==w)){if(P=vy,k="onMouseLeave",T="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(P=Ty,k="onPointerLeave",T="onPointerEnter",v="pointer"),A=g==null?p:Li(g),C=w==null?p:Li(w),p=new P(k,v+"leave",g,n,h),p.target=A,p.relatedTarget=C,k=null,Yr(h)===c&&(P=new P(T,v+"enter",w,n,h),P.target=C,P.relatedTarget=A,k=P),A=k,g&&w)t:{for(P=g,T=w,v=0,C=P;C;C=Ri(C))v++;for(C=0,k=T;k;k=Ri(k))C++;for(;0<v-C;)P=Ri(P),v--;for(;0<C-v;)T=Ri(T),C--;for(;v--;){if(P===T||T!==null&&P===T.alternate)break t;P=Ri(P),T=Ri(T)}P=null}else P=null;g!==null&&by(f,p,g,P,!1),w!==null&&A!==null&&by(f,A,w,P,!0)}}e:{if(p=c?Li(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var D=jR;else if(Cy(p))if(YT)D=zR;else{D=BR;var O=UR}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=$R);if(D&&(D=D(t,c))){QT(f,D,n,h);break e}O&&O(t,p,c),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&uf(p,"number",p.value)}switch(O=c?Li(c):window,t){case"focusin":(Cy(O)||O.contentEditable==="true")&&(Ni=O,Ef=c,Co=null);break;case"focusout":Co=Ef=Ni=null;break;case"mousedown":Sf=!0;break;case"contextmenu":case"mouseup":case"dragend":Sf=!1,Iy(f,n,h);break;case"selectionchange":if(KR)break;case"keydown":case"keyup":Iy(f,n,h)}var E;if(cp)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Mi?GT(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(KT&&n.locale!=="ko"&&(Mi||y!=="onCompositionStart"?y==="onCompositionEnd"&&Mi&&(E=WT()):(sr=h,ap="value"in sr?sr.value:sr.textContent,Mi=!0)),O=su(c,y),0<O.length&&(y=new _y(y,t,null,n,h),f.push({event:y,listeners:O}),E?y.data=E:(E=qT(n),E!==null&&(y.data=E)))),(E=MR?NR(t,n):OR(t,n))&&(c=su(c,"onBeforeInput"),0<c.length&&(h=new _y("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=E))}oE(f,e)})}function Yo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function su(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=zo(t,n),s!=null&&r.unshift(Yo(t,s,i)),s=zo(t,e),s!=null&&r.push(Yo(t,s,i))),t=t.return}return r}function Ri(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function by(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=zo(n,s),u!=null&&o.unshift(Yo(n,u,a))):i||(u=zo(n,s),u!=null&&o.push(Yo(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var YR=/\r\n?/g,XR=/\u0000|\uFFFD/g;function Dy(t){return(typeof t=="string"?t:""+t).replace(YR,`
`).replace(XR,"")}function ol(t,e,n){if(e=Dy(e),Dy(t)!==e&&n)throw Error(B(425))}function ou(){}var Cf=null,wf=null;function xf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Pf=typeof setTimeout=="function"?setTimeout:void 0,JR=typeof clearTimeout=="function"?clearTimeout:void 0,Vy=typeof Promise=="function"?Promise:void 0,ZR=typeof queueMicrotask=="function"?queueMicrotask:typeof Vy<"u"?function(t){return Vy.resolve(null).then(t).catch(eI)}:Pf;function eI(t){setTimeout(function(){throw t})}function gh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ko(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ko(e)}function fr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function My(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ws=Math.random().toString(36).slice(2),yn="__reactFiber$"+ws,Xo="__reactProps$"+ws,Fn="__reactContainer$"+ws,Rf="__reactEvents$"+ws,tI="__reactListeners$"+ws,nI="__reactHandles$"+ws;function Yr(t){var e=t[yn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fn]||n[yn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=My(t);t!==null;){if(n=t[yn])return n;t=My(t)}return e}t=n,n=t.parentNode}return null}function xa(t){return t=t[yn]||t[Fn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Li(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function tc(t){return t[Xo]||null}var If=[],Fi=-1;function Nr(t){return{current:t}}function Te(t){0>Fi||(t.current=If[Fi],If[Fi]=null,Fi--)}function ye(t,e){Fi++,If[Fi]=t.current,t.current=e}var xr={},pt=Nr(xr),It=Nr(!1),oi=xr;function os(t,e){var n=t.type.contextTypes;if(!n)return xr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function At(t){return t=t.childContextTypes,t!=null}function au(){Te(It),Te(pt)}function Ny(t,e,n){if(pt.current!==xr)throw Error(B(168));ye(pt,e),ye(It,n)}function lE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(B(108,UP(t)||"Unknown",i));return Re({},n,r)}function lu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xr,oi=pt.current,ye(pt,t),ye(It,It.current),!0}function Oy(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=lE(t,e,oi),r.__reactInternalMemoizedMergedChildContext=t,Te(It),Te(pt),ye(pt,t)):Te(It),ye(It,n)}var kn=null,nc=!1,yh=!1;function uE(t){kn===null?kn=[t]:kn.push(t)}function rI(t){nc=!0,uE(t)}function Or(){if(!yh&&kn!==null){yh=!0;var t=0,e=pe;try{var n=kn;for(pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}kn=null,nc=!1}catch(i){throw kn!==null&&(kn=kn.slice(t+1)),MT(rp,Or),i}finally{pe=e,yh=!1}}return null}var ji=[],Ui=0,uu=null,cu=0,Ht=[],Wt=0,ai=null,bn=1,Dn="";function Hr(t,e){ji[Ui++]=cu,ji[Ui++]=uu,uu=t,cu=e}function cE(t,e,n){Ht[Wt++]=bn,Ht[Wt++]=Dn,Ht[Wt++]=ai,ai=t;var r=bn;t=Dn;var i=32-ln(r)-1;r&=~(1<<i),n+=1;var s=32-ln(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,bn=1<<32-ln(e)+i|n<<i|r,Dn=s+t}else bn=1<<s|n<<i|r,Dn=t}function fp(t){t.return!==null&&(Hr(t,1),cE(t,1,0))}function dp(t){for(;t===uu;)uu=ji[--Ui],ji[Ui]=null,cu=ji[--Ui],ji[Ui]=null;for(;t===ai;)ai=Ht[--Wt],Ht[Wt]=null,Dn=Ht[--Wt],Ht[Wt]=null,bn=Ht[--Wt],Ht[Wt]=null}var Nt=null,Mt=null,Se=!1,rn=null;function hE(t,e){var n=qt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ly(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Nt=t,Mt=fr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Nt=t,Mt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ai!==null?{id:bn,overflow:Dn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Nt=t,Mt=null,!0):!1;default:return!1}}function Af(t){return(t.mode&1)!==0&&(t.flags&128)===0}function kf(t){if(Se){var e=Mt;if(e){var n=e;if(!Ly(t,e)){if(Af(t))throw Error(B(418));e=fr(n.nextSibling);var r=Nt;e&&Ly(t,e)?hE(r,n):(t.flags=t.flags&-4097|2,Se=!1,Nt=t)}}else{if(Af(t))throw Error(B(418));t.flags=t.flags&-4097|2,Se=!1,Nt=t}}}function Fy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Nt=t}function al(t){if(t!==Nt)return!1;if(!Se)return Fy(t),Se=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xf(t.type,t.memoizedProps)),e&&(e=Mt)){if(Af(t))throw fE(),Error(B(418));for(;e;)hE(t,e),e=fr(e.nextSibling)}if(Fy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mt=fr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mt=null}}else Mt=Nt?fr(t.stateNode.nextSibling):null;return!0}function fE(){for(var t=Mt;t;)t=fr(t.nextSibling)}function as(){Mt=Nt=null,Se=!1}function pp(t){rn===null?rn=[t]:rn.push(t)}var iI=Wn.ReactCurrentBatchConfig;function Zs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function ll(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function jy(t){var e=t._init;return e(t._payload)}function dE(t){function e(T,v){if(t){var C=T.deletions;C===null?(T.deletions=[v],T.flags|=16):C.push(v)}}function n(T,v){if(!t)return null;for(;v!==null;)e(T,v),v=v.sibling;return null}function r(T,v){for(T=new Map;v!==null;)v.key!==null?T.set(v.key,v):T.set(v.index,v),v=v.sibling;return T}function i(T,v){return T=gr(T,v),T.index=0,T.sibling=null,T}function s(T,v,C){return T.index=C,t?(C=T.alternate,C!==null?(C=C.index,C<v?(T.flags|=2,v):C):(T.flags|=2,v)):(T.flags|=1048576,v)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function a(T,v,C,k){return v===null||v.tag!==6?(v=wh(C,T.mode,k),v.return=T,v):(v=i(v,C),v.return=T,v)}function u(T,v,C,k){var D=C.type;return D===Vi?h(T,v,C.props.children,k,C.key):v!==null&&(v.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===tr&&jy(D)===v.type)?(k=i(v,C.props),k.ref=Zs(T,v,C),k.return=T,k):(k=Ol(C.type,C.key,C.props,null,T.mode,k),k.ref=Zs(T,v,C),k.return=T,k)}function c(T,v,C,k){return v===null||v.tag!==4||v.stateNode.containerInfo!==C.containerInfo||v.stateNode.implementation!==C.implementation?(v=xh(C,T.mode,k),v.return=T,v):(v=i(v,C.children||[]),v.return=T,v)}function h(T,v,C,k,D){return v===null||v.tag!==7?(v=ri(C,T.mode,k,D),v.return=T,v):(v=i(v,C),v.return=T,v)}function f(T,v,C){if(typeof v=="string"&&v!==""||typeof v=="number")return v=wh(""+v,T.mode,C),v.return=T,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Xa:return C=Ol(v.type,v.key,v.props,null,T.mode,C),C.ref=Zs(T,null,v),C.return=T,C;case Di:return v=xh(v,T.mode,C),v.return=T,v;case tr:var k=v._init;return f(T,k(v._payload),C)}if(oo(v)||qs(v))return v=ri(v,T.mode,C,null),v.return=T,v;ll(T,v)}return null}function p(T,v,C,k){var D=v!==null?v.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return D!==null?null:a(T,v,""+C,k);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Xa:return C.key===D?u(T,v,C,k):null;case Di:return C.key===D?c(T,v,C,k):null;case tr:return D=C._init,p(T,v,D(C._payload),k)}if(oo(C)||qs(C))return D!==null?null:h(T,v,C,k,null);ll(T,C)}return null}function g(T,v,C,k,D){if(typeof k=="string"&&k!==""||typeof k=="number")return T=T.get(C)||null,a(v,T,""+k,D);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Xa:return T=T.get(k.key===null?C:k.key)||null,u(v,T,k,D);case Di:return T=T.get(k.key===null?C:k.key)||null,c(v,T,k,D);case tr:var O=k._init;return g(T,v,C,O(k._payload),D)}if(oo(k)||qs(k))return T=T.get(C)||null,h(v,T,k,D,null);ll(v,k)}return null}function w(T,v,C,k){for(var D=null,O=null,E=v,y=v=0,S=null;E!==null&&y<C.length;y++){E.index>y?(S=E,E=null):S=E.sibling;var x=p(T,E,C[y],k);if(x===null){E===null&&(E=S);break}t&&E&&x.alternate===null&&e(T,E),v=s(x,v,y),O===null?D=x:O.sibling=x,O=x,E=S}if(y===C.length)return n(T,E),Se&&Hr(T,y),D;if(E===null){for(;y<C.length;y++)E=f(T,C[y],k),E!==null&&(v=s(E,v,y),O===null?D=E:O.sibling=E,O=E);return Se&&Hr(T,y),D}for(E=r(T,E);y<C.length;y++)S=g(E,T,y,C[y],k),S!==null&&(t&&S.alternate!==null&&E.delete(S.key===null?y:S.key),v=s(S,v,y),O===null?D=S:O.sibling=S,O=S);return t&&E.forEach(function(I){return e(T,I)}),Se&&Hr(T,y),D}function P(T,v,C,k){var D=qs(C);if(typeof D!="function")throw Error(B(150));if(C=D.call(C),C==null)throw Error(B(151));for(var O=D=null,E=v,y=v=0,S=null,x=C.next();E!==null&&!x.done;y++,x=C.next()){E.index>y?(S=E,E=null):S=E.sibling;var I=p(T,E,x.value,k);if(I===null){E===null&&(E=S);break}t&&E&&I.alternate===null&&e(T,E),v=s(I,v,y),O===null?D=I:O.sibling=I,O=I,E=S}if(x.done)return n(T,E),Se&&Hr(T,y),D;if(E===null){for(;!x.done;y++,x=C.next())x=f(T,x.value,k),x!==null&&(v=s(x,v,y),O===null?D=x:O.sibling=x,O=x);return Se&&Hr(T,y),D}for(E=r(T,E);!x.done;y++,x=C.next())x=g(E,T,y,x.value,k),x!==null&&(t&&x.alternate!==null&&E.delete(x.key===null?y:x.key),v=s(x,v,y),O===null?D=x:O.sibling=x,O=x);return t&&E.forEach(function(b){return e(T,b)}),Se&&Hr(T,y),D}function A(T,v,C,k){if(typeof C=="object"&&C!==null&&C.type===Vi&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Xa:e:{for(var D=C.key,O=v;O!==null;){if(O.key===D){if(D=C.type,D===Vi){if(O.tag===7){n(T,O.sibling),v=i(O,C.props.children),v.return=T,T=v;break e}}else if(O.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===tr&&jy(D)===O.type){n(T,O.sibling),v=i(O,C.props),v.ref=Zs(T,O,C),v.return=T,T=v;break e}n(T,O);break}else e(T,O);O=O.sibling}C.type===Vi?(v=ri(C.props.children,T.mode,k,C.key),v.return=T,T=v):(k=Ol(C.type,C.key,C.props,null,T.mode,k),k.ref=Zs(T,v,C),k.return=T,T=k)}return o(T);case Di:e:{for(O=C.key;v!==null;){if(v.key===O)if(v.tag===4&&v.stateNode.containerInfo===C.containerInfo&&v.stateNode.implementation===C.implementation){n(T,v.sibling),v=i(v,C.children||[]),v.return=T,T=v;break e}else{n(T,v);break}else e(T,v);v=v.sibling}v=xh(C,T.mode,k),v.return=T,T=v}return o(T);case tr:return O=C._init,A(T,v,O(C._payload),k)}if(oo(C))return w(T,v,C,k);if(qs(C))return P(T,v,C,k);ll(T,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,v!==null&&v.tag===6?(n(T,v.sibling),v=i(v,C),v.return=T,T=v):(n(T,v),v=wh(C,T.mode,k),v.return=T,T=v),o(T)):n(T,v)}return A}var ls=dE(!0),pE=dE(!1),hu=Nr(null),fu=null,Bi=null,mp=null;function gp(){mp=Bi=fu=null}function yp(t){var e=hu.current;Te(hu),t._currentValue=e}function bf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function es(t,e){fu=t,mp=Bi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rt=!0),t.firstContext=null)}function Yt(t){var e=t._currentValue;if(mp!==t)if(t={context:t,memoizedValue:e,next:null},Bi===null){if(fu===null)throw Error(B(308));Bi=t,fu.dependencies={lanes:0,firstContext:t}}else Bi=Bi.next=t;return e}var Xr=null;function vp(t){Xr===null?Xr=[t]:Xr.push(t)}function mE(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,vp(e)):(n.next=i.next,i.next=n),e.interleaved=n,jn(t,r)}function jn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var nr=!1;function _p(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function dr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,jn(t,n)}return i=r.interleaved,i===null?(e.next=e,vp(r)):(e.next=i.next,i.next=e),r.interleaved=e,jn(t,n)}function kl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ip(t,n)}}function Uy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function du(t,e,n,r){var i=t.updateQueue;nr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,h=c=u=null,a=s;do{var p=a.lane,g=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,P=a;switch(p=e,g=n,P.tag){case 1:if(w=P.payload,typeof w=="function"){f=w.call(g,f,p);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=P.payload,p=typeof w=="function"?w.call(g,f,p):w,p==null)break e;f=Re({},f,p);break e;case 2:nr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,u=f):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ui|=o,t.lanes=o,t.memoizedState=f}}function By(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(B(191,i));i.call(r)}}}var Pa={},_n=Nr(Pa),Jo=Nr(Pa),Zo=Nr(Pa);function Jr(t){if(t===Pa)throw Error(B(174));return t}function Tp(t,e){switch(ye(Zo,e),ye(Jo,t),ye(_n,Pa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hf(e,t)}Te(_n),ye(_n,e)}function us(){Te(_n),Te(Jo),Te(Zo)}function yE(t){Jr(Zo.current);var e=Jr(_n.current),n=hf(e,t.type);e!==n&&(ye(Jo,t),ye(_n,n))}function Ep(t){Jo.current===t&&(Te(_n),Te(Jo))}var Ce=Nr(0);function pu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var vh=[];function Sp(){for(var t=0;t<vh.length;t++)vh[t]._workInProgressVersionPrimary=null;vh.length=0}var bl=Wn.ReactCurrentDispatcher,_h=Wn.ReactCurrentBatchConfig,li=0,Pe=null,Be=null,qe=null,mu=!1,wo=!1,ea=0,sI=0;function st(){throw Error(B(321))}function Cp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!hn(t[n],e[n]))return!1;return!0}function wp(t,e,n,r,i,s){if(li=s,Pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bl.current=t===null||t.memoizedState===null?uI:cI,t=n(r,i),wo){s=0;do{if(wo=!1,ea=0,25<=s)throw Error(B(301));s+=1,qe=Be=null,e.updateQueue=null,bl.current=hI,t=n(r,i)}while(wo)}if(bl.current=gu,e=Be!==null&&Be.next!==null,li=0,qe=Be=Pe=null,mu=!1,e)throw Error(B(300));return t}function xp(){var t=ea!==0;return ea=0,t}function mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Pe.memoizedState=qe=t:qe=qe.next=t,qe}function Xt(){if(Be===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=Be.next;var e=qe===null?Pe.memoizedState:qe.next;if(e!==null)qe=e,Be=t;else{if(t===null)throw Error(B(310));Be=t,t={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},qe===null?Pe.memoizedState=qe=t:qe=qe.next=t}return qe}function ta(t,e){return typeof e=="function"?e(t):e}function Th(t){var e=Xt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=Be,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var h=c.lane;if((li&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Pe.lanes|=h,ui|=h}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,hn(r,e.memoizedState)||(Rt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Pe.lanes|=s,ui|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Eh(t){var e=Xt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);hn(s,e.memoizedState)||(Rt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function vE(){}function _E(t,e){var n=Pe,r=Xt(),i=e(),s=!hn(r.memoizedState,i);if(s&&(r.memoizedState=i,Rt=!0),r=r.queue,Pp(SE.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||qe!==null&&qe.memoizedState.tag&1){if(n.flags|=2048,na(9,EE.bind(null,n,r,i,e),void 0,null),Ye===null)throw Error(B(349));li&30||TE(n,e,i)}return i}function TE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function EE(t,e,n,r){e.value=n,e.getSnapshot=r,CE(e)&&wE(t)}function SE(t,e,n){return n(function(){CE(e)&&wE(t)})}function CE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!hn(t,n)}catch{return!0}}function wE(t){var e=jn(t,1);e!==null&&un(e,t,1,-1)}function $y(t){var e=mn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ta,lastRenderedState:t},e.queue=t,t=t.dispatch=lI.bind(null,Pe,t),[e.memoizedState,t]}function na(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function xE(){return Xt().memoizedState}function Dl(t,e,n,r){var i=mn();Pe.flags|=t,i.memoizedState=na(1|e,n,void 0,r===void 0?null:r)}function rc(t,e,n,r){var i=Xt();r=r===void 0?null:r;var s=void 0;if(Be!==null){var o=Be.memoizedState;if(s=o.destroy,r!==null&&Cp(r,o.deps)){i.memoizedState=na(e,n,s,r);return}}Pe.flags|=t,i.memoizedState=na(1|e,n,s,r)}function zy(t,e){return Dl(8390656,8,t,e)}function Pp(t,e){return rc(2048,8,t,e)}function PE(t,e){return rc(4,2,t,e)}function RE(t,e){return rc(4,4,t,e)}function IE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function AE(t,e,n){return n=n!=null?n.concat([t]):null,rc(4,4,IE.bind(null,e,t),n)}function Rp(){}function kE(t,e){var n=Xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function bE(t,e){var n=Xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function DE(t,e,n){return li&21?(hn(n,e)||(n=LT(),Pe.lanes|=n,ui|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rt=!0),t.memoizedState=n)}function oI(t,e){var n=pe;pe=n!==0&&4>n?n:4,t(!0);var r=_h.transition;_h.transition={};try{t(!1),e()}finally{pe=n,_h.transition=r}}function VE(){return Xt().memoizedState}function aI(t,e,n){var r=mr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ME(t))NE(e,n);else if(n=mE(t,e,n,r),n!==null){var i=_t();un(n,t,r,i),OE(n,e,r)}}function lI(t,e,n){var r=mr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ME(t))NE(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,hn(a,o)){var u=e.interleaved;u===null?(i.next=i,vp(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=mE(t,e,i,r),n!==null&&(i=_t(),un(n,t,r,i),OE(n,e,r))}}function ME(t){var e=t.alternate;return t===Pe||e!==null&&e===Pe}function NE(t,e){wo=mu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function OE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ip(t,n)}}var gu={readContext:Yt,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useInsertionEffect:st,useLayoutEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useMutableSource:st,useSyncExternalStore:st,useId:st,unstable_isNewReconciler:!1},uI={readContext:Yt,useCallback:function(t,e){return mn().memoizedState=[t,e===void 0?null:e],t},useContext:Yt,useEffect:zy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Dl(4194308,4,IE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Dl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Dl(4,2,t,e)},useMemo:function(t,e){var n=mn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=aI.bind(null,Pe,t),[r.memoizedState,t]},useRef:function(t){var e=mn();return t={current:t},e.memoizedState=t},useState:$y,useDebugValue:Rp,useDeferredValue:function(t){return mn().memoizedState=t},useTransition:function(){var t=$y(!1),e=t[0];return t=oI.bind(null,t[1]),mn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pe,i=mn();if(Se){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),Ye===null)throw Error(B(349));li&30||TE(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,zy(SE.bind(null,r,s,t),[t]),r.flags|=2048,na(9,EE.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=mn(),e=Ye.identifierPrefix;if(Se){var n=Dn,r=bn;n=(r&~(1<<32-ln(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ea++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=sI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},cI={readContext:Yt,useCallback:kE,useContext:Yt,useEffect:Pp,useImperativeHandle:AE,useInsertionEffect:PE,useLayoutEffect:RE,useMemo:bE,useReducer:Th,useRef:xE,useState:function(){return Th(ta)},useDebugValue:Rp,useDeferredValue:function(t){var e=Xt();return DE(e,Be.memoizedState,t)},useTransition:function(){var t=Th(ta)[0],e=Xt().memoizedState;return[t,e]},useMutableSource:vE,useSyncExternalStore:_E,useId:VE,unstable_isNewReconciler:!1},hI={readContext:Yt,useCallback:kE,useContext:Yt,useEffect:Pp,useImperativeHandle:AE,useInsertionEffect:PE,useLayoutEffect:RE,useMemo:bE,useReducer:Eh,useRef:xE,useState:function(){return Eh(ta)},useDebugValue:Rp,useDeferredValue:function(t){var e=Xt();return Be===null?e.memoizedState=t:DE(e,Be.memoizedState,t)},useTransition:function(){var t=Eh(ta)[0],e=Xt().memoizedState;return[t,e]},useMutableSource:vE,useSyncExternalStore:_E,useId:VE,unstable_isNewReconciler:!1};function tn(t,e){if(t&&t.defaultProps){e=Re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Df(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ic={isMounted:function(t){return(t=t._reactInternals)?pi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_t(),i=mr(t),s=Vn(r,i);s.payload=e,n!=null&&(s.callback=n),e=dr(t,s,i),e!==null&&(un(e,t,i,r),kl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_t(),i=mr(t),s=Vn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=dr(t,s,i),e!==null&&(un(e,t,i,r),kl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_t(),r=mr(t),i=Vn(n,r);i.tag=2,e!=null&&(i.callback=e),e=dr(t,i,r),e!==null&&(un(e,t,r,n),kl(e,t,r))}};function Hy(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!qo(n,r)||!qo(i,s):!0}function LE(t,e,n){var r=!1,i=xr,s=e.contextType;return typeof s=="object"&&s!==null?s=Yt(s):(i=At(e)?oi:pt.current,r=e.contextTypes,s=(r=r!=null)?os(t,i):xr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ic,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Wy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ic.enqueueReplaceState(e,e.state,null)}function Vf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},_p(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Yt(s):(s=At(e)?oi:pt.current,i.context=os(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Df(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ic.enqueueReplaceState(i,i.state,null),du(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function cs(t,e){try{var n="",r=e;do n+=jP(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Sh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Mf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var fI=typeof WeakMap=="function"?WeakMap:Map;function FE(t,e,n){n=Vn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){vu||(vu=!0,Hf=r),Mf(t,e)},n}function jE(t,e,n){n=Vn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Mf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Mf(t,e),typeof r!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ky(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new fI;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=PI.bind(null,t,e,n),e.then(t,t))}function Gy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function qy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vn(-1,1),e.tag=2,dr(n,e,1))),n.lanes|=1),t)}var dI=Wn.ReactCurrentOwner,Rt=!1;function vt(t,e,n,r){e.child=t===null?pE(e,null,n,r):ls(e,t.child,n,r)}function Qy(t,e,n,r,i){n=n.render;var s=e.ref;return es(e,i),r=wp(t,e,n,r,s,i),n=xp(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Un(t,e,i)):(Se&&n&&fp(e),e.flags|=1,vt(t,e,r,i),e.child)}function Yy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Np(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,UE(t,e,s,r,i)):(t=Ol(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:qo,n(o,r)&&t.ref===e.ref)return Un(t,e,i)}return e.flags|=1,t=gr(s,r),t.ref=e.ref,t.return=e,e.child=t}function UE(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(qo(s,r)&&t.ref===e.ref)if(Rt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Rt=!0);else return e.lanes=t.lanes,Un(t,e,i)}return Nf(t,e,n,r,i)}function BE(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(zi,Dt),Dt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(zi,Dt),Dt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ye(zi,Dt),Dt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ye(zi,Dt),Dt|=r;return vt(t,e,i,n),e.child}function $E(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Nf(t,e,n,r,i){var s=At(n)?oi:pt.current;return s=os(e,s),es(e,i),n=wp(t,e,n,r,s,i),r=xp(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Un(t,e,i)):(Se&&r&&fp(e),e.flags|=1,vt(t,e,n,i),e.child)}function Xy(t,e,n,r,i){if(At(n)){var s=!0;lu(e)}else s=!1;if(es(e,i),e.stateNode===null)Vl(t,e),LE(e,n,r),Vf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Yt(c):(c=At(n)?oi:pt.current,c=os(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&Wy(e,o,r,c),nr=!1;var p=e.memoizedState;o.state=p,du(e,r,o,i),u=e.memoizedState,a!==r||p!==u||It.current||nr?(typeof h=="function"&&(Df(e,n,h,r),u=e.memoizedState),(a=nr||Hy(e,n,a,r,p,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,gE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:tn(e.type,a),o.props=c,f=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Yt(u):(u=At(n)?oi:pt.current,u=os(e,u));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==u)&&Wy(e,o,r,u),nr=!1,p=e.memoizedState,o.state=p,du(e,r,o,i);var w=e.memoizedState;a!==f||p!==w||It.current||nr?(typeof g=="function"&&(Df(e,n,g,r),w=e.memoizedState),(c=nr||Hy(e,n,c,r,p,w,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Of(t,e,n,r,s,i)}function Of(t,e,n,r,i,s){$E(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Oy(e,n,!1),Un(t,e,s);r=e.stateNode,dI.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ls(e,t.child,null,s),e.child=ls(e,null,a,s)):vt(t,e,a,s),e.memoizedState=r.state,i&&Oy(e,n,!0),e.child}function zE(t){var e=t.stateNode;e.pendingContext?Ny(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ny(t,e.context,!1),Tp(t,e.containerInfo)}function Jy(t,e,n,r,i){return as(),pp(i),e.flags|=256,vt(t,e,n,r),e.child}var Lf={dehydrated:null,treeContext:null,retryLane:0};function Ff(t){return{baseLanes:t,cachePool:null,transitions:null}}function HE(t,e,n){var r=e.pendingProps,i=Ce.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ye(Ce,i&1),t===null)return kf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ac(o,r,0,null),t=ri(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ff(n),e.memoizedState=Lf,t):Ip(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return pI(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=gr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=gr(a,s):(s=ri(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Ff(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Lf,r}return s=t.child,t=s.sibling,r=gr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ip(t,e){return e=ac({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ul(t,e,n,r){return r!==null&&pp(r),ls(e,t.child,null,n),t=Ip(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pI(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Sh(Error(B(422))),ul(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=ac({mode:"visible",children:r.children},i,0,null),s=ri(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ls(e,t.child,null,o),e.child.memoizedState=Ff(o),e.memoizedState=Lf,s);if(!(e.mode&1))return ul(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(B(419)),r=Sh(s,r,void 0),ul(t,e,o,r)}if(a=(o&t.childLanes)!==0,Rt||a){if(r=Ye,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,jn(t,i),un(r,t,i,-1))}return Mp(),r=Sh(Error(B(421))),ul(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=RI.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Mt=fr(i.nextSibling),Nt=e,Se=!0,rn=null,t!==null&&(Ht[Wt++]=bn,Ht[Wt++]=Dn,Ht[Wt++]=ai,bn=t.id,Dn=t.overflow,ai=e),e=Ip(e,r.children),e.flags|=4096,e)}function Zy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),bf(t.return,e,n)}function Ch(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function WE(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(vt(t,e,r.children,n),r=Ce.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zy(t,n,e);else if(t.tag===19)Zy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ye(Ce,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&pu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ch(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&pu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ch(e,!0,n,null,s);break;case"together":Ch(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Un(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ui|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=gr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function mI(t,e,n){switch(e.tag){case 3:zE(e),as();break;case 5:yE(e);break;case 1:At(e.type)&&lu(e);break;case 4:Tp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ye(hu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ye(Ce,Ce.current&1),e.flags|=128,null):n&e.child.childLanes?HE(t,e,n):(ye(Ce,Ce.current&1),t=Un(t,e,n),t!==null?t.sibling:null);ye(Ce,Ce.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return WE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ye(Ce,Ce.current),r)break;return null;case 22:case 23:return e.lanes=0,BE(t,e,n)}return Un(t,e,n)}var KE,jf,GE,qE;KE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jf=function(){};GE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Jr(_n.current);var s=null;switch(n){case"input":i=af(t,i),r=af(t,r),s=[];break;case"select":i=Re({},i,{value:void 0}),r=Re({},r,{value:void 0}),s=[];break;case"textarea":i=cf(t,i),r=cf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ou)}ff(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Bo.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Bo.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&_e("scroll",t),s||a===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};qE=function(t,e,n,r){n!==r&&(e.flags|=4)};function eo(t,e){if(!Se)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function gI(t,e,n){var r=e.pendingProps;switch(dp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(e),null;case 1:return At(e.type)&&au(),ot(e),null;case 3:return r=e.stateNode,us(),Te(It),Te(pt),Sp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(al(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,rn!==null&&(Gf(rn),rn=null))),jf(t,e),ot(e),null;case 5:Ep(e);var i=Jr(Zo.current);if(n=e.type,t!==null&&e.stateNode!=null)GE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return ot(e),null}if(t=Jr(_n.current),al(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[yn]=e,r[Xo]=s,t=(e.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(i=0;i<lo.length;i++)_e(lo[i],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":ly(r,s),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},_e("invalid",r);break;case"textarea":cy(r,s),_e("invalid",r)}ff(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ol(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ol(r.textContent,a,t),i=["children",""+a]):Bo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&_e("scroll",r)}switch(n){case"input":Ja(r),uy(r,s,!0);break;case"textarea":Ja(r),hy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ou)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ST(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[yn]=e,t[Xo]=r,KE(t,e,!1,!1),e.stateNode=t;e:{switch(o=df(n,r),n){case"dialog":_e("cancel",t),_e("close",t),i=r;break;case"iframe":case"object":case"embed":_e("load",t),i=r;break;case"video":case"audio":for(i=0;i<lo.length;i++)_e(lo[i],t);i=r;break;case"source":_e("error",t),i=r;break;case"img":case"image":case"link":_e("error",t),_e("load",t),i=r;break;case"details":_e("toggle",t),i=r;break;case"input":ly(t,r),i=af(t,r),_e("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Re({},r,{value:void 0}),_e("invalid",t);break;case"textarea":cy(t,r),i=cf(t,r),_e("invalid",t);break;default:i=r}ff(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?xT(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&CT(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&$o(t,u):typeof u=="number"&&$o(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Bo.hasOwnProperty(s)?u!=null&&s==="onScroll"&&_e("scroll",t):u!=null&&Jd(t,s,u,o))}switch(n){case"input":Ja(t),uy(t,r,!1);break;case"textarea":Ja(t),hy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+wr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Yi(t,!!r.multiple,s,!1):r.defaultValue!=null&&Yi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ou)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ot(e),null;case 6:if(t&&e.stateNode!=null)qE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Jr(Zo.current),Jr(_n.current),al(e)){if(r=e.stateNode,n=e.memoizedProps,r[yn]=e,(s=r.nodeValue!==n)&&(t=Nt,t!==null))switch(t.tag){case 3:ol(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ol(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yn]=e,e.stateNode=r}return ot(e),null;case 13:if(Te(Ce),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Se&&Mt!==null&&e.mode&1&&!(e.flags&128))fE(),as(),e.flags|=98560,s=!1;else if(s=al(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(B(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[yn]=e}else as(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ot(e),s=!1}else rn!==null&&(Gf(rn),rn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ce.current&1?ze===0&&(ze=3):Mp())),e.updateQueue!==null&&(e.flags|=4),ot(e),null);case 4:return us(),jf(t,e),t===null&&Qo(e.stateNode.containerInfo),ot(e),null;case 10:return yp(e.type._context),ot(e),null;case 17:return At(e.type)&&au(),ot(e),null;case 19:if(Te(Ce),s=e.memoizedState,s===null)return ot(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)eo(s,!1);else{if(ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=pu(t),o!==null){for(e.flags|=128,eo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(Ce,Ce.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ne()>hs&&(e.flags|=128,r=!0,eo(s,!1),e.lanes=4194304)}else{if(!r)if(t=pu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),eo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Se)return ot(e),null}else 2*Ne()-s.renderingStartTime>hs&&n!==1073741824&&(e.flags|=128,r=!0,eo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ne(),e.sibling=null,n=Ce.current,ye(Ce,r?n&1|2:n&1),e):(ot(e),null);case 22:case 23:return Vp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Dt&1073741824&&(ot(e),e.subtreeFlags&6&&(e.flags|=8192)):ot(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function yI(t,e){switch(dp(e),e.tag){case 1:return At(e.type)&&au(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return us(),Te(It),Te(pt),Sp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ep(e),null;case 13:if(Te(Ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));as()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Te(Ce),null;case 4:return us(),null;case 10:return yp(e.type._context),null;case 22:case 23:return Vp(),null;case 24:return null;default:return null}}var cl=!1,ht=!1,vI=typeof WeakSet=="function"?WeakSet:Set,H=null;function $i(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){be(t,e,r)}else n.current=null}function Uf(t,e,n){try{n()}catch(r){be(t,e,r)}}var ev=!1;function _I(t,e){if(Cf=ru,t=ZT(),hp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,h=0,f=t,p=null;t:for(;;){for(var g;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(u=o),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(wf={focusedElem:t,selectionRange:n},ru=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var P=w.memoizedProps,A=w.memoizedState,T=e.stateNode,v=T.getSnapshotBeforeUpdate(e.elementType===e.type?P:tn(e.type,P),A);T.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(k){be(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return w=ev,ev=!1,w}function xo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Uf(e,n,s)}i=i.next}while(i!==r)}}function sc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Bf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function QE(t){var e=t.alternate;e!==null&&(t.alternate=null,QE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yn],delete e[Xo],delete e[Rf],delete e[tI],delete e[nI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function YE(t){return t.tag===5||t.tag===3||t.tag===4}function tv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||YE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $f(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ou));else if(r!==4&&(t=t.child,t!==null))for($f(t,e,n),t=t.sibling;t!==null;)$f(t,e,n),t=t.sibling}function zf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(zf(t,e,n),t=t.sibling;t!==null;)zf(t,e,n),t=t.sibling}var Xe=null,nn=!1;function Zn(t,e,n){for(n=n.child;n!==null;)XE(t,e,n),n=n.sibling}function XE(t,e,n){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount(Xu,n)}catch{}switch(n.tag){case 5:ht||$i(n,e);case 6:var r=Xe,i=nn;Xe=null,Zn(t,e,n),Xe=r,nn=i,Xe!==null&&(nn?(t=Xe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Xe.removeChild(n.stateNode));break;case 18:Xe!==null&&(nn?(t=Xe,n=n.stateNode,t.nodeType===8?gh(t.parentNode,n):t.nodeType===1&&gh(t,n),Ko(t)):gh(Xe,n.stateNode));break;case 4:r=Xe,i=nn,Xe=n.stateNode.containerInfo,nn=!0,Zn(t,e,n),Xe=r,nn=i;break;case 0:case 11:case 14:case 15:if(!ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Uf(n,e,o),i=i.next}while(i!==r)}Zn(t,e,n);break;case 1:if(!ht&&($i(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){be(n,e,a)}Zn(t,e,n);break;case 21:Zn(t,e,n);break;case 22:n.mode&1?(ht=(r=ht)||n.memoizedState!==null,Zn(t,e,n),ht=r):Zn(t,e,n);break;default:Zn(t,e,n)}}function nv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new vI),e.forEach(function(r){var i=II.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Zt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Xe=a.stateNode,nn=!1;break e;case 3:Xe=a.stateNode.containerInfo,nn=!0;break e;case 4:Xe=a.stateNode.containerInfo,nn=!0;break e}a=a.return}if(Xe===null)throw Error(B(160));XE(s,o,i),Xe=null,nn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){be(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)JE(e,t),e=e.sibling}function JE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zt(e,t),pn(t),r&4){try{xo(3,t,t.return),sc(3,t)}catch(P){be(t,t.return,P)}try{xo(5,t,t.return)}catch(P){be(t,t.return,P)}}break;case 1:Zt(e,t),pn(t),r&512&&n!==null&&$i(n,n.return);break;case 5:if(Zt(e,t),pn(t),r&512&&n!==null&&$i(n,n.return),t.flags&32){var i=t.stateNode;try{$o(i,"")}catch(P){be(t,t.return,P)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&TT(i,s),df(a,o);var c=df(a,s);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];h==="style"?xT(i,f):h==="dangerouslySetInnerHTML"?CT(i,f):h==="children"?$o(i,f):Jd(i,h,f,c)}switch(a){case"input":lf(i,s);break;case"textarea":ET(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Yi(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?Yi(i,!!s.multiple,s.defaultValue,!0):Yi(i,!!s.multiple,s.multiple?[]:"",!1))}i[Xo]=s}catch(P){be(t,t.return,P)}}break;case 6:if(Zt(e,t),pn(t),r&4){if(t.stateNode===null)throw Error(B(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(P){be(t,t.return,P)}}break;case 3:if(Zt(e,t),pn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ko(e.containerInfo)}catch(P){be(t,t.return,P)}break;case 4:Zt(e,t),pn(t);break;case 13:Zt(e,t),pn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(bp=Ne())),r&4&&nv(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(ht=(c=ht)||h,Zt(e,t),ht=c):Zt(e,t),pn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(H=t,h=t.child;h!==null;){for(f=H=h;H!==null;){switch(p=H,g=p.child,p.tag){case 0:case 11:case 14:case 15:xo(4,p,p.return);break;case 1:$i(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(P){be(r,n,P)}}break;case 5:$i(p,p.return);break;case 22:if(p.memoizedState!==null){iv(f);continue}}g!==null?(g.return=p,H=g):iv(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=wT("display",o))}catch(P){be(t,t.return,P)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(P){be(t,t.return,P)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Zt(e,t),pn(t),r&4&&nv(t);break;case 21:break;default:Zt(e,t),pn(t)}}function pn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(YE(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&($o(i,""),r.flags&=-33);var s=tv(t);zf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=tv(t);$f(t,a,o);break;default:throw Error(B(161))}}catch(u){be(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function TI(t,e,n){H=t,ZE(t)}function ZE(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var i=H,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||cl;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||ht;a=cl;var c=ht;if(cl=o,(ht=u)&&!c)for(H=i;H!==null;)o=H,u=o.child,o.tag===22&&o.memoizedState!==null?sv(i):u!==null?(u.return=o,H=u):sv(i);for(;s!==null;)H=s,ZE(s),s=s.sibling;H=i,cl=a,ht=c}rv(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,H=s):rv(t)}}function rv(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ht||sc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ht)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:tn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&By(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}By(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Ko(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}ht||e.flags&512&&Bf(e)}catch(p){be(e,e.return,p)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function iv(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function sv(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{sc(4,e)}catch(u){be(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){be(e,i,u)}}var s=e.return;try{Bf(e)}catch(u){be(e,s,u)}break;case 5:var o=e.return;try{Bf(e)}catch(u){be(e,o,u)}}}catch(u){be(e,e.return,u)}if(e===t){H=null;break}var a=e.sibling;if(a!==null){a.return=e.return,H=a;break}H=e.return}}var EI=Math.ceil,yu=Wn.ReactCurrentDispatcher,Ap=Wn.ReactCurrentOwner,Qt=Wn.ReactCurrentBatchConfig,fe=0,Ye=null,Fe=null,tt=0,Dt=0,zi=Nr(0),ze=0,ra=null,ui=0,oc=0,kp=0,Po=null,Pt=null,bp=0,hs=1/0,An=null,vu=!1,Hf=null,pr=null,hl=!1,or=null,_u=0,Ro=0,Wf=null,Ml=-1,Nl=0;function _t(){return fe&6?Ne():Ml!==-1?Ml:Ml=Ne()}function mr(t){return t.mode&1?fe&2&&tt!==0?tt&-tt:iI.transition!==null?(Nl===0&&(Nl=LT()),Nl):(t=pe,t!==0||(t=window.event,t=t===void 0?16:HT(t.type)),t):1}function un(t,e,n,r){if(50<Ro)throw Ro=0,Wf=null,Error(B(185));Ca(t,n,r),(!(fe&2)||t!==Ye)&&(t===Ye&&(!(fe&2)&&(oc|=n),ze===4&&ir(t,tt)),kt(t,r),n===1&&fe===0&&!(e.mode&1)&&(hs=Ne()+500,nc&&Or()))}function kt(t,e){var n=t.callbackNode;iR(t,e);var r=nu(t,t===Ye?tt:0);if(r===0)n!==null&&py(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&py(n),e===1)t.tag===0?rI(ov.bind(null,t)):uE(ov.bind(null,t)),ZR(function(){!(fe&6)&&Or()}),n=null;else{switch(FT(r)){case 1:n=rp;break;case 4:n=NT;break;case 16:n=tu;break;case 536870912:n=OT;break;default:n=tu}n=a1(n,e1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function e1(t,e){if(Ml=-1,Nl=0,fe&6)throw Error(B(327));var n=t.callbackNode;if(ts()&&t.callbackNode!==n)return null;var r=nu(t,t===Ye?tt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Tu(t,r);else{e=r;var i=fe;fe|=2;var s=n1();(Ye!==t||tt!==e)&&(An=null,hs=Ne()+500,ni(t,e));do try{wI();break}catch(a){t1(t,a)}while(!0);gp(),yu.current=s,fe=i,Fe!==null?e=0:(Ye=null,tt=0,e=ze)}if(e!==0){if(e===2&&(i=vf(t),i!==0&&(r=i,e=Kf(t,i))),e===1)throw n=ra,ni(t,0),ir(t,r),kt(t,Ne()),n;if(e===6)ir(t,r);else{if(i=t.current.alternate,!(r&30)&&!SI(i)&&(e=Tu(t,r),e===2&&(s=vf(t),s!==0&&(r=s,e=Kf(t,s))),e===1))throw n=ra,ni(t,0),ir(t,r),kt(t,Ne()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:Wr(t,Pt,An);break;case 3:if(ir(t,r),(r&130023424)===r&&(e=bp+500-Ne(),10<e)){if(nu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){_t(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Pf(Wr.bind(null,t,Pt,An),e);break}Wr(t,Pt,An);break;case 4:if(ir(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ln(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ne()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*EI(r/1960))-r,10<r){t.timeoutHandle=Pf(Wr.bind(null,t,Pt,An),r);break}Wr(t,Pt,An);break;case 5:Wr(t,Pt,An);break;default:throw Error(B(329))}}}return kt(t,Ne()),t.callbackNode===n?e1.bind(null,t):null}function Kf(t,e){var n=Po;return t.current.memoizedState.isDehydrated&&(ni(t,e).flags|=256),t=Tu(t,e),t!==2&&(e=Pt,Pt=n,e!==null&&Gf(e)),t}function Gf(t){Pt===null?Pt=t:Pt.push.apply(Pt,t)}function SI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!hn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ir(t,e){for(e&=~kp,e&=~oc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ln(e),r=1<<n;t[n]=-1,e&=~r}}function ov(t){if(fe&6)throw Error(B(327));ts();var e=nu(t,0);if(!(e&1))return kt(t,Ne()),null;var n=Tu(t,e);if(t.tag!==0&&n===2){var r=vf(t);r!==0&&(e=r,n=Kf(t,r))}if(n===1)throw n=ra,ni(t,0),ir(t,e),kt(t,Ne()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Wr(t,Pt,An),kt(t,Ne()),null}function Dp(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(hs=Ne()+500,nc&&Or())}}function ci(t){or!==null&&or.tag===0&&!(fe&6)&&ts();var e=fe;fe|=1;var n=Qt.transition,r=pe;try{if(Qt.transition=null,pe=1,t)return t()}finally{pe=r,Qt.transition=n,fe=e,!(fe&6)&&Or()}}function Vp(){Dt=zi.current,Te(zi)}function ni(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,JR(n)),Fe!==null)for(n=Fe.return;n!==null;){var r=n;switch(dp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&au();break;case 3:us(),Te(It),Te(pt),Sp();break;case 5:Ep(r);break;case 4:us();break;case 13:Te(Ce);break;case 19:Te(Ce);break;case 10:yp(r.type._context);break;case 22:case 23:Vp()}n=n.return}if(Ye=t,Fe=t=gr(t.current,null),tt=Dt=e,ze=0,ra=null,kp=oc=ui=0,Pt=Po=null,Xr!==null){for(e=0;e<Xr.length;e++)if(n=Xr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Xr=null}return t}function t1(t,e){do{var n=Fe;try{if(gp(),bl.current=gu,mu){for(var r=Pe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}mu=!1}if(li=0,qe=Be=Pe=null,wo=!1,ea=0,Ap.current=null,n===null||n.return===null){ze=1,ra=e,Fe=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=tt,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=Gy(o);if(g!==null){g.flags&=-257,qy(g,o,a,s,e),g.mode&1&&Ky(s,c,e),e=g,u=c;var w=e.updateQueue;if(w===null){var P=new Set;P.add(u),e.updateQueue=P}else w.add(u);break e}else{if(!(e&1)){Ky(s,c,e),Mp();break e}u=Error(B(426))}}else if(Se&&a.mode&1){var A=Gy(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),qy(A,o,a,s,e),pp(cs(u,a));break e}}s=u=cs(u,a),ze!==4&&(ze=2),Po===null?Po=[s]:Po.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var T=FE(s,u,e);Uy(s,T);break e;case 1:a=u;var v=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(pr===null||!pr.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=jE(s,a,e);Uy(s,k);break e}}s=s.return}while(s!==null)}i1(n)}catch(D){e=D,Fe===n&&n!==null&&(Fe=n=n.return);continue}break}while(!0)}function n1(){var t=yu.current;return yu.current=gu,t===null?gu:t}function Mp(){(ze===0||ze===3||ze===2)&&(ze=4),Ye===null||!(ui&268435455)&&!(oc&268435455)||ir(Ye,tt)}function Tu(t,e){var n=fe;fe|=2;var r=n1();(Ye!==t||tt!==e)&&(An=null,ni(t,e));do try{CI();break}catch(i){t1(t,i)}while(!0);if(gp(),fe=n,yu.current=r,Fe!==null)throw Error(B(261));return Ye=null,tt=0,ze}function CI(){for(;Fe!==null;)r1(Fe)}function wI(){for(;Fe!==null&&!QP();)r1(Fe)}function r1(t){var e=o1(t.alternate,t,Dt);t.memoizedProps=t.pendingProps,e===null?i1(t):Fe=e,Ap.current=null}function i1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=yI(n,e),n!==null){n.flags&=32767,Fe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ze=6,Fe=null;return}}else if(n=gI(n,e,Dt),n!==null){Fe=n;return}if(e=e.sibling,e!==null){Fe=e;return}Fe=e=t}while(e!==null);ze===0&&(ze=5)}function Wr(t,e,n){var r=pe,i=Qt.transition;try{Qt.transition=null,pe=1,xI(t,e,n,r)}finally{Qt.transition=i,pe=r}return null}function xI(t,e,n,r){do ts();while(or!==null);if(fe&6)throw Error(B(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(sR(t,s),t===Ye&&(Fe=Ye=null,tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hl||(hl=!0,a1(tu,function(){return ts(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Qt.transition,Qt.transition=null;var o=pe;pe=1;var a=fe;fe|=4,Ap.current=null,_I(t,n),JE(n,t),WR(wf),ru=!!Cf,wf=Cf=null,t.current=n,TI(n),YP(),fe=a,pe=o,Qt.transition=s}else t.current=n;if(hl&&(hl=!1,or=t,_u=i),s=t.pendingLanes,s===0&&(pr=null),ZP(n.stateNode),kt(t,Ne()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(vu)throw vu=!1,t=Hf,Hf=null,t;return _u&1&&t.tag!==0&&ts(),s=t.pendingLanes,s&1?t===Wf?Ro++:(Ro=0,Wf=t):Ro=0,Or(),null}function ts(){if(or!==null){var t=FT(_u),e=Qt.transition,n=pe;try{if(Qt.transition=null,pe=16>t?16:t,or===null)var r=!1;else{if(t=or,or=null,_u=0,fe&6)throw Error(B(331));var i=fe;for(fe|=4,H=t.current;H!==null;){var s=H,o=s.child;if(H.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(H=c;H!==null;){var h=H;switch(h.tag){case 0:case 11:case 15:xo(8,h,s)}var f=h.child;if(f!==null)f.return=h,H=f;else for(;H!==null;){h=H;var p=h.sibling,g=h.return;if(QE(h),h===c){H=null;break}if(p!==null){p.return=g,H=p;break}H=g}}}var w=s.alternate;if(w!==null){var P=w.child;if(P!==null){w.child=null;do{var A=P.sibling;P.sibling=null,P=A}while(P!==null)}}H=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,H=o;else e:for(;H!==null;){if(s=H,s.flags&2048)switch(s.tag){case 0:case 11:case 15:xo(9,s,s.return)}var T=s.sibling;if(T!==null){T.return=s.return,H=T;break e}H=s.return}}var v=t.current;for(H=v;H!==null;){o=H;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,H=C;else e:for(o=v;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:sc(9,a)}}catch(D){be(a,a.return,D)}if(a===o){H=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,H=k;break e}H=a.return}}if(fe=i,Or(),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot(Xu,t)}catch{}r=!0}return r}finally{pe=n,Qt.transition=e}}return!1}function av(t,e,n){e=cs(n,e),e=FE(t,e,1),t=dr(t,e,1),e=_t(),t!==null&&(Ca(t,1,e),kt(t,e))}function be(t,e,n){if(t.tag===3)av(t,t,n);else for(;e!==null;){if(e.tag===3){av(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pr===null||!pr.has(r))){t=cs(n,t),t=jE(e,t,1),e=dr(e,t,1),t=_t(),e!==null&&(Ca(e,1,t),kt(e,t));break}}e=e.return}}function PI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=_t(),t.pingedLanes|=t.suspendedLanes&n,Ye===t&&(tt&n)===n&&(ze===4||ze===3&&(tt&130023424)===tt&&500>Ne()-bp?ni(t,0):kp|=n),kt(t,e)}function s1(t,e){e===0&&(t.mode&1?(e=tl,tl<<=1,!(tl&130023424)&&(tl=4194304)):e=1);var n=_t();t=jn(t,e),t!==null&&(Ca(t,e,n),kt(t,n))}function RI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),s1(t,n)}function II(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),s1(t,n)}var o1;o1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||It.current)Rt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rt=!1,mI(t,e,n);Rt=!!(t.flags&131072)}else Rt=!1,Se&&e.flags&1048576&&cE(e,cu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Vl(t,e),t=e.pendingProps;var i=os(e,pt.current);es(e,n),i=wp(null,e,r,t,i,n);var s=xp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,At(r)?(s=!0,lu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,_p(e),i.updater=ic,e.stateNode=i,i._reactInternals=e,Vf(e,r,t,n),e=Of(null,e,r,!0,s,n)):(e.tag=0,Se&&s&&fp(e),vt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Vl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=kI(r),t=tn(r,t),i){case 0:e=Nf(null,e,r,t,n);break e;case 1:e=Xy(null,e,r,t,n);break e;case 11:e=Qy(null,e,r,t,n);break e;case 14:e=Yy(null,e,r,tn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tn(r,i),Nf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tn(r,i),Xy(t,e,r,i,n);case 3:e:{if(zE(e),t===null)throw Error(B(387));r=e.pendingProps,s=e.memoizedState,i=s.element,gE(t,e),du(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=cs(Error(B(423)),e),e=Jy(t,e,r,n,i);break e}else if(r!==i){i=cs(Error(B(424)),e),e=Jy(t,e,r,n,i);break e}else for(Mt=fr(e.stateNode.containerInfo.firstChild),Nt=e,Se=!0,rn=null,n=pE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(as(),r===i){e=Un(t,e,n);break e}vt(t,e,r,n)}e=e.child}return e;case 5:return yE(e),t===null&&kf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,xf(r,i)?o=null:s!==null&&xf(r,s)&&(e.flags|=32),$E(t,e),vt(t,e,o,n),e.child;case 6:return t===null&&kf(e),null;case 13:return HE(t,e,n);case 4:return Tp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ls(e,null,r,n):vt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tn(r,i),Qy(t,e,r,i,n);case 7:return vt(t,e,e.pendingProps,n),e.child;case 8:return vt(t,e,e.pendingProps.children,n),e.child;case 12:return vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ye(hu,r._currentValue),r._currentValue=o,s!==null)if(hn(s.value,o)){if(s.children===i.children&&!It.current){e=Un(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Vn(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),bf(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),bf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}vt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,es(e,n),i=Yt(i),r=r(i),e.flags|=1,vt(t,e,r,n),e.child;case 14:return r=e.type,i=tn(r,e.pendingProps),i=tn(r.type,i),Yy(t,e,r,i,n);case 15:return UE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tn(r,i),Vl(t,e),e.tag=1,At(r)?(t=!0,lu(e)):t=!1,es(e,n),LE(e,r,i),Vf(e,r,i,n),Of(null,e,r,!0,t,n);case 19:return WE(t,e,n);case 22:return BE(t,e,n)}throw Error(B(156,e.tag))};function a1(t,e){return MT(t,e)}function AI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(t,e,n,r){return new AI(t,e,n,r)}function Np(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kI(t){if(typeof t=="function")return Np(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ep)return 11;if(t===tp)return 14}return 2}function gr(t,e){var n=t.alternate;return n===null?(n=qt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ol(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Np(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Vi:return ri(n.children,i,s,e);case Zd:o=8,i|=8;break;case nf:return t=qt(12,n,e,i|2),t.elementType=nf,t.lanes=s,t;case rf:return t=qt(13,n,e,i),t.elementType=rf,t.lanes=s,t;case sf:return t=qt(19,n,e,i),t.elementType=sf,t.lanes=s,t;case yT:return ac(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mT:o=10;break e;case gT:o=9;break e;case ep:o=11;break e;case tp:o=14;break e;case tr:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=qt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ri(t,e,n,r){return t=qt(7,t,r,e),t.lanes=n,t}function ac(t,e,n,r){return t=qt(22,t,r,e),t.elementType=yT,t.lanes=n,t.stateNode={isHidden:!1},t}function wh(t,e,n){return t=qt(6,t,null,e),t.lanes=n,t}function xh(t,e,n){return e=qt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bI(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sh(0),this.expirationTimes=sh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Op(t,e,n,r,i,s,o,a,u){return t=new bI(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=qt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_p(s),t}function DI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Di,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function l1(t){if(!t)return xr;t=t._reactInternals;e:{if(pi(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(At(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(At(n))return lE(t,n,e)}return e}function u1(t,e,n,r,i,s,o,a,u){return t=Op(n,r,!0,t,i,s,o,a,u),t.context=l1(null),n=t.current,r=_t(),i=mr(n),s=Vn(r,i),s.callback=e??null,dr(n,s,i),t.current.lanes=i,Ca(t,i,r),kt(t,r),t}function lc(t,e,n,r){var i=e.current,s=_t(),o=mr(i);return n=l1(n),e.context===null?e.context=n:e.pendingContext=n,e=Vn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=dr(i,e,o),t!==null&&(un(t,i,o,s),kl(t,i,o)),o}function Eu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Lp(t,e){lv(t,e),(t=t.alternate)&&lv(t,e)}function VI(){return null}var c1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fp(t){this._internalRoot=t}uc.prototype.render=Fp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));lc(t,e,null,null)};uc.prototype.unmount=Fp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ci(function(){lc(null,t,null,null)}),e[Fn]=null}};function uc(t){this._internalRoot=t}uc.prototype.unstable_scheduleHydration=function(t){if(t){var e=BT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<rr.length&&e!==0&&e<rr[n].priority;n++);rr.splice(n,0,t),n===0&&zT(t)}};function jp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function uv(){}function MI(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Eu(o);s.call(c)}}var o=u1(e,r,t,0,null,!1,!1,"",uv);return t._reactRootContainer=o,t[Fn]=o.current,Qo(t.nodeType===8?t.parentNode:t),ci(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Eu(u);a.call(c)}}var u=Op(t,0,!1,null,null,!1,!1,"",uv);return t._reactRootContainer=u,t[Fn]=u.current,Qo(t.nodeType===8?t.parentNode:t),ci(function(){lc(e,u,n,r)}),u}function hc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=Eu(o);a.call(u)}}lc(e,o,t,i)}else o=MI(n,e,t,i,r);return Eu(o)}jT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ao(e.pendingLanes);n!==0&&(ip(e,n|1),kt(e,Ne()),!(fe&6)&&(hs=Ne()+500,Or()))}break;case 13:ci(function(){var r=jn(t,1);if(r!==null){var i=_t();un(r,t,1,i)}}),Lp(t,1)}};sp=function(t){if(t.tag===13){var e=jn(t,134217728);if(e!==null){var n=_t();un(e,t,134217728,n)}Lp(t,134217728)}};UT=function(t){if(t.tag===13){var e=mr(t),n=jn(t,e);if(n!==null){var r=_t();un(n,t,e,r)}Lp(t,e)}};BT=function(){return pe};$T=function(t,e){var n=pe;try{return pe=t,e()}finally{pe=n}};mf=function(t,e,n){switch(e){case"input":if(lf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=tc(r);if(!i)throw Error(B(90));_T(r),lf(r,i)}}}break;case"textarea":ET(t,n);break;case"select":e=n.value,e!=null&&Yi(t,!!n.multiple,e,!1)}};IT=Dp;AT=ci;var NI={usingClientEntryPoint:!1,Events:[xa,Li,tc,PT,RT,Dp]},to={findFiberByHostInstance:Yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OI={bundleType:to.bundleType,version:to.version,rendererPackageName:to.rendererPackageName,rendererConfig:to.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=DT(t),t===null?null:t.stateNode},findFiberByHostInstance:to.findFiberByHostInstance||VI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fl.isDisabled&&fl.supportsFiber)try{Xu=fl.inject(OI),vn=fl}catch{}}jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NI;jt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jp(e))throw Error(B(200));return DI(t,e,null,n)};jt.createRoot=function(t,e){if(!jp(t))throw Error(B(299));var n=!1,r="",i=c1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Op(t,1,!1,null,null,n,!1,r,i),t[Fn]=e.current,Qo(t.nodeType===8?t.parentNode:t),new Fp(e)};jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=DT(e),t=t===null?null:t.stateNode,t};jt.flushSync=function(t){return ci(t)};jt.hydrate=function(t,e,n){if(!cc(e))throw Error(B(200));return hc(null,t,e,!0,n)};jt.hydrateRoot=function(t,e,n){if(!jp(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=c1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=u1(e,null,t,1,n??null,i,!1,s,o),t[Fn]=e.current,Qo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new uc(e)};jt.render=function(t,e,n){if(!cc(e))throw Error(B(200));return hc(null,t,e,!1,n)};jt.unmountComponentAtNode=function(t){if(!cc(t))throw Error(B(40));return t._reactRootContainer?(ci(function(){hc(null,null,t,!1,function(){t._reactRootContainer=null,t[Fn]=null})}),!0):!1};jt.unstable_batchedUpdates=Dp;jt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!cc(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return hc(t,e,n,!1,r)};jt.version="18.3.1-next-f1338f8080-20240426";function h1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h1)}catch(t){console.error(t)}}h1(),hT.exports=jt;var LI=hT.exports,cv=LI;ef.createRoot=cv.createRoot,ef.hydrateRoot=cv.hydrateRoot;class FI{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const n of this._parts)e.push(n);return jI(e).buffer}}function jI(t){let e=0;for(const i of t)e+=i.byteLength;const n=new Uint8Array(e);let r=0;for(const i of t){const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);n.set(s,r),r+=i.byteLength}return n}function f1(t){return new UI(t).unpack()}function d1(t){const e=new BI,n=e.pack(t);return n instanceof Promise?n.then(()=>e.getBuffer()):e.getBuffer()}class UI{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let n;if((n=e^160)<=15)return this.unpack_raw(n);if((n=e^176)<=15)return this.unpack_string(n);if((n=e^144)<=15)return this.unpack_array(n);if((n=e^128)<=15)return this.unpack_map(n);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),n=(e[0]&255)*256+(e[1]&255);return this.index+=2,n}unpack_uint32(){const e=this.read(4),n=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,n}unpack_uint64(){const e=this.read(8),n=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,n}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,n}unpack_string(e){const n=this.read(e);let r=0,i="",s,o;for(;r<e;)s=n[r],s<160?(o=s,r++):(s^192)<32?(o=(s&31)<<6|n[r+1]&63,r+=2):(s^224)<16?(o=(s&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(o=(s&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),i+=String.fromCodePoint(o);return this.index+=e,i}unpack_array(e){const n=new Array(e);for(let r=0;r<e;r++)n[r]=this.unpack();return n}unpack_map(e){const n={};for(let r=0;r<e;r++){const i=this.unpack();n[i]=this.unpack()}return n}unpack_float(){const e=this.unpack_uint32(),n=e>>31,r=(e>>23&255)-127,i=e&8388607|8388608;return(n===0?1:-1)*i*2**(r-23)}unpack_double(){const e=this.unpack_uint32(),n=this.unpack_uint32(),r=e>>31,i=(e>>20&2047)-1023,o=(e&1048575|1048576)*2**(i-20)+n*2**(i-52);return(r===0?1:-1)*o}read(e){const n=this.index;if(n+e<=this.length)return this.dataView.subarray(n,n+e);throw new Error("BinaryPackFailure: read index out of range")}}class BI{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const n=e.constructor;if(e instanceof Array){const r=this.pack_array(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const r=e;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const n=e.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const n=this._textEncoder.encode(e),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(e){const n=e.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=i=>{if(i<n){const s=this.pack(e[i]);return s instanceof Promise?s.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let n=0;e<0&&(n=1,e=-e);const r=Math.floor(Math.log(e)/Math.LN2),i=e/2**r-1,s=Math.floor(i*2**52),o=2**32,a=n<<31|r+1023<<20|s/o&1048575,u=s%o;this._bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(u)}pack_object(e){const n=Object.keys(e),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const i=s=>{if(s<n.length){const o=n[s];if(e.hasOwnProperty(o)){this.pack(o);const a=this.pack(e[o]);if(a instanceof Promise)return a.then(()=>i(s+1))}return i(s+1)}};return i(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const n=e&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(e){const n=e/4294967296,r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const n=Math.floor(e/4294967296),r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new FI,this._textEncoder=new TextEncoder}}let p1=!0,m1=!0;function uo(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseFloat(r[n],10)}function mi(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,a){if(o!==e)return i.apply(this,arguments);const u=c=>{const h=n(c);h&&(a.handleEvent?a.handleEvent(h):a(h))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,u),i.apply(this,[o,u])};const s=r.removeEventListener;r.removeEventListener=function(o,a){if(o!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(a))return s.apply(this,arguments);const u=this._eventMap[e].get(a);return this._eventMap[e].delete(a),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,u])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function $I(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(p1=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function zI(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(m1=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function g1(){if(typeof window=="object"){if(p1)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Up(t,e){m1&&console.warn(t+" is deprecated, please use "+e+" instead.")}function HI(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(uo(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(uo(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(uo(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=uo(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function hv(t){return Object.prototype.toString.call(t)==="[object Object]"}function y1(t){return hv(t)?Object.keys(t).reduce(function(e,n){const r=hv(t[n]),i=r?y1(t[n]):t[n],s=r&&!Object.keys(i).length;return i===void 0||s?e:Object.assign(e,{[n]:i})},{}):t}function qf(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?qf(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{qf(t,t.get(i),n)})}))}function fv(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const s=[];return t.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&s.push(o)}),s.forEach(o=>{t.forEach(a=>{a.type===r&&a.trackId===o.id&&qf(t,a,i)})}),i}const dv=g1;function v1(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const u={};return Object.keys(a).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const h=typeof a[c]=="object"?a[c]:{ideal:a[c]};h.exact!==void 0&&typeof h.exact=="number"&&(h.min=h.max=h.exact);const f=function(p,g){return p?p+g.charAt(0).toUpperCase()+g.slice(1):g==="deviceId"?"sourceId":g};if(h.ideal!==void 0){u.optional=u.optional||[];let p={};typeof h.ideal=="number"?(p[f("min",c)]=h.ideal,u.optional.push(p),p={},p[f("max",c)]=h.ideal,u.optional.push(p)):(p[f("",c)]=h.ideal,u.optional.push(p))}h.exact!==void 0&&typeof h.exact!="number"?(u.mandatory=u.mandatory||{},u.mandatory[f("",c)]=h.exact):["min","max"].forEach(p=>{h[p]!==void 0&&(u.mandatory=u.mandatory||{},u.mandatory[f(p,c)]=h[p])})}),a.advanced&&(u.optional=(u.optional||[]).concat(a.advanced)),u},i=function(a,u){if(e.version>=61)return u(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const c=function(h,f,p){f in h&&!(p in h)&&(h[p]=h[f],delete h[f])};a=JSON.parse(JSON.stringify(a)),c(a.audio,"autoGainControl","googAutoGainControl"),c(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let c=a.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const h=e.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!h)){delete a.video.facingMode;let f;if(c.exact==="environment"||c.ideal==="environment"?f=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(f=["front"]),f)return n.mediaDevices.enumerateDevices().then(p=>{p=p.filter(w=>w.kind==="videoinput");let g=p.find(w=>f.some(P=>w.label.toLowerCase().includes(P)));return!g&&p.length&&f.includes("back")&&(g=p[p.length-1]),g&&(a.video.deviceId=c.exact?{exact:g.deviceId}:{ideal:g.deviceId}),a.video=r(a.video),dv("chrome: "+JSON.stringify(a)),u(a)})}a.video=r(a.video)}return dv("chrome: "+JSON.stringify(a)),u(a)},s=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(a,u,c){i(a,h=>{n.webkitGetUserMedia(h,u,f=>{c&&c(s(f))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(u){return i(u,c=>a(c).then(h=>{if(c.audio&&!h.getAudioTracks().length||c.video&&!h.getVideoTracks().length)throw h.getTracks().forEach(f=>{f.stop()}),new DOMException("","NotFoundError");return h},h=>Promise.reject(s(h))))}}}function _1(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function T1(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):s={track:i.track};const o=new Event("track");o.track=i.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.id):s={track:i};const o=new Event("track");o.track=i,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else mi(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function E1(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(a,u){let c=i.apply(this,arguments);return c||(c=e(this,a),this._senders.push(c)),c};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(a){s.apply(this,arguments);const u=this._senders.indexOf(a);u!==-1&&this._senders.splice(u,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(o=>{const a=this._senders.find(u=>u.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function S1(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(o=>o._pc=this),s});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>fv(o,s.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),mi(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>fv(s,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,s,o;return this.getSenders().forEach(a=>{a.track===r&&(i?o=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(s?o=!0:s=a),a.track===r)),o||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function C1(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const u=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(u)===-1&&this._shimmedLocalStreams[a.id].push(u):this._shimmedLocalStreams[a.id]=[a,u],u};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(c=>{if(this.getSenders().find(f=>f.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const u=this.getSenders().filter(c=>a.indexOf(c)===-1);this._shimmedLocalStreams[o.id]=[o].concat(u)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const u=this._shimmedLocalStreams[a].indexOf(o);u!==-1&&this._shimmedLocalStreams[a].splice(u,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function w1(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return C1(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const h=n.apply(this);return this._reverseStreams=this._reverseStreams||{},h.map(f=>this._reverseStreams[f.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(h){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.getTracks().forEach(f=>{if(this.getSenders().find(g=>g.track===f))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[h.id]){const f=new t.MediaStream(h.getTracks());this._streams[h.id]=f,this._reverseStreams[f.id]=h,h=f}r.apply(this,[h])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(h){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[h.id]||h]),delete this._reverseStreams[this._streams[h.id]?this._streams[h.id].id:h.id],delete this._streams[h.id]},t.RTCPeerConnection.prototype.addTrack=function(h,f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const p=[].slice.call(arguments,1);if(p.length!==1||!p[0].getTracks().find(P=>P===h))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(P=>P.track===h))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const w=this._streams[f.id];if(w)w.addTrack(h),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const P=new t.MediaStream([h]);this._streams[f.id]=P,this._reverseStreams[P.id]=f,this.addStream(P)}return this.getSenders().find(P=>P.track===h)};function s(c,h){let f=h.sdp;return Object.keys(c._reverseStreams||[]).forEach(p=>{const g=c._reverseStreams[p],w=c._streams[g.id];f=f.replace(new RegExp(w.id,"g"),g.id)}),new RTCSessionDescription({type:h.type,sdp:f})}function o(c,h){let f=h.sdp;return Object.keys(c._reverseStreams||[]).forEach(p=>{const g=c._reverseStreams[p],w=c._streams[g.id];f=f.replace(new RegExp(g.id,"g"),w.id)}),new RTCSessionDescription({type:h.type,sdp:f})}["createOffer","createAnswer"].forEach(function(c){const h=t.RTCPeerConnection.prototype[c],f={[c](){const p=arguments;return arguments.length&&typeof arguments[0]=="function"?h.apply(this,[w=>{const P=s(this,w);p[0].apply(null,[P])},w=>{p[1]&&p[1].apply(null,w)},arguments[2]]):h.apply(this,arguments).then(w=>s(this,w))}};t.RTCPeerConnection.prototype[c]=f[c]});const a=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=o(this,arguments[0]),a.apply(this,arguments))};const u=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const c=u.get.apply(this);return c.type===""?c:s(this,c)}}),t.RTCPeerConnection.prototype.removeTrack=function(h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!h._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(h._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let p;Object.keys(this._streams).forEach(g=>{this._streams[g].getTracks().find(P=>h.track===P)&&(p=this._streams[g])}),p&&(p.getTracks().length===1?this.removeStream(this._reverseStreams[p.id]):p.removeTrack(h.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Qf(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function x1(t,e){mi(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const pv=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:x1,shimAddTrackRemoveTrack:w1,shimAddTrackRemoveTrackWithNative:C1,shimGetSendersWithDtmf:E1,shimGetUserMedia:v1,shimMediaStream:_1,shimOnTrack:T1,shimPeerConnection:Qf,shimSenderReceiverGetStats:S1},Symbol.toStringTag,{value:"Module"}));function P1(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,s,o){Up("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,o)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(o,a,u){a in o&&!(u in o)&&(o[u]=o[a],delete o[a])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const a=o.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[a])}}}}function WI(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function R1(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Yf(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=t.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=o[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[s,o,a]=arguments;return r.apply(this,[s||null]).then(u=>{if(e.version<53&&!o)try{u.forEach(c=>{c.type=n[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;u.forEach((h,f)=>{u.set(f,Object.assign({},h,{type:n[h.type]||h.type}))})}return u}).then(o,a)}}function I1(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function A1(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),mi(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function k1(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){Up("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function b1(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function D1(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(i){const{sender:o}=s,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function V1(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function M1(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function N1(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const mv=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:D1,shimCreateAnswer:N1,shimCreateOffer:M1,shimGetDisplayMedia:WI,shimGetParameters:V1,shimGetUserMedia:P1,shimOnTrack:R1,shimPeerConnection:Yf,shimRTCDataChannel:b1,shimReceiverGetStats:A1,shimRemoveStream:k1,shimSenderGetStats:I1},Symbol.toStringTag,{value:"Module"}));function O1(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function L1(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,r.dispatchEvent(o)})}),e.apply(r,arguments)}}}function F1(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,s=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(c,h){const f=arguments.length>=2?arguments[2]:arguments[0],p=n.apply(this,[f]);return h?(p.then(c,h),Promise.resolve()):p},e.createAnswer=function(c,h){const f=arguments.length>=2?arguments[2]:arguments[0],p=r.apply(this,[f]);return h?(p.then(c,h),Promise.resolve()):p};let a=function(u,c,h){const f=i.apply(this,[u]);return h?(f.then(c,h),Promise.resolve()):f};e.setLocalDescription=a,a=function(u,c,h){const f=s.apply(this,[u]);return h?(f.then(c,h),Promise.resolve()):f},e.setRemoteDescription=a,a=function(u,c,h){const f=o.apply(this,[u]);return h?(f.then(c,h),Promise.resolve()):f},e.addIceCandidate=a}function j1(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(U1(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,i,s){e.mediaDevices.getUserMedia(r).then(i,s)}).bind(e))}function U1(t){return t&&t.video!==void 0?Object.assign({},t,{video:y1(t.video)}):t}function B1(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let o=0;o<r.iceServers.length;o++){let a=r.iceServers[o];a.urls===void 0&&a.url?(Up("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,s.push(a)):s.push(r.iceServers[o])}r.iceServers=s}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function $1(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function z1(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function H1(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const gv=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:H1,shimCallbacksAPI:F1,shimConstraints:U1,shimCreateOfferLegacy:z1,shimGetUserMedia:j1,shimLocalStreamsAPI:O1,shimRTCIceServerUrls:B1,shimRemoteStreamsAPI:L1,shimTrackEventTransceiver:$1},Symbol.toStringTag,{value:"Module"}));var W1={exports:{}};(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(i=>i.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let o=0;o<s.length;o++)i=s[o].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(o=>{n.parameters[o]!==void 0?s.push(o+"="+n.parameters[o]):s.push(o)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],s=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=e.splitLines(n)[0].split(" ");r.profile=s[2];for(let a=3;a<s.length;a++){const u=s[a],c=e.matchPrefix(n,"a=rtpmap:"+u+" ")[0];if(c){const h=e.parseRtpMap(c),f=e.matchPrefix(n,"a=fmtp:"+u+" ");switch(h.parameters=f.length?e.parseFmtp(f[0]):{},h.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+u+" ").map(e.parseRtcpFb),r.codecs.push(h),h.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(h.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(a=>{r.headerExtensions.push(e.parseExtmap(a))});const o=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(a=>{o.forEach(u=>{a.rtcpFeedback.find(h=>h.type===u.type&&h.parameter===u.parameter)||a.rtcpFeedback.push(u)})}),r},e.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(o=>{i+=e.writeRtpMap(o),i+=e.writeFmtp(o),i+=e.writeRtcpFb(o)});let s=0;return r.codecs.forEach(o=>{o.maxptime>s&&(s=o.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(o=>{i+=e.writeExtmap(o)}),i},e.parseRtpEncodingParameters=function(n){const r=[],i=e.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,o=i.fecMechanisms.indexOf("ULPFEC")!==-1,a=e.matchPrefix(n,"a=ssrc:").map(p=>e.parseSsrcMedia(p)).filter(p=>p.attribute==="cname"),u=a.length>0&&a[0].ssrc;let c;const h=e.matchPrefix(n,"a=ssrc-group:FID").map(p=>p.substring(17).split(" ").map(w=>parseInt(w,10)));h.length>0&&h[0].length>1&&h[0][0]===u&&(c=h[0][1]),i.codecs.forEach(p=>{if(p.name.toUpperCase()==="RTX"&&p.parameters.apt){let g={ssrc:u,codecPayloadType:parseInt(p.parameters.apt,10)};u&&c&&(g.rtx={ssrc:c}),r.push(g),s&&(g=JSON.parse(JSON.stringify(g)),g.fec={ssrc:u,mechanism:o?"red+ulpfec":"red"},r.push(g))}}),r.length===0&&u&&r.push({ssrc:u});let f=e.matchPrefix(n,"b=");return f.length&&(f[0].indexOf("b=TIAS:")===0?f=parseInt(f[0].substring(7),10):f[0].indexOf("b=AS:")===0?f=parseInt(f[0].substring(5),10)*1e3*.95-50*40*8:f=void 0,r.forEach(p=>{p.maxBitrate=f})),r},e.parseRtcpParameters=function(n){const r={},i=e.matchPrefix(n,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const o=e.matchPrefix(n,"a=rtcp-mux");return r.mux=o.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=e.matchPrefix(n,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const o=e.matchPrefix(n,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const a=e.matchPrefix(n,"a=sctpmap:");if(a.length>0){const u=a[0].substring(10).split(" ");return{port:parseInt(u[0],10),protocol:u[1],maxMessageSize:s}}},e.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,i){let s;const o=r!==void 0?r:2;return n?s=n:s=e.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const i=e.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const i=e.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){const i=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e})(W1);var K1=W1.exports;const ns=Z0(K1),KI=hP({__proto__:null,default:ns},[K1]);function Ll(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new e(r),s=ns.parseCandidate(r.candidate);for(const o in s)o in i||Object.defineProperty(i,o,{value:s[o]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,mi(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Xf(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||mi(t,"icecandidate",e=>{if(e.candidate){const n=ns.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function Fl(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const u=ns.splitSections(a.sdp);return u.shift(),u.some(c=>{const h=ns.parseMLine(c);return h&&h.kind==="application"&&h.protocol.indexOf("SCTP")!==-1})},r=function(a){const u=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(u===null||u.length<2)return-1;const c=parseInt(u[1],10);return c!==c?-1:c},i=function(a){let u=65536;return e.browser==="firefox"&&(e.version<57?a===-1?u=16384:u=2147483637:e.version<60?u=e.version===57?65535:65536:u=2147483637),u},s=function(a,u){let c=65536;e.browser==="firefox"&&e.version===57&&(c=65535);const h=ns.matchPrefix(a.sdp,"a=max-message-size:");return h.length>0?c=parseInt(h[0].substring(19),10):e.browser==="firefox"&&u!==-1&&(c=2147483637),c},o=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:u}=this.getConfiguration();u==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const u=r(arguments[0]),c=i(u),h=s(arguments[0],u);let f;c===0&&h===0?f=Number.POSITIVE_INFINITY:c===0||h===0?f=Math.max(c,h):f=Math.min(c,h);const p={};Object.defineProperty(p,"maxMessageSize",{get(){return f}}),this._sctp=p}return o.apply(this,arguments)}}function jl(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const s=r.send;r.send=function(){const a=arguments[0],u=a.length||a.size||a.byteLength;if(r.readyState==="open"&&i.sctp&&u>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},mi(t,"datachannel",r=>(e(r.channel,r.target),r))}function Jf(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const o=new Event("connectionstatechange",i);s.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Zf(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function Ul(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Bl(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>n.apply(this,[o]))})}const GI=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Zf,shimAddIceCandidateNullOrEmpty:Ul,shimConnectionState:Jf,shimMaxMessageSize:Fl,shimParameterlessSetLocalDescription:Bl,shimRTCIceCandidate:Ll,shimRTCIceCandidateRelayProtocol:Xf,shimSendThrowTypeError:jl},Symbol.toStringTag,{value:"Module"}));function qI({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=g1,r=HI(t),i={browserDetails:r,commonShim:GI,extractVersion:uo,disableLog:$I,disableWarnings:zI,sdp:KI};switch(r.browser){case"chrome":if(!pv||!Qf||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=pv,Ul(t,r),Bl(t),v1(t,r),_1(t),Qf(t,r),T1(t),w1(t,r),E1(t),S1(t),x1(t,r),Ll(t),Xf(t),Jf(t),Fl(t,r),jl(t),Zf(t,r);break;case"firefox":if(!mv||!Yf||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=mv,Ul(t,r),Bl(t),P1(t,r),Yf(t,r),R1(t),k1(t),I1(t),A1(t),b1(t),D1(t),V1(t),M1(t),N1(t),Ll(t),Jf(t),Fl(t,r),jl(t);break;case"safari":if(!gv||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=gv,Ul(t,r),Bl(t),B1(t),z1(t),F1(t),O1(t),L1(t),$1(t),j1(t),H1(t),Ll(t),Xf(t),Fl(t,r),jl(t),Zf(t,r);break;default:n("Unsupported browser!");break}return i}const yv=qI({window:typeof window>"u"?void 0:window});function gi(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}class G1{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const n=[],r=e.byteLength,i=Math.ceil(r/this.chunkedMTU);let s=0,o=0;for(;o<r;){const a=Math.min(r,o+this.chunkedMTU),u=e.slice(o,a),c={__peerData:this._dataCount,n:s,data:u,total:i};n.push(c),o=a,s++}return this._dataCount++,n}}}function QI(t){let e=0;for(const i of t)e+=i.byteLength;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.byteLength;return n}const Ph=yv.default||yv,no=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const t=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(t)?t==="chrome"?e>=this.minChromeVersion:t==="firefox"?e>=this.minFirefoxVersion:t==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return Ph.browserDetails.browser}getVersion(){return Ph.browserDetails.version||0}isUnifiedPlanSupported(){const t=this.getBrowser(),e=Ph.browserDetails.version||0;if(t==="chrome"&&e<this.minChromeVersion)return!1;if(t==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},YI=t=>!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t),q1=()=>Math.random().toString(36).slice(2),vv={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class XI extends G1{noop(){}blobToArrayBuffer(e,n){const r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(e),r}binaryStringToArrayBuffer(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=vv,this.browser=no.getBrowser(),this.browserVersion=no.getVersion(),this.pack=d1,this.unpack=f1,this.supports=function(){const n={browser:no.isBrowserSupported(),webRTC:no.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(vv),n.audioVideo=!0;let i;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!i.ordered;try{i.binaryType="blob",n.binaryBlob=!no.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return n}(),this.validateId=YI,this.randomToken=q1}}const wt=new XI,JI="PeerJS: ";class ZI{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...n){const r=[JI,...n];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);e>=3?console.log(...r):e>=2?console.warn("WARNING",...r):e>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var q=new ZI,Bp={},eA=Object.prototype.hasOwnProperty,Tt="~";function ia(){}Object.create&&(ia.prototype=Object.create(null),new ia().__proto__||(Tt=!1));function tA(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function Q1(t,e,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var s=new tA(n,r||t,i),o=Tt?Tt+e:e;return t._events[o]?t._events[o].fn?t._events[o]=[t._events[o],s]:t._events[o].push(s):(t._events[o]=s,t._eventsCount++),t}function $l(t,e){--t._eventsCount===0?t._events=new ia:delete t._events[e]}function mt(){this._events=new ia,this._eventsCount=0}mt.prototype.eventNames=function(){var e=[],n,r;if(this._eventsCount===0)return e;for(r in n=this._events)eA.call(n,r)&&e.push(Tt?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(n)):e};mt.prototype.listeners=function(e){var n=Tt?Tt+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o};mt.prototype.listenerCount=function(e){var n=Tt?Tt+e:e,r=this._events[n];return r?r.fn?1:r.length:0};mt.prototype.emit=function(e,n,r,i,s,o){var a=Tt?Tt+e:e;if(!this._events[a])return!1;var u=this._events[a],c=arguments.length,h,f;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,n),!0;case 3:return u.fn.call(u.context,n,r),!0;case 4:return u.fn.call(u.context,n,r,i),!0;case 5:return u.fn.call(u.context,n,r,i,s),!0;case 6:return u.fn.call(u.context,n,r,i,s,o),!0}for(f=1,h=new Array(c-1);f<c;f++)h[f-1]=arguments[f];u.fn.apply(u.context,h)}else{var p=u.length,g;for(f=0;f<p;f++)switch(u[f].once&&this.removeListener(e,u[f].fn,void 0,!0),c){case 1:u[f].fn.call(u[f].context);break;case 2:u[f].fn.call(u[f].context,n);break;case 3:u[f].fn.call(u[f].context,n,r);break;case 4:u[f].fn.call(u[f].context,n,r,i);break;default:if(!h)for(g=1,h=new Array(c-1);g<c;g++)h[g-1]=arguments[g];u[f].fn.apply(u[f].context,h)}}return!0};mt.prototype.on=function(e,n,r){return Q1(this,e,n,r,!1)};mt.prototype.once=function(e,n,r){return Q1(this,e,n,r,!0)};mt.prototype.removeListener=function(e,n,r,i){var s=Tt?Tt+e:e;if(!this._events[s])return this;if(!n)return $l(this,s),this;var o=this._events[s];if(o.fn)o.fn===n&&(!i||o.once)&&(!r||o.context===r)&&$l(this,s);else{for(var a=0,u=[],c=o.length;a<c;a++)(o[a].fn!==n||i&&!o[a].once||r&&o[a].context!==r)&&u.push(o[a]);u.length?this._events[s]=u.length===1?u[0]:u:$l(this,s)}return this};mt.prototype.removeAllListeners=function(e){var n;return e?(n=Tt?Tt+e:e,this._events[n]&&$l(this,n)):(this._events=new ia,this._eventsCount=0),this};mt.prototype.off=mt.prototype.removeListener;mt.prototype.addListener=mt.prototype.on;mt.prefixed=Tt;mt.EventEmitter=mt;Bp=mt;var yi={};gi(yi,"ConnectionType",()=>yr);gi(yi,"PeerErrorType",()=>Le);gi(yi,"BaseConnectionErrorType",()=>ed);gi(yi,"DataConnectionErrorType",()=>$p);gi(yi,"SerializationType",()=>fc);gi(yi,"SocketEventType",()=>ar);gi(yi,"ServerMessageType",()=>ct);var yr=function(t){return t.Data="data",t.Media="media",t}({}),Le=function(t){return t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc",t}({}),ed=function(t){return t.NegotiationFailed="negotiation-failed",t.ConnectionClosed="connection-closed",t}({}),$p=function(t){return t.NotOpenYet="not-open-yet",t.MessageToBig="message-too-big",t}({}),fc=function(t){return t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json",t.None="raw",t}({}),ar=function(t){return t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close",t}({}),ct=function(t){return t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE",t}({});const Y1="1.5.5";class nA extends Bp.EventEmitter{constructor(e,n,r,i,s,o=5e3){super(),this.pingInterval=o,this._disconnected=!0,this._messagesQueue=[];const a=e?"wss://":"ws://";this._baseUrl=a+n+":"+r+i+"peerjs?key="+s}start(e,n){this._id=e;const r=`${this._baseUrl}&id=${e}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+Y1),this._disconnected=!1,this._socket.onmessage=i=>{let s;try{s=JSON.parse(i.data),q.log("Server message received:",s)}catch{q.log("Invalid server message",i.data);return}this.emit(ar.Message,s)},this._socket.onclose=i=>{this._disconnected||(q.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(ar.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),q.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){q.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:ct.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const n of e)this.send(n)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(ar.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(e);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class X1{constructor(e){this.connection=e}startConnection(e){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===yr.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){const r=this.connection,i={ordered:!!e.reliable},s=n.createDataChannel(r.label,i);r._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){q.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,s=this.connection.provider;q.log("Listening for ICE candidates."),e.onicecandidate=o=>{!o.candidate||!o.candidate.candidate||(q.log(`Received ICE candidates for ${n}:`,o.candidate),s.socket.send({type:ct.Candidate,payload:{candidate:o.candidate,type:i,connectionId:r},dst:n}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":q.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(ed.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":q.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(ed.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":q.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},q.log("Listening for data channel"),e.ondatachannel=o=>{q.log("Received data channel");const a=o.channel;s.getConnection(n,r)._initializeDataChannel(a)},q.log("Listening for remote stream"),e.ontrack=o=>{q.log("Received remote stream");const a=o.streams[0],u=s.getConnection(n,r);if(u.type===yr.Media){const c=u;this._addStreamToMediaConnection(a,c)}}}cleanup(){q.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const n=e.signalingState!=="closed";let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&i.readyState!=="closed"),(n||r)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createOffer(this.connection.options.constraints);q.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),q.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===yr.Data){const s=this.connection;i={...i,label:s.label,reliable:s.reliable,serialization:s.serialization}}n.socket.send({type:ct.Offer,payload:i,dst:this.connection.peer})}catch(i){i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(Le.WebRTC,i),q.log("Failed to setLocalDescription, ",i))}}catch(r){n.emitError(Le.WebRTC,r),q.log("Failed to createOffer, ",r)}}async _makeAnswer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createAnswer();q.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),q.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:ct.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){n.emitError(Le.WebRTC,i),q.log("Failed to setLocalDescription, ",i)}}catch(r){n.emitError(Le.WebRTC,r),q.log("Failed to create answer, ",r)}}async handleSDP(e,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,i=this.connection.provider;q.log("Setting remote description",n);const s=this;try{await r.setRemoteDescription(n),q.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await s._makeAnswer()}catch(o){i.emitError(Le.WebRTC,o),q.log("Failed to setRemoteDescription, ",o)}}async handleCandidate(e){q.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),q.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(Le.WebRTC,n),q.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(e,n){if(q.log(`add tracks from stream ${e.id} to peer connection`),!n.addTrack)return q.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(r=>{n.addTrack(r,e)})}_addStreamToMediaConnection(e,n){q.log(`add stream ${e.id} to media connection ${n.connectionId}`),n.addStream(e)}}class J1 extends Bp.EventEmitter{emitError(e,n){q.error("Error:",n),this.emit("error",new rA(`${e}`,n))}}class rA extends Error{constructor(e,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=e}}class Z1 extends J1{get open(){return this._open}constructor(e,n,r){super(),this.peer=e,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}var $d;const jo=class jo extends Z1{get type(){return yr.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,n,r){super(e,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||jo.ID_PREFIX+wt.randomToken(),this._negotiator=new X1(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{q.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{q.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){q.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const n=e.type,r=e.payload;switch(e.type){case ct.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case ct.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:q.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(e,n={}){if(this._localStream){q.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};$d=new WeakMap,Gs(jo,$d,jo.ID_PREFIX="mc_");let Su=jo;class iA{constructor(e){this._options=e}_buildRequest(e){const n=this._options.secure?"https":"http",{host:r,port:i,path:s,key:o}=this._options,a=new URL(`${n}://${r}:${i}${s}${o}/${e}`);return a.searchParams.set("ts",`${Date.now()}${Math.random()}`),a.searchParams.set("version",Y1),fetch(a.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){q.error("Error retrieving ID",e);let n="";throw this._options.path==="/"&&this._options.host!==wt.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let n="";throw this._options.host===wt.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw q.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}var zd,Hd;const Qr=class Qr extends Z1{get type(){return yr.Data}constructor(e,n,r){super(e,n,r),this.connectionId=this.options.connectionId||Qr.ID_PREFIX+q1(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new X1(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{q.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{q.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{q.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,n=!1){if(!this.open){this.emitError($p.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,n)}async handleMessage(e){const n=e.payload;switch(e.type){case ct.Answer:await this._negotiator.handleSDP(e.type,n.sdp);break;case ct.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:q.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}};zd=new WeakMap,Hd=new WeakMap,Gs(Qr,zd,Qr.ID_PREFIX="dc_"),Gs(Qr,Hd,Qr.MAX_BUFFERED_AMOUNT=8388608);let Cu=Qr;class zp extends Cu{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Cu.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(n){return q.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Rh extends zp{close(e){super.close(e),this._chunkedData={}}constructor(e,n,r){super(e,n,r),this.chunker=new G1,this.serialization=fc.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const n=f1(e),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(e){const n=e.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:e.total};if(r.data[e.n]=new Uint8Array(e.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const i=QI(r.data);this._handleDataMessage({data:i})}}_send(e,n){const r=d1(e);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(e){const n=await e;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(e){const n=this.chunker.chunk(e);q.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class sA extends zp{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,n){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=fc.None}}class oA extends zp{_handleDataMessage({data:e}){const n=this.parse(this.decoder.decode(e)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(e,n){const r=this.encoder.encode(this.stringify(e));if(r.byteLength>=wt.chunkedMTU){this.emitError($p.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...e){super(...e),this.serialization=fc.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}var Wd;const Uo=class Uo extends J1{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[n,r]of this._connections)e[n]=r;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,n){super(),this._serializers={raw:sA,json:oA,binary:Rh,"binary-utf8":Rh,default:Rh},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(e&&e.constructor==Object?n=e:e&&(r=e.toString()),n={debug:0,host:wt.CLOUD_HOST,port:wt.CLOUD_PORT,path:"/",key:Uo.DEFAULT_KEY,token:wt.randomToken(),config:wt.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==wt.CLOUD_HOST?this._options.secure=wt.isSecure():this._options.host==wt.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&q.setLogFunction(this._options.logFunction),q.logLevel=this._options.debug||0,this._api=new iA(n),this._socket=this._createServerConnection(),!wt.supports.audioVideo&&!wt.supports.data){this._delayedAbort(Le.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!wt.validateId(r)){this._delayedAbort(Le.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(Le.ServerError,i))}_createServerConnection(){const e=new nA(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(ar.Message,n=>{this._handleMessage(n)}),e.on(ar.Error,n=>{this._abort(Le.SocketError,n)}),e.on(ar.Disconnected,()=>{this.disconnected||(this.emitError(Le.Network,"Lost connection to server."),this.disconnect())}),e.on(ar.Close,()=>{this.disconnected||this._abort(Le.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const n=e.type,r=e.payload,i=e.src;switch(n){case ct.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case ct.Error:this._abort(Le.ServerError,r.msg);break;case ct.IdTaken:this._abort(Le.UnavailableID,`ID "${this.id}" is taken`);break;case ct.InvalidKey:this._abort(Le.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case ct.Leave:q.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case ct.Expire:this.emitError(Le.PeerUnavailable,`Could not connect to peer ${i}`);break;case ct.Offer:{const s=r.connectionId;let o=this.getConnection(i,s);if(o&&(o.close(),q.warn(`Offer received for existing Connection ID:${s}`)),r.type===yr.Media){const u=new Su(i,this,{connectionId:s,_payload:r,metadata:r.metadata});o=u,this._addConnection(i,o),this.emit("call",u)}else if(r.type===yr.Data){const u=new this._serializers[r.serialization](i,this,{connectionId:s,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});o=u,this._addConnection(i,o),this.emit("connection",u)}else{q.warn(`Received malformed connection type:${r.type}`);return}const a=this._getMessages(s);for(const u of a)o.handleMessage(u);break}default:{if(!r){q.warn(`You received a malformed message from ${i} of type ${n}`);return}const s=r.connectionId,o=this.getConnection(i,s);o&&o.peerConnection?o.handleMessage(e):s?this._storeMessage(s,e):q.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,n){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(n)}_getMessages(e){const n=this._lostMessages.get(e);return n?(this._lostMessages.delete(e),n):[]}connect(e,n={}){if(n={serialization:"default",...n},this.disconnected){q.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Le.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](e,this,n);return this._addConnection(e,r),r}call(e,n,r={}){if(this.disconnected){q.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Le.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){q.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const i=new Su(e,this,{...r,_stream:n});return this._addConnection(e,i),i}_addConnection(e,n){q.log(`add connection ${n.type}:${n.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(n)}_removeConnection(e){const n=this._connections.get(e.peer);if(n){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,n){const r=this._connections.get(e);if(!r)return null;for(const i of r)if(i.connectionId===n)return i;return null}_delayedAbort(e,n){setTimeout(()=>{this._abort(e,n)},0)}_abort(e,n){q.error("Aborting!"),this.emitError(e,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(q.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const n=this._connections.get(e);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const e=this.id;q.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)q.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)q.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=n=>{}){this._api.listAllPeers().then(n=>e(n)).catch(n=>this._abort(Le.ServerError,n))}};Wd=new WeakMap,Gs(Uo,Wd,Uo.DEFAULT_KEY="peerjs");let wu=Uo;const eS=L.createContext(),Ra=()=>L.useContext(eS),aA=({children:t})=>{const[e,n]=L.useState(null),[r,i]=L.useState(""),[s,o]=L.useState(null),[a,u]=L.useState(!1),[c,h]=L.useState(""),[f,p]=L.useState(!1),[g,w]=L.useState(null),[P,A]=L.useState(0),[T,v]=L.useState([]),[C,k]=L.useState("// Start typing your code here..."),D=L.useRef(C),O=K=>{k(K)};L.useEffect(()=>{D.current=C},[C]);const E=K=>`vignan-pad-${K}`,y=()=>{const K=Math.floor(1e5+Math.random()*9e5).toString(),G=E(K);e&&e.destroy();const X=new wu(G,{debug:2});return n(X),i(K),p(!0),X.on("open",ne=>{console.log("My peer ID is: "+ne)}),X.on("connection",ne=>{console.log("Incoming connection:",ne.peer),x(ne)}),X.on("error",ne=>{console.error(ne),h("Connection error: "+ne.type)}),K},S=K=>{if(!K||K.length!==6){h("Invalid PIN");return}e&&e.destroy();const G=new wu({debug:2});n(G),p(!1),G.on("open",()=>{const X=E(K);console.log("Connecting to:",X);const ne=G.connect(X);x(ne)}),G.on("error",X=>{console.error(X),h("Could not connect. Check PIN.")})},x=K=>{K.on("open",()=>{o(K),u(!0),h(""),D.current&&K.send({type:"CODE_UPDATE",code:D.current})}),K.on("data",G=>{I(G)}),K.on("close",()=>{u(!1),o(null),alert("Peer disconnected")})},I=(K,G)=>{K.type==="CODE_UPDATE"?k(K.code):K.type==="FILE_META"?(w({name:K.name,size:K.size,type:K.mime,chunks:[],receivedSize:0}),A(0)):K.type==="FILE_CHUNK"&&w(X=>{if(!X)return null;const ne=[...X.chunks,K.chunk],U=X.receivedSize+K.chunk.byteLength,W=U/X.size*100;if(A(W),U>=X.size){const Z=new Blob(ne,{type:X.type}),Q=URL.createObjectURL(Z);return v(re=>[...re,{name:X.name,url:Q,size:X.size}]),null}return{...X,chunks:ne,receivedSize:U}})},b=K=>{k(K),s&&s.send({type:"CODE_UPDATE",code:K})},R=K=>{if(!s)return;s.send({type:"FILE_META",name:K.name,size:K.size,mime:K.type});const G=16384,X=new FileReader;let ne=0;X.onload=W=>{s&&(s.send({type:"FILE_CHUNK",chunk:W.target.result}),ne+=W.target.result.byteLength,ne<K.size&&U(ne))};const U=W=>{const Z=K.slice(W,W+G);X.readAsArrayBuffer(Z)};U(0)};return M.jsx(eS.Provider,{value:{createSession:y,joinSession:S,isConnected:a,myId:r,error:c,isHost:f,updateCode:b,sendFile:R,code:C,fileProgress:P,incomingFile:g,receivedFiles:T,peer:e,setInitialCode:O},children:t})},lA=()=>{};var _v={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},uA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},nS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;u||(g=64,o||(p=64)),r.push(n[h],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(tS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):uA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new cA;const p=s<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),f!==64){const w=c<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class cA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hA=function(t){const e=tS(t);return nS.encodeByteArray(e,!0)},xu=function(t){return hA(t).replace(/\./g,"")},fA=function(t){try{return nS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA=()=>dA().__FIREBASE_DEFAULTS__,mA=()=>{if(typeof process>"u"||typeof _v>"u")return;const t=_v.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},gA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&fA(t[1]);return e&&JSON.parse(e)},Hp=()=>{try{return lA()||pA()||mA()||gA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},yA=t=>{var e,n;return(n=(e=Hp())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},rS=t=>{const e=yA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},iS=()=>{var t;return(t=Hp())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[xu(JSON.stringify(n)),xu(JSON.stringify(o)),""].join(".")}const Io={};function _A(){const t={prod:[],emulator:[]};for(const e of Object.keys(Io))Io[e]?t.emulator.push(e):t.prod.push(e);return t}function TA(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Tv=!1;function aS(t,e){if(typeof window>"u"||typeof document>"u"||!dc(window.location.host)||Io[t]===e||Io[t]||Tv)return;Io[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=_A().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Tv=!0,o()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=TA(r),g=n("text"),w=document.getElementById(g)||document.createElement("span"),P=n("learnmore"),A=document.getElementById(P)||document.createElement("a"),T=n("preprendIcon"),v=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const C=p.element;a(C),h(A,P);const k=c();u(v,T),C.append(v,w,A,k),document.body.appendChild(C)}s?(w.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SA(){var e;const t=(e=Hp())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CA(){return!SA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wA(){try{return typeof indexedDB=="object"}catch{return!1}}function xA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="FirebaseError";class vi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=PA,Object.setPrototypeOf(this,vi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lS.prototype.create)}}class lS{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?RA(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new vi(i,a,r)}}function RA(t,e){return t.replace(IA,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const IA=/\{\$([^}]+)}/g;function Pu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Ev(s)&&Ev(o)){if(!Pu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ev(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(t){return t&&t._delegate?t._delegate:t}class fs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new vA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bA(e))try{this.getOrInitializeService({instanceIdentifier:Kr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Kr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Kr){return this.instances.has(e)}getOptions(e=Kr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:kA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Kr){return this.component?this.component.multipleInstances?e:Kr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kA(t){return t===Kr?void 0:t}function bA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new AA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const VA={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},MA=he.INFO,NA={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},OA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=NA[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class uS{constructor(e){this.name=e,this._logLevel=MA,this._logHandler=OA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const LA=(t,e)=>e.some(n=>t instanceof n);let Sv,Cv;function FA(){return Sv||(Sv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jA(){return Cv||(Cv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cS=new WeakMap,td=new WeakMap,hS=new WeakMap,Ih=new WeakMap,Wp=new WeakMap;function UA(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(vr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&cS.set(n,t)}).catch(()=>{}),Wp.set(e,t),e}function BA(t){if(td.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});td.set(t,e)}let nd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return td.get(t);if(e==="objectStoreNames")return t.objectStoreNames||hS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $A(t){nd=t(nd)}function zA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ah(this),e,...n);return hS.set(r,e.sort?e.sort():[e]),vr(r)}:jA().includes(t)?function(...e){return t.apply(Ah(this),e),vr(cS.get(this))}:function(...e){return vr(t.apply(Ah(this),e))}}function HA(t){return typeof t=="function"?zA(t):(t instanceof IDBTransaction&&BA(t),LA(t,FA())?new Proxy(t,nd):t)}function vr(t){if(t instanceof IDBRequest)return UA(t);if(Ih.has(t))return Ih.get(t);const e=HA(t);return e!==t&&(Ih.set(t,e),Wp.set(e,t)),e}const Ah=t=>Wp.get(t);function WA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=vr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(vr(o.result),u.oldVersion,u.newVersion,vr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const KA=["get","getKey","getAll","getAllKeys","count"],GA=["put","add","delete","clear"],kh=new Map;function wv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kh.get(e))return kh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=GA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||KA.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&u.done]))[0]};return kh.set(e,s),s}$A(t=>({...t,get:(e,n,r)=>wv(e,n)||t.get(e,n,r),has:(e,n)=>!!wv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(QA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function QA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rd="@firebase/app",xv="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn=new uS("@firebase/app"),YA="@firebase/app-compat",XA="@firebase/analytics-compat",JA="@firebase/analytics",ZA="@firebase/app-check-compat",ek="@firebase/app-check",tk="@firebase/auth",nk="@firebase/auth-compat",rk="@firebase/database",ik="@firebase/data-connect",sk="@firebase/database-compat",ok="@firebase/functions",ak="@firebase/functions-compat",lk="@firebase/installations",uk="@firebase/installations-compat",ck="@firebase/messaging",hk="@firebase/messaging-compat",fk="@firebase/performance",dk="@firebase/performance-compat",pk="@firebase/remote-config",mk="@firebase/remote-config-compat",gk="@firebase/storage",yk="@firebase/storage-compat",vk="@firebase/firestore",_k="@firebase/ai",Tk="@firebase/firestore-compat",Ek="firebase",Sk="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id="[DEFAULT]",Ck={[rd]:"fire-core",[YA]:"fire-core-compat",[JA]:"fire-analytics",[XA]:"fire-analytics-compat",[ek]:"fire-app-check",[ZA]:"fire-app-check-compat",[tk]:"fire-auth",[nk]:"fire-auth-compat",[rk]:"fire-rtdb",[ik]:"fire-data-connect",[sk]:"fire-rtdb-compat",[ok]:"fire-fn",[ak]:"fire-fn-compat",[lk]:"fire-iid",[uk]:"fire-iid-compat",[ck]:"fire-fcm",[hk]:"fire-fcm-compat",[fk]:"fire-perf",[dk]:"fire-perf-compat",[pk]:"fire-rc",[mk]:"fire-rc-compat",[gk]:"fire-gcs",[yk]:"fire-gcs-compat",[vk]:"fire-fst",[Tk]:"fire-fst-compat",[_k]:"fire-vertex","fire-js":"fire-js",[Ek]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru=new Map,wk=new Map,sd=new Map;function Pv(t,e){try{t.container.addComponent(e)}catch(n){Bn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function oa(t){const e=t.name;if(sd.has(e))return Bn.debug(`There were multiple attempts to register component ${e}.`),!1;sd.set(e,t);for(const n of Ru.values())Pv(n,t);for(const n of wk.values())Pv(n,t);return!0}function fS(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function dS(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_r=new lS("app","Firebase",xk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=Sk;function mS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:id,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw _r.create("bad-app-name",{appName:String(i)});if(n||(n=iS()),!n)throw _r.create("no-options");const s=Ru.get(i);if(s){if(Pu(n,s.options)&&Pu(r,s.config))return s;throw _r.create("duplicate-app",{appName:i})}const o=new DA(i);for(const u of sd.values())o.addComponent(u);const a=new Pk(n,r,o);return Ru.set(i,a),a}function gS(t=id){const e=Ru.get(t);if(!e&&t===id&&iS())return mS();if(!e)throw _r.create("no-app",{appName:t});return e}function Tr(t,e,n){let r=Ck[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bn.warn(o.join(" "));return}oa(new fs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk="firebase-heartbeat-database",Ik=1,aa="firebase-heartbeat-store";let bh=null;function yS(){return bh||(bh=WA(Rk,Ik,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(aa)}catch(n){console.warn(n)}}}}).catch(t=>{throw _r.create("idb-open",{originalErrorMessage:t.message})})),bh}async function Ak(t){try{const n=(await yS()).transaction(aa),r=await n.objectStore(aa).get(vS(t));return await n.done,r}catch(e){if(e instanceof vi)Bn.warn(e.message);else{const n=_r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bn.warn(n.message)}}}async function Rv(t,e){try{const r=(await yS()).transaction(aa,"readwrite");await r.objectStore(aa).put(e,vS(t)),await r.done}catch(n){if(n instanceof vi)Bn.warn(n.message);else{const r=_r.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Bn.warn(r.message)}}}function vS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=1024,bk=30;class Dk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Mk(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Iv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>bk){const o=Nk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Bn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Iv(),{heartbeatsToSend:r,unsentEntries:i}=Vk(this._heartbeatsCache.heartbeats),s=xu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Bn.warn(n),""}}}function Iv(){return new Date().toISOString().substring(0,10)}function Vk(t,e=kk){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Av(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Av(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Mk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wA()?xA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Ak(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Rv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Rv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Av(t){return xu(JSON.stringify({version:2,heartbeats:t})).length}function Nk(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(t){oa(new fs("platform-logger",e=>new qA(e),"PRIVATE")),oa(new fs("heartbeat",e=>new Dk(e),"PRIVATE")),Tr(rd,xv,t),Tr(rd,xv,"esm2020"),Tr("fire-js","")}Ok("");var Lk="firebase",Fk="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tr(Lk,Fk,"app");var kv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Er,_S;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,y){function S(){}S.prototype=y.prototype,E.F=y.prototype,E.prototype=new S,E.prototype.constructor=E,E.D=function(x,I,b){for(var R=Array(arguments.length-2),K=2;K<arguments.length;K++)R[K-2]=arguments[K];return y.prototype[I].apply(x,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,y,S){S||(S=0);const x=Array(16);if(typeof y=="string")for(var I=0;I<16;++I)x[I]=y.charCodeAt(S++)|y.charCodeAt(S++)<<8|y.charCodeAt(S++)<<16|y.charCodeAt(S++)<<24;else for(I=0;I<16;++I)x[I]=y[S++]|y[S++]<<8|y[S++]<<16|y[S++]<<24;y=E.g[0],S=E.g[1],I=E.g[2];let b=E.g[3],R;R=y+(b^S&(I^b))+x[0]+3614090360&4294967295,y=S+(R<<7&4294967295|R>>>25),R=b+(I^y&(S^I))+x[1]+3905402710&4294967295,b=y+(R<<12&4294967295|R>>>20),R=I+(S^b&(y^S))+x[2]+606105819&4294967295,I=b+(R<<17&4294967295|R>>>15),R=S+(y^I&(b^y))+x[3]+3250441966&4294967295,S=I+(R<<22&4294967295|R>>>10),R=y+(b^S&(I^b))+x[4]+4118548399&4294967295,y=S+(R<<7&4294967295|R>>>25),R=b+(I^y&(S^I))+x[5]+1200080426&4294967295,b=y+(R<<12&4294967295|R>>>20),R=I+(S^b&(y^S))+x[6]+2821735955&4294967295,I=b+(R<<17&4294967295|R>>>15),R=S+(y^I&(b^y))+x[7]+4249261313&4294967295,S=I+(R<<22&4294967295|R>>>10),R=y+(b^S&(I^b))+x[8]+1770035416&4294967295,y=S+(R<<7&4294967295|R>>>25),R=b+(I^y&(S^I))+x[9]+2336552879&4294967295,b=y+(R<<12&4294967295|R>>>20),R=I+(S^b&(y^S))+x[10]+4294925233&4294967295,I=b+(R<<17&4294967295|R>>>15),R=S+(y^I&(b^y))+x[11]+2304563134&4294967295,S=I+(R<<22&4294967295|R>>>10),R=y+(b^S&(I^b))+x[12]+1804603682&4294967295,y=S+(R<<7&4294967295|R>>>25),R=b+(I^y&(S^I))+x[13]+4254626195&4294967295,b=y+(R<<12&4294967295|R>>>20),R=I+(S^b&(y^S))+x[14]+2792965006&4294967295,I=b+(R<<17&4294967295|R>>>15),R=S+(y^I&(b^y))+x[15]+1236535329&4294967295,S=I+(R<<22&4294967295|R>>>10),R=y+(I^b&(S^I))+x[1]+4129170786&4294967295,y=S+(R<<5&4294967295|R>>>27),R=b+(S^I&(y^S))+x[6]+3225465664&4294967295,b=y+(R<<9&4294967295|R>>>23),R=I+(y^S&(b^y))+x[11]+643717713&4294967295,I=b+(R<<14&4294967295|R>>>18),R=S+(b^y&(I^b))+x[0]+3921069994&4294967295,S=I+(R<<20&4294967295|R>>>12),R=y+(I^b&(S^I))+x[5]+3593408605&4294967295,y=S+(R<<5&4294967295|R>>>27),R=b+(S^I&(y^S))+x[10]+38016083&4294967295,b=y+(R<<9&4294967295|R>>>23),R=I+(y^S&(b^y))+x[15]+3634488961&4294967295,I=b+(R<<14&4294967295|R>>>18),R=S+(b^y&(I^b))+x[4]+3889429448&4294967295,S=I+(R<<20&4294967295|R>>>12),R=y+(I^b&(S^I))+x[9]+568446438&4294967295,y=S+(R<<5&4294967295|R>>>27),R=b+(S^I&(y^S))+x[14]+3275163606&4294967295,b=y+(R<<9&4294967295|R>>>23),R=I+(y^S&(b^y))+x[3]+4107603335&4294967295,I=b+(R<<14&4294967295|R>>>18),R=S+(b^y&(I^b))+x[8]+1163531501&4294967295,S=I+(R<<20&4294967295|R>>>12),R=y+(I^b&(S^I))+x[13]+2850285829&4294967295,y=S+(R<<5&4294967295|R>>>27),R=b+(S^I&(y^S))+x[2]+4243563512&4294967295,b=y+(R<<9&4294967295|R>>>23),R=I+(y^S&(b^y))+x[7]+1735328473&4294967295,I=b+(R<<14&4294967295|R>>>18),R=S+(b^y&(I^b))+x[12]+2368359562&4294967295,S=I+(R<<20&4294967295|R>>>12),R=y+(S^I^b)+x[5]+4294588738&4294967295,y=S+(R<<4&4294967295|R>>>28),R=b+(y^S^I)+x[8]+2272392833&4294967295,b=y+(R<<11&4294967295|R>>>21),R=I+(b^y^S)+x[11]+1839030562&4294967295,I=b+(R<<16&4294967295|R>>>16),R=S+(I^b^y)+x[14]+4259657740&4294967295,S=I+(R<<23&4294967295|R>>>9),R=y+(S^I^b)+x[1]+2763975236&4294967295,y=S+(R<<4&4294967295|R>>>28),R=b+(y^S^I)+x[4]+1272893353&4294967295,b=y+(R<<11&4294967295|R>>>21),R=I+(b^y^S)+x[7]+4139469664&4294967295,I=b+(R<<16&4294967295|R>>>16),R=S+(I^b^y)+x[10]+3200236656&4294967295,S=I+(R<<23&4294967295|R>>>9),R=y+(S^I^b)+x[13]+681279174&4294967295,y=S+(R<<4&4294967295|R>>>28),R=b+(y^S^I)+x[0]+3936430074&4294967295,b=y+(R<<11&4294967295|R>>>21),R=I+(b^y^S)+x[3]+3572445317&4294967295,I=b+(R<<16&4294967295|R>>>16),R=S+(I^b^y)+x[6]+76029189&4294967295,S=I+(R<<23&4294967295|R>>>9),R=y+(S^I^b)+x[9]+3654602809&4294967295,y=S+(R<<4&4294967295|R>>>28),R=b+(y^S^I)+x[12]+3873151461&4294967295,b=y+(R<<11&4294967295|R>>>21),R=I+(b^y^S)+x[15]+530742520&4294967295,I=b+(R<<16&4294967295|R>>>16),R=S+(I^b^y)+x[2]+3299628645&4294967295,S=I+(R<<23&4294967295|R>>>9),R=y+(I^(S|~b))+x[0]+4096336452&4294967295,y=S+(R<<6&4294967295|R>>>26),R=b+(S^(y|~I))+x[7]+1126891415&4294967295,b=y+(R<<10&4294967295|R>>>22),R=I+(y^(b|~S))+x[14]+2878612391&4294967295,I=b+(R<<15&4294967295|R>>>17),R=S+(b^(I|~y))+x[5]+4237533241&4294967295,S=I+(R<<21&4294967295|R>>>11),R=y+(I^(S|~b))+x[12]+1700485571&4294967295,y=S+(R<<6&4294967295|R>>>26),R=b+(S^(y|~I))+x[3]+2399980690&4294967295,b=y+(R<<10&4294967295|R>>>22),R=I+(y^(b|~S))+x[10]+4293915773&4294967295,I=b+(R<<15&4294967295|R>>>17),R=S+(b^(I|~y))+x[1]+2240044497&4294967295,S=I+(R<<21&4294967295|R>>>11),R=y+(I^(S|~b))+x[8]+1873313359&4294967295,y=S+(R<<6&4294967295|R>>>26),R=b+(S^(y|~I))+x[15]+4264355552&4294967295,b=y+(R<<10&4294967295|R>>>22),R=I+(y^(b|~S))+x[6]+2734768916&4294967295,I=b+(R<<15&4294967295|R>>>17),R=S+(b^(I|~y))+x[13]+1309151649&4294967295,S=I+(R<<21&4294967295|R>>>11),R=y+(I^(S|~b))+x[4]+4149444226&4294967295,y=S+(R<<6&4294967295|R>>>26),R=b+(S^(y|~I))+x[11]+3174756917&4294967295,b=y+(R<<10&4294967295|R>>>22),R=I+(y^(b|~S))+x[2]+718787259&4294967295,I=b+(R<<15&4294967295|R>>>17),R=S+(b^(I|~y))+x[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(I+(R<<21&4294967295|R>>>11))&4294967295,E.g[2]=E.g[2]+I&4294967295,E.g[3]=E.g[3]+b&4294967295}r.prototype.v=function(E,y){y===void 0&&(y=E.length);const S=y-this.blockSize,x=this.C;let I=this.h,b=0;for(;b<y;){if(I==0)for(;b<=S;)i(this,E,b),b+=this.blockSize;if(typeof E=="string"){for(;b<y;)if(x[I++]=E.charCodeAt(b++),I==this.blockSize){i(this,x),I=0;break}}else for(;b<y;)if(x[I++]=E[b++],I==this.blockSize){i(this,x),I=0;break}}this.h=I,this.o+=y},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;y=this.o*8;for(var S=E.length-8;S<E.length;++S)E[S]=y&255,y/=256;for(this.v(E),E=Array(16),y=0,S=0;S<4;++S)for(let x=0;x<32;x+=8)E[y++]=this.g[S]>>>x&255;return E};function s(E,y){var S=a;return Object.prototype.hasOwnProperty.call(S,E)?S[E]:S[E]=y(E)}function o(E,y){this.h=y;const S=[];let x=!0;for(let I=E.length-1;I>=0;I--){const b=E[I]|0;x&&b==y||(S[I]=b,x=!1)}this.g=S}var a={};function u(E){return-128<=E&&E<128?s(E,function(y){return new o([y|0],y<0?-1:0)}):new o([E|0],E<0?-1:0)}function c(E){if(isNaN(E)||!isFinite(E))return f;if(E<0)return A(c(-E));const y=[];let S=1;for(let x=0;E>=S;x++)y[x]=E/S|0,S*=4294967296;return new o(y,0)}function h(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return A(h(E.substring(1),y));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=c(Math.pow(y,8));let x=f;for(let b=0;b<E.length;b+=8){var I=Math.min(8,E.length-b);const R=parseInt(E.substring(b,b+I),y);I<8?(I=c(Math.pow(y,I)),x=x.j(I).add(c(R))):(x=x.j(S),x=x.add(c(R)))}return x}var f=u(0),p=u(1),g=u(16777216);t=o.prototype,t.m=function(){if(P(this))return-A(this).m();let E=0,y=1;for(let S=0;S<this.g.length;S++){const x=this.i(S);E+=(x>=0?x:4294967296+x)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(w(this))return"0";if(P(this))return"-"+A(this).toString(E);const y=c(Math.pow(E,6));var S=this;let x="";for(;;){const I=k(S,y).g;S=T(S,I.j(y));let b=((S.g.length>0?S.g[0]:S.h)>>>0).toString(E);if(S=I,w(S))return b+x;for(;b.length<6;)b="0"+b;x=b+x}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function w(E){if(E.h!=0)return!1;for(let y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function P(E){return E.h==-1}t.l=function(E){return E=T(this,E),P(E)?-1:w(E)?0:1};function A(E){const y=E.g.length,S=[];for(let x=0;x<y;x++)S[x]=~E.g[x];return new o(S,~E.h).add(p)}t.abs=function(){return P(this)?A(this):this},t.add=function(E){const y=Math.max(this.g.length,E.g.length),S=[];let x=0;for(let I=0;I<=y;I++){let b=x+(this.i(I)&65535)+(E.i(I)&65535),R=(b>>>16)+(this.i(I)>>>16)+(E.i(I)>>>16);x=R>>>16,b&=65535,R&=65535,S[I]=R<<16|b}return new o(S,S[S.length-1]&-2147483648?-1:0)};function T(E,y){return E.add(A(y))}t.j=function(E){if(w(this)||w(E))return f;if(P(this))return P(E)?A(this).j(A(E)):A(A(this).j(E));if(P(E))return A(this.j(A(E)));if(this.l(g)<0&&E.l(g)<0)return c(this.m()*E.m());const y=this.g.length+E.g.length,S=[];for(var x=0;x<2*y;x++)S[x]=0;for(x=0;x<this.g.length;x++)for(let I=0;I<E.g.length;I++){const b=this.i(x)>>>16,R=this.i(x)&65535,K=E.i(I)>>>16,G=E.i(I)&65535;S[2*x+2*I]+=R*G,v(S,2*x+2*I),S[2*x+2*I+1]+=b*G,v(S,2*x+2*I+1),S[2*x+2*I+1]+=R*K,v(S,2*x+2*I+1),S[2*x+2*I+2]+=b*K,v(S,2*x+2*I+2)}for(E=0;E<y;E++)S[E]=S[2*E+1]<<16|S[2*E];for(E=y;E<2*y;E++)S[E]=0;return new o(S,0)};function v(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function C(E,y){this.g=E,this.h=y}function k(E,y){if(w(y))throw Error("division by zero");if(w(E))return new C(f,f);if(P(E))return y=k(A(E),y),new C(A(y.g),A(y.h));if(P(y))return y=k(E,A(y)),new C(A(y.g),y.h);if(E.g.length>30){if(P(E)||P(y))throw Error("slowDivide_ only works with positive integers.");for(var S=p,x=y;x.l(E)<=0;)S=D(S),x=D(x);var I=O(S,1),b=O(x,1);for(x=O(x,2),S=O(S,2);!w(x);){var R=b.add(x);R.l(E)<=0&&(I=I.add(S),b=R),x=O(x,1),S=O(S,1)}return y=T(E,I.j(y)),new C(I,y)}for(I=f;E.l(y)>=0;){for(S=Math.max(1,Math.floor(E.m()/y.m())),x=Math.ceil(Math.log(S)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),b=c(S),R=b.j(y);P(R)||R.l(E)>0;)S-=x,b=c(S),R=b.j(y);w(b)&&(b=p),I=I.add(b),E=T(E,R)}return new C(I,E)}t.B=function(E){return k(this,E).h},t.and=function(E){const y=Math.max(this.g.length,E.g.length),S=[];for(let x=0;x<y;x++)S[x]=this.i(x)&E.i(x);return new o(S,this.h&E.h)},t.or=function(E){const y=Math.max(this.g.length,E.g.length),S=[];for(let x=0;x<y;x++)S[x]=this.i(x)|E.i(x);return new o(S,this.h|E.h)},t.xor=function(E){const y=Math.max(this.g.length,E.g.length),S=[];for(let x=0;x<y;x++)S[x]=this.i(x)^E.i(x);return new o(S,this.h^E.h)};function D(E){const y=E.g.length+1,S=[];for(let x=0;x<y;x++)S[x]=E.i(x)<<1|E.i(x-1)>>>31;return new o(S,E.h)}function O(E,y){const S=y>>5;y%=32;const x=E.g.length-S,I=[];for(let b=0;b<x;b++)I[b]=y>0?E.i(b+S)>>>y|E.i(b+S+1)<<32-y:E.i(b+S);return new o(I,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,_S=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Er=o}).apply(typeof kv<"u"?kv:typeof self<"u"?self:typeof window<"u"?window:{});var dl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var TS,co,ES,zl,od,SS,CS,wS;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof dl=="object"&&dl];for(var d=0;d<l.length;++d){var m=l[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(l,d){if(d)e:{var m=r;l=l.split(".");for(var _=0;_<l.length-1;_++){var V=l[_];if(!(V in m))break e;m=m[V]}l=l[l.length-1],_=m[l],d=d(_),d!=_&&d!=null&&e(m,l,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(l){return l||function(d){var m=[],_;for(_ in d)Object.prototype.hasOwnProperty.call(d,_)&&m.push([_,d[_]]);return m}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function a(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function u(l,d,m){return l.call.apply(l.bind,arguments)}function c(l,d,m){return c=u,c.apply(null,arguments)}function h(l,d){var m=Array.prototype.slice.call(arguments,1);return function(){var _=m.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function f(l,d){function m(){}m.prototype=d.prototype,l.Z=d.prototype,l.prototype=new m,l.prototype.constructor=l,l.Ob=function(_,V,N){for(var $=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)$[oe-2]=arguments[oe];return d.prototype[V].apply(_,$)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function g(l){const d=l.length;if(d>0){const m=Array(d);for(let _=0;_<d;_++)m[_]=l[_];return m}return[]}function w(l,d){for(let _=1;_<arguments.length;_++){const V=arguments[_];var m=typeof V;if(m=m!="object"?m:V?Array.isArray(V)?"array":m:"null",m=="array"||m=="object"&&typeof V.length=="number"){m=l.length||0;const N=V.length||0;l.length=m+N;for(let $=0;$<N;$++)l[m+$]=V[$]}else l.push(V)}}class P{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function A(l){o.setTimeout(()=>{throw l},0)}function T(){var l=E;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class v{constructor(){this.h=this.g=null}add(d,m){const _=C.get();_.set(d,m),this.h?this.h.next=_:this.g=_,this.h=_}}var C=new P(()=>new k,l=>l.reset());class k{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let D,O=!1,E=new v,y=()=>{const l=Promise.resolve(void 0);D=()=>{l.then(S)}};function S(){for(var l;l=T();){try{l.h.call(l.g)}catch(m){A(m)}var d=C;d.j(l),d.h<100&&(d.h++,l.next=d.g,d.g=l)}O=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var b=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};o.addEventListener("test",m,d),o.removeEventListener("test",m,d)}catch{}return l}();function R(l){return/^[\s\xa0]*$/.test(l)}function K(l,d){I.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,d)}f(K,I),K.prototype.init=function(l,d){const m=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget,d||(m=="mouseover"?d=l.fromElement:m=="mouseout"&&(d=l.toElement)),this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&K.Z.h.call(this)},K.prototype.h=function(){K.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var G="closure_listenable_"+(Math.random()*1e6|0),X=0;function ne(l,d,m,_,V){this.listener=l,this.proxy=null,this.src=d,this.type=m,this.capture=!!_,this.ha=V,this.key=++X,this.da=this.fa=!1}function U(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function W(l,d,m){for(const _ in l)d.call(m,l[_],_,l)}function Z(l,d){for(const m in l)d.call(void 0,l[m],m,l)}function Q(l){const d={};for(const m in l)d[m]=l[m];return d}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function De(l,d){let m,_;for(let V=1;V<arguments.length;V++){_=arguments[V];for(m in _)l[m]=_[m];for(let N=0;N<re.length;N++)m=re[N],Object.prototype.hasOwnProperty.call(_,m)&&(l[m]=_[m])}}function We(l){this.src=l,this.g={},this.h=0}We.prototype.add=function(l,d,m,_,V){const N=l.toString();l=this.g[N],l||(l=this.g[N]=[],this.h++);const $=Jt(l,d,_,V);return $>-1?(d=l[$],m||(d.fa=!1)):(d=new ne(d,this.src,N,!!_,V),d.fa=m,l.push(d)),d};function Ct(l,d){const m=d.type;if(m in l.g){var _=l.g[m],V=Array.prototype.indexOf.call(_,d,void 0),N;(N=V>=0)&&Array.prototype.splice.call(_,V,1),N&&(U(d),l.g[m].length==0&&(delete l.g[m],l.h--))}}function Jt(l,d,m,_){for(let V=0;V<l.length;++V){const N=l[V];if(!N.da&&N.listener==d&&N.capture==!!m&&N.ha==_)return V}return-1}var Kn="closure_lm_"+(Math.random()*1e6|0),Vc={};function ig(l,d,m,_,V){if(Array.isArray(d)){for(let N=0;N<d.length;N++)ig(l,d[N],m,_,V);return null}return m=ag(m),l&&l[G]?l.J(d,m,a(_)?!!_.capture:!1,V):Nx(l,d,m,!1,_,V)}function Nx(l,d,m,_,V,N){if(!d)throw Error("Invalid event type");const $=a(V)?!!V.capture:!!V;let oe=Nc(l);if(oe||(l[Kn]=oe=new We(l)),m=oe.add(d,m,_,$,N),m.proxy)return m;if(_=Ox(),m.proxy=_,_.src=l,_.listener=m,l.addEventListener)b||(V=$),V===void 0&&(V=!1),l.addEventListener(d.toString(),_,V);else if(l.attachEvent)l.attachEvent(og(d.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Ox(){function l(m){return d.call(l.src,l.listener,m)}const d=Lx;return l}function sg(l,d,m,_,V){if(Array.isArray(d))for(var N=0;N<d.length;N++)sg(l,d[N],m,_,V);else _=a(_)?!!_.capture:!!_,m=ag(m),l&&l[G]?(l=l.i,N=String(d).toString(),N in l.g&&(d=l.g[N],m=Jt(d,m,_,V),m>-1&&(U(d[m]),Array.prototype.splice.call(d,m,1),d.length==0&&(delete l.g[N],l.h--)))):l&&(l=Nc(l))&&(d=l.g[d.toString()],l=-1,d&&(l=Jt(d,m,_,V)),(m=l>-1?d[l]:null)&&Mc(m))}function Mc(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[G])Ct(d.i,l);else{var m=l.type,_=l.proxy;d.removeEventListener?d.removeEventListener(m,_,l.capture):d.detachEvent?d.detachEvent(og(m),_):d.addListener&&d.removeListener&&d.removeListener(_),(m=Nc(d))?(Ct(m,l),m.h==0&&(m.src=null,d[Kn]=null)):U(l)}}}function og(l){return l in Vc?Vc[l]:Vc[l]="on"+l}function Lx(l,d){if(l.da)l=!0;else{d=new K(d,this);const m=l.listener,_=l.ha||l.src;l.fa&&Mc(l),l=m.call(_,d)}return l}function Nc(l){return l=l[Kn],l instanceof We?l:null}var Oc="__closure_events_fn_"+(Math.random()*1e9>>>0);function ag(l){return typeof l=="function"?l:(l[Oc]||(l[Oc]=function(d){return l.handleEvent(d)}),l[Oc])}function it(){x.call(this),this.i=new We(this),this.M=this,this.G=null}f(it,x),it.prototype[G]=!0,it.prototype.removeEventListener=function(l,d,m,_){sg(this,l,d,m,_)};function gt(l,d){var m,_=l.G;if(_)for(m=[];_;_=_.G)m.push(_);if(l=l.M,_=d.type||d,typeof d=="string")d=new I(d,l);else if(d instanceof I)d.target=d.target||l;else{var V=d;d=new I(_,l),De(d,V)}V=!0;let N,$;if(m)for($=m.length-1;$>=0;$--)N=d.g=m[$],V=Fa(N,_,!0,d)&&V;if(N=d.g=l,V=Fa(N,_,!0,d)&&V,V=Fa(N,_,!1,d)&&V,m)for($=0;$<m.length;$++)N=d.g=m[$],V=Fa(N,_,!1,d)&&V}it.prototype.N=function(){if(it.Z.N.call(this),this.i){var l=this.i;for(const d in l.g){const m=l.g[d];for(let _=0;_<m.length;_++)U(m[_]);delete l.g[d],l.h--}}this.G=null},it.prototype.J=function(l,d,m,_){return this.i.add(String(l),d,!1,m,_)},it.prototype.K=function(l,d,m,_){return this.i.add(String(l),d,!0,m,_)};function Fa(l,d,m,_){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();let V=!0;for(let N=0;N<d.length;++N){const $=d[N];if($&&!$.da&&$.capture==m){const oe=$.listener,Ue=$.ha||$.src;$.fa&&Ct(l.i,$),V=oe.call(Ue,_)!==!1&&V}}return V&&!_.defaultPrevented}function Fx(l,d){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=c(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:o.setTimeout(l,d||0)}function lg(l){l.g=Fx(()=>{l.g=null,l.i&&(l.i=!1,lg(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class jx extends x{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:lg(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bs(l){x.call(this),this.h=l,this.g={}}f(bs,x);var ug=[];function cg(l){W(l.g,function(d,m){this.g.hasOwnProperty(m)&&Mc(d)},l),l.g={}}bs.prototype.N=function(){bs.Z.N.call(this),cg(this)},bs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lc=o.JSON.stringify,Ux=o.JSON.parse,Bx=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function hg(){}function fg(){}var Ds={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Fc(){I.call(this,"d")}f(Fc,I);function jc(){I.call(this,"c")}f(jc,I);var Fr={},dg=null;function ja(){return dg=dg||new it}Fr.Ia="serverreachability";function pg(l){I.call(this,Fr.Ia,l)}f(pg,I);function Vs(l){const d=ja();gt(d,new pg(d))}Fr.STAT_EVENT="statevent";function mg(l,d){I.call(this,Fr.STAT_EVENT,l),this.stat=d}f(mg,I);function yt(l){const d=ja();gt(d,new mg(d,l))}Fr.Ja="timingevent";function gg(l,d){I.call(this,Fr.Ja,l),this.size=d}f(gg,I);function Ms(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},d)}function Ns(){this.g=!0}Ns.prototype.ua=function(){this.g=!1};function $x(l,d,m,_,V,N){l.info(function(){if(l.g)if(N){var $="",oe=N.split("&");for(let me=0;me<oe.length;me++){var Ue=oe[me].split("=");if(Ue.length>1){const Ke=Ue[0];Ue=Ue[1];const dn=Ke.split("_");$=dn.length>=2&&dn[1]=="type"?$+(Ke+"="+Ue+"&"):$+(Ke+"=redacted&")}}}else $=null;else $=N;return"XMLHTTP REQ ("+_+") [attempt "+V+"]: "+d+`
`+m+`
`+$})}function zx(l,d,m,_,V,N,$){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+V+"]: "+d+`
`+m+`
`+N+" "+$})}function wi(l,d,m,_){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+Wx(l,m)+(_?" "+_:"")})}function Hx(l,d){l.info(function(){return"TIMEOUT: "+d})}Ns.prototype.info=function(){};function Wx(l,d){if(!l.g)return d;if(!d)return null;try{const N=JSON.parse(d);if(N){for(l=0;l<N.length;l++)if(Array.isArray(N[l])){var m=N[l];if(!(m.length<2)){var _=m[1];if(Array.isArray(_)&&!(_.length<1)){var V=_[0];if(V!="noop"&&V!="stop"&&V!="close")for(let $=1;$<_.length;$++)_[$]=""}}}}return Lc(N)}catch{return d}}var Ua={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},yg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},vg;function Uc(){}f(Uc,hg),Uc.prototype.g=function(){return new XMLHttpRequest},vg=new Uc;function Os(l){return encodeURIComponent(String(l))}function Kx(l){var d=1;l=l.split(":");const m=[];for(;d>0&&l.length;)m.push(l.shift()),d--;return l.length&&m.push(l.join(":")),m}function Gn(l,d,m,_){this.j=l,this.i=d,this.l=m,this.S=_||1,this.V=new bs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new _g}function _g(){this.i=null,this.g="",this.h=!1}var Tg={},Bc={};function $c(l,d,m){l.M=1,l.A=$a(fn(d)),l.u=m,l.R=!0,Eg(l,null)}function Eg(l,d){l.F=Date.now(),Ba(l),l.B=fn(l.A);var m=l.B,_=l.S;Array.isArray(_)||(_=[String(_)]),Mg(m.i,"t",_),l.C=0,m=l.j.L,l.h=new _g,l.g=Jg(l.j,m?d:null,!l.u),l.P>0&&(l.O=new jx(c(l.Y,l,l.g),l.P)),d=l.V,m=l.g,_=l.ba;var V="readystatechange";Array.isArray(V)||(V&&(ug[0]=V.toString()),V=ug);for(let N=0;N<V.length;N++){const $=ig(m,V[N],_||d.handleEvent,!1,d.h||d);if(!$)break;d.g[$.key]=$}d=l.J?Q(l.J):{},l.u?(l.v||(l.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,d)):(l.v="GET",l.g.ea(l.B,l.v,null,d)),Vs(),$x(l.i,l.v,l.B,l.l,l.S,l.u)}Gn.prototype.ba=function(l){l=l.target;const d=this.O;d&&Yn(l)==3?d.j():this.Y(l)},Gn.prototype.Y=function(l){try{if(l==this.g)e:{const oe=Yn(this.g),Ue=this.g.ya(),me=this.g.ca();if(!(oe<3)&&(oe!=3||this.g&&(this.h.h||this.g.la()||Bg(this.g)))){this.K||oe!=4||Ue==7||(Ue==8||me<=0?Vs(3):Vs(2)),zc(this);var d=this.g.ca();this.X=d;var m=Gx(this);if(this.o=d==200,zx(this.i,this.v,this.B,this.l,this.S,oe,d),this.o){if(this.U&&!this.L){t:{if(this.g){var _,V=this.g;if((_=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(_)){var N=_;break t}}N=null}if(l=N)wi(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Hc(this,l);else{this.o=!1,this.m=3,yt(12),jr(this),Ls(this);break e}}if(this.R){l=!0;let Ke;for(;!this.K&&this.C<m.length;)if(Ke=qx(this,m),Ke==Bc){oe==4&&(this.m=4,yt(14),l=!1),wi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ke==Tg){this.m=4,yt(15),wi(this.i,this.l,m,"[Invalid Chunk]"),l=!1;break}else wi(this.i,this.l,Ke,null),Hc(this,Ke);if(Sg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),oe!=4||m.length!=0||this.h.h||(this.m=1,yt(16),l=!1),this.o=this.o&&l,!l)wi(this.i,this.l,m,"[Invalid Chunked Response]"),jr(this),Ls(this);else if(m.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),Jc($),$.P=!0,yt(11))}}else wi(this.i,this.l,m,null),Hc(this,m);oe==4&&jr(this),this.o&&!this.K&&(oe==4?qg(this.j,this):(this.o=!1,Ba(this)))}else lP(this.g),d==400&&m.indexOf("Unknown SID")>0?(this.m=3,yt(12)):(this.m=0,yt(13)),jr(this),Ls(this)}}}catch{}finally{}};function Gx(l){if(!Sg(l))return l.g.la();const d=Bg(l.g);if(d==="")return"";let m="";const _=d.length,V=Yn(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return jr(l),Ls(l),"";l.h.i=new o.TextDecoder}for(let N=0;N<_;N++)l.h.h=!0,m+=l.h.i.decode(d[N],{stream:!(V&&N==_-1)});return d.length=0,l.h.g+=m,l.C=0,l.h.g}function Sg(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function qx(l,d){var m=l.C,_=d.indexOf(`
`,m);return _==-1?Bc:(m=Number(d.substring(m,_)),isNaN(m)?Tg:(_+=1,_+m>d.length?Bc:(d=d.slice(_,_+m),l.C=_+m,d)))}Gn.prototype.cancel=function(){this.K=!0,jr(this)};function Ba(l){l.T=Date.now()+l.H,Cg(l,l.H)}function Cg(l,d){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Ms(c(l.aa,l),d)}function zc(l){l.D&&(o.clearTimeout(l.D),l.D=null)}Gn.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(Hx(this.i,this.B),this.M!=2&&(Vs(),yt(17)),jr(this),this.m=2,Ls(this)):Cg(this,this.T-l)};function Ls(l){l.j.I==0||l.K||qg(l.j,l)}function jr(l){zc(l);var d=l.O;d&&typeof d.dispose=="function"&&d.dispose(),l.O=null,cg(l.V),l.g&&(d=l.g,l.g=null,d.abort(),d.dispose())}function Hc(l,d){try{var m=l.j;if(m.I!=0&&(m.g==l||Wc(m.h,l))){if(!l.L&&Wc(m.h,l)&&m.I==3){try{var _=m.Ba.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var V=_;if(V[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<l.F)Ga(m),Wa(m);else break e;Xc(m),yt(18)}}else m.xa=V[1],0<m.xa-m.K&&V[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=Ms(c(m.Va,m),6e3));Pg(m.h)<=1&&m.ta&&(m.ta=void 0)}else Br(m,11)}else if((l.L||m.g==l)&&Ga(m),!R(d))for(V=m.Ba.g.parse(d),d=0;d<V.length;d++){let me=V[d];const Ke=me[0];if(!(Ke<=m.K))if(m.K=Ke,me=me[1],m.I==2)if(me[0]=="c"){m.M=me[1],m.ba=me[2];const dn=me[3];dn!=null&&(m.ka=dn,m.j.info("VER="+m.ka));const $r=me[4];$r!=null&&(m.za=$r,m.j.info("SVER="+m.za));const Xn=me[5];Xn!=null&&typeof Xn=="number"&&Xn>0&&(_=1.5*Xn,m.O=_,m.j.info("backChannelRequestTimeoutMs_="+_)),_=m;const Jn=l.g;if(Jn){const Qa=Jn.g?Jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qa){var N=_.h;N.g||Qa.indexOf("spdy")==-1&&Qa.indexOf("quic")==-1&&Qa.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(Kc(N,N.h),N.h=null))}if(_.G){const Zc=Jn.g?Jn.g.getResponseHeader("X-HTTP-Session-Id"):null;Zc&&(_.wa=Zc,ve(_.J,_.G,Zc))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-l.F,m.j.info("Handshake RTT: "+m.T+"ms")),_=m;var $=l;if(_.na=Xg(_,_.L?_.ba:null,_.W),$.L){Rg(_.h,$);var oe=$,Ue=_.O;Ue&&(oe.H=Ue),oe.D&&(zc(oe),Ba(oe)),_.g=$}else Kg(_);m.i.length>0&&Ka(m)}else me[0]!="stop"&&me[0]!="close"||Br(m,7);else m.I==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?Br(m,7):Yc(m):me[0]!="noop"&&m.l&&m.l.qa(me),m.A=0)}}Vs(4)}catch{}}var Qx=class{constructor(l,d){this.g=l,this.map=d}};function wg(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function xg(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Pg(l){return l.h?1:l.g?l.g.size:0}function Wc(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function Kc(l,d){l.g?l.g.add(d):l.h=d}function Rg(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}wg.prototype.cancel=function(){if(this.i=Ig(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Ig(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const m of l.g.values())d=d.concat(m.G);return d}return g(l.i)}var Ag=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yx(l,d){if(l){l=l.split("&");for(let m=0;m<l.length;m++){const _=l[m].indexOf("=");let V,N=null;_>=0?(V=l[m].substring(0,_),N=l[m].substring(_+1)):V=l[m],d(V,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function qn(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;l instanceof qn?(this.l=l.l,Fs(this,l.j),this.o=l.o,this.g=l.g,js(this,l.u),this.h=l.h,Gc(this,Ng(l.i)),this.m=l.m):l&&(d=String(l).match(Ag))?(this.l=!1,Fs(this,d[1]||"",!0),this.o=Us(d[2]||""),this.g=Us(d[3]||"",!0),js(this,d[4]),this.h=Us(d[5]||"",!0),Gc(this,d[6]||"",!0),this.m=Us(d[7]||"")):(this.l=!1,this.i=new $s(null,this.l))}qn.prototype.toString=function(){const l=[];var d=this.j;d&&l.push(Bs(d,kg,!0),":");var m=this.g;return(m||d=="file")&&(l.push("//"),(d=this.o)&&l.push(Bs(d,kg,!0),"@"),l.push(Os(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&l.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(Bs(m,m.charAt(0)=="/"?Zx:Jx,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",Bs(m,tP)),l.join("")},qn.prototype.resolve=function(l){const d=fn(this);let m=!!l.j;m?Fs(d,l.j):m=!!l.o,m?d.o=l.o:m=!!l.g,m?d.g=l.g:m=l.u!=null;var _=l.h;if(m)js(d,l.u);else if(m=!!l.h){if(_.charAt(0)!="/")if(this.g&&!this.h)_="/"+_;else{var V=d.h.lastIndexOf("/");V!=-1&&(_=d.h.slice(0,V+1)+_)}if(V=_,V==".."||V==".")_="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){_=V.lastIndexOf("/",0)==0,V=V.split("/");const N=[];for(let $=0;$<V.length;){const oe=V[$++];oe=="."?_&&$==V.length&&N.push(""):oe==".."?((N.length>1||N.length==1&&N[0]!="")&&N.pop(),_&&$==V.length&&N.push("")):(N.push(oe),_=!0)}_=N.join("/")}else _=V}return m?d.h=_:m=l.i.toString()!=="",m?Gc(d,Ng(l.i)):m=!!l.m,m&&(d.m=l.m),d};function fn(l){return new qn(l)}function Fs(l,d,m){l.j=m?Us(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function js(l,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);l.u=d}else l.u=null}function Gc(l,d,m){d instanceof $s?(l.i=d,nP(l.i,l.l)):(m||(d=Bs(d,eP)),l.i=new $s(d,l.l))}function ve(l,d,m){l.i.set(d,m)}function $a(l){return ve(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Us(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Bs(l,d,m){return typeof l=="string"?(l=encodeURI(l).replace(d,Xx),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Xx(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var kg=/[#\/\?@]/g,Jx=/[#\?:]/g,Zx=/[#\?]/g,eP=/[#\?@]/g,tP=/#/g;function $s(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function Ur(l){l.g||(l.g=new Map,l.h=0,l.i&&Yx(l.i,function(d,m){l.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=$s.prototype,t.add=function(l,d){Ur(this),this.i=null,l=xi(this,l);let m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(d),this.h+=1,this};function bg(l,d){Ur(l),d=xi(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function Dg(l,d){return Ur(l),d=xi(l,d),l.g.has(d)}t.forEach=function(l,d){Ur(this),this.g.forEach(function(m,_){m.forEach(function(V){l.call(d,V,_,this)},this)},this)};function Vg(l,d){Ur(l);let m=[];if(typeof d=="string")Dg(l,d)&&(m=m.concat(l.g.get(xi(l,d))));else for(l=Array.from(l.g.values()),d=0;d<l.length;d++)m=m.concat(l[d]);return m}t.set=function(l,d){return Ur(this),this.i=null,l=xi(this,l),Dg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},t.get=function(l,d){return l?(l=Vg(this,l),l.length>0?String(l[0]):d):d};function Mg(l,d,m){bg(l,d),m.length>0&&(l.i=null,l.g.set(xi(l,d),g(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(let _=0;_<d.length;_++){var m=d[_];const V=Os(m);m=Vg(this,m);for(let N=0;N<m.length;N++){let $=V;m[N]!==""&&($+="="+Os(m[N])),l.push($)}}return this.i=l.join("&")};function Ng(l){const d=new $s;return d.i=l.i,l.g&&(d.g=new Map(l.g),d.h=l.h),d}function xi(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function nP(l,d){d&&!l.j&&(Ur(l),l.i=null,l.g.forEach(function(m,_){const V=_.toLowerCase();_!=V&&(bg(this,_),Mg(this,V,m))},l)),l.j=d}function rP(l,d){const m=new Ns;if(o.Image){const _=new Image;_.onload=h(Qn,m,"TestLoadImage: loaded",!0,d,_),_.onerror=h(Qn,m,"TestLoadImage: error",!1,d,_),_.onabort=h(Qn,m,"TestLoadImage: abort",!1,d,_),_.ontimeout=h(Qn,m,"TestLoadImage: timeout",!1,d,_),o.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else d(!1)}function iP(l,d){const m=new Ns,_=new AbortController,V=setTimeout(()=>{_.abort(),Qn(m,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:_.signal}).then(N=>{clearTimeout(V),N.ok?Qn(m,"TestPingServer: ok",!0,d):Qn(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(V),Qn(m,"TestPingServer: error",!1,d)})}function Qn(l,d,m,_,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),_(m)}catch{}}function sP(){this.g=new Bx}function qc(l){this.i=l.Sb||null,this.h=l.ab||!1}f(qc,hg),qc.prototype.g=function(){return new za(this.i,this.h)};function za(l,d){it.call(this),this.H=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(za,it),t=za.prototype,t.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=d,this.readyState=1,Hs(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(d.body=l),(this.H||o).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,zs(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Hs(this)),this.g&&(this.readyState=3,Hs(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Og(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function Og(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?zs(this):Hs(this),this.readyState==3&&Og(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,zs(this))},t.Na=function(l){this.g&&(this.response=l,zs(this))},t.ga=function(){this.g&&zs(this)};function zs(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Hs(l)}t.setRequestHeader=function(l,d){this.A.append(l,d)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=d.next();return l.join(`\r
`)};function Hs(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(za.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Lg(l){let d="";return W(l,function(m,_){d+=_,d+=":",d+=m,d+=`\r
`}),d}function Qc(l,d,m){e:{for(_ in m){var _=!1;break e}_=!0}_||(m=Lg(m),typeof l=="string"?m!=null&&Os(m):ve(l,d,m))}function Ae(l){it.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Ae,it);var oP=/^https?$/i,aP=["POST","PUT"];t=Ae.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,d,m,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():vg.g(),this.g.onreadystatechange=p(c(this.Ca,this));try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(N){Fg(this,N);return}if(l=m||"",m=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var V in _)m.set(V,_[V]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const N of _.keys())m.set(N,_.get(N));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(m.keys()).find(N=>N.toLowerCase()=="content-type"),V=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(aP,d,void 0)>=0)||_||V||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,$]of m)this.g.setRequestHeader(N,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(N){Fg(this,N)}};function Fg(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.o=5,jg(l),Ha(l)}function jg(l){l.A||(l.A=!0,gt(l,"complete"),gt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,gt(this,"complete"),gt(this,"abort"),Ha(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ha(this,!0)),Ae.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ug(this):this.Xa())},t.Xa=function(){Ug(this)};function Ug(l){if(l.h&&typeof s<"u"){if(l.v&&Yn(l)==4)setTimeout(l.Ca.bind(l),0);else if(gt(l,"readystatechange"),Yn(l)==4){l.h=!1;try{const N=l.ca();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var _;if(_=N===0){let $=String(l.D).match(Ag)[1]||null;!$&&o.self&&o.self.location&&($=o.self.location.protocol.slice(0,-1)),_=!oP.test($?$.toLowerCase():"")}m=_}if(m)gt(l,"complete"),gt(l,"success");else{l.o=6;try{var V=Yn(l)>2?l.g.statusText:""}catch{V=""}l.l=V+" ["+l.ca()+"]",jg(l)}}finally{Ha(l)}}}}function Ha(l,d){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const m=l.g;l.g=null,d||gt(l,"ready");try{m.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Yn(l){return l.g?l.g.readyState:0}t.ca=function(){try{return Yn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),Ux(d)}};function Bg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function lP(l){const d={};l=(l.g&&Yn(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(R(l[_]))continue;var m=Kx(l[_]);const V=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const N=d[V]||[];d[V]=N,N.push(m)}Z(d,function(_){return _.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ws(l,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||d}function $g(l){this.za=0,this.i=[],this.j=new Ns,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ws("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ws("baseRetryDelayMs",5e3,l),this.Za=Ws("retryDelaySeedMs",1e4,l),this.Ta=Ws("forwardChannelMaxRetries",2,l),this.va=Ws("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new wg(l&&l.concurrentRequestLimit),this.Ba=new sP,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=$g.prototype,t.ka=8,t.I=1,t.connect=function(l,d,m,_){yt(0),this.W=l,this.H=d||{},m&&_!==void 0&&(this.H.OSID=m,this.H.OAID=_),this.F=this.X,this.J=Xg(this,null,this.W),Ka(this)};function Yc(l){if(zg(l),l.I==3){var d=l.V++,m=fn(l.J);if(ve(m,"SID",l.M),ve(m,"RID",d),ve(m,"TYPE","terminate"),Ks(l,m),d=new Gn(l,l.j,d),d.M=2,d.A=$a(fn(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(d.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=d.A,m=!0),m||(d.g=Jg(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Ba(d)}Yg(l)}function Wa(l){l.g&&(Jc(l),l.g.cancel(),l.g=null)}function zg(l){Wa(l),l.v&&(o.clearTimeout(l.v),l.v=null),Ga(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function Ka(l){if(!xg(l.h)&&!l.m){l.m=!0;var d=l.Ea;D||y(),O||(D(),O=!0),E.add(d,l),l.D=0}}function uP(l,d){return Pg(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=d.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Ms(c(l.Ea,l,d),Qg(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const V=new Gn(this,this.j,l);let N=this.o;if(this.U&&(N?(N=Q(N),De(N,this.U)):N=this.U),this.u!==null||this.R||(V.J=N,N=null),this.S)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var _=this.i[m];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,d>4096){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=Wg(this,V,d),m=fn(this.J),ve(m,"RID",l),ve(m,"CVER",22),this.G&&ve(m,"X-HTTP-Session-Id",this.G),Ks(this,m),N&&(this.R?d="headers="+Os(Lg(N))+"&"+d:this.u&&Qc(m,this.u,N)),Kc(this.h,V),this.Ra&&ve(m,"TYPE","init"),this.S?(ve(m,"$req",d),ve(m,"SID","null"),V.U=!0,$c(V,m,null)):$c(V,m,d),this.I=2}}else this.I==3&&(l?Hg(this,l):this.i.length==0||xg(this.h)||Hg(this))};function Hg(l,d){var m;d?m=d.l:m=l.V++;const _=fn(l.J);ve(_,"SID",l.M),ve(_,"RID",m),ve(_,"AID",l.K),Ks(l,_),l.u&&l.o&&Qc(_,l.u,l.o),m=new Gn(l,l.j,m,l.D+1),l.u===null&&(m.J=l.o),d&&(l.i=d.G.concat(l.i)),d=Wg(l,m,1e3),m.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),Kc(l.h,m),$c(m,_,d)}function Ks(l,d){l.H&&W(l.H,function(m,_){ve(d,_,m)}),l.l&&W({},function(m,_){ve(d,_,m)})}function Wg(l,d,m){m=Math.min(l.i.length,m);const _=l.l?c(l.l.Ka,l.l,l):null;e:{var V=l.i;let oe=-1;for(;;){const Ue=["count="+m];oe==-1?m>0?(oe=V[0].g,Ue.push("ofs="+oe)):oe=0:Ue.push("ofs="+oe);let me=!0;for(let Ke=0;Ke<m;Ke++){var N=V[Ke].g;const dn=V[Ke].map;if(N-=oe,N<0)oe=Math.max(0,V[Ke].g-100),me=!1;else try{N="req"+N+"_"||"";try{var $=dn instanceof Map?dn:Object.entries(dn);for(const[$r,Xn]of $){let Jn=Xn;a(Xn)&&(Jn=Lc(Xn)),Ue.push(N+$r+"="+encodeURIComponent(Jn))}}catch($r){throw Ue.push(N+"type="+encodeURIComponent("_badmap")),$r}}catch{_&&_(dn)}}if(me){$=Ue.join("&");break e}}$=void 0}return l=l.i.splice(0,m),d.G=l,$}function Kg(l){if(!l.g&&!l.v){l.Y=1;var d=l.Da;D||y(),O||(D(),O=!0),E.add(d,l),l.A=0}}function Xc(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Ms(c(l.Da,l),Qg(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,Gg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Ms(c(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,yt(10),Wa(this),Gg(this))};function Jc(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function Gg(l){l.g=new Gn(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var d=fn(l.na);ve(d,"RID","rpc"),ve(d,"SID",l.M),ve(d,"AID",l.K),ve(d,"CI",l.F?"0":"1"),!l.F&&l.ia&&ve(d,"TO",l.ia),ve(d,"TYPE","xmlhttp"),Ks(l,d),l.u&&l.o&&Qc(d,l.u,l.o),l.O&&(l.g.H=l.O);var m=l.g;l=l.ba,m.M=1,m.A=$a(fn(d)),m.u=null,m.R=!0,Eg(m,l)}t.Va=function(){this.C!=null&&(this.C=null,Wa(this),Xc(this),yt(19))};function Ga(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function qg(l,d){var m=null;if(l.g==d){Ga(l),Jc(l),l.g=null;var _=2}else if(Wc(l.h,d))m=d.G,Rg(l.h,d),_=1;else return;if(l.I!=0){if(d.o)if(_==1){m=d.u?d.u.length:0,d=Date.now()-d.F;var V=l.D;_=ja(),gt(_,new gg(_,m)),Ka(l)}else Kg(l);else if(V=d.m,V==3||V==0&&d.X>0||!(_==1&&uP(l,d)||_==2&&Xc(l)))switch(m&&m.length>0&&(d=l.h,d.i=d.i.concat(m)),V){case 1:Br(l,5);break;case 4:Br(l,10);break;case 3:Br(l,6);break;default:Br(l,2)}}}function Qg(l,d){let m=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(m*=2),m*d}function Br(l,d){if(l.j.info("Error code "+d),d==2){var m=c(l.bb,l),_=l.Ua;const V=!_;_=new qn(_||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Fs(_,"https"),$a(_),V?rP(_.toString(),m):iP(_.toString(),m)}else yt(2);l.I=0,l.l&&l.l.pa(d),Yg(l),zg(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Yg(l){if(l.I=0,l.ja=[],l.l){const d=Ig(l.h);(d.length!=0||l.i.length!=0)&&(w(l.ja,d),w(l.ja,l.i),l.h.i.length=0,g(l.i),l.i.length=0),l.l.oa()}}function Xg(l,d,m){var _=m instanceof qn?fn(m):new qn(m);if(_.g!="")d&&(_.g=d+"."+_.g),js(_,_.u);else{var V=o.location;_=V.protocol,d=d?d+"."+V.hostname:V.hostname,V=+V.port;const N=new qn(null);_&&Fs(N,_),d&&(N.g=d),V&&js(N,V),m&&(N.h=m),_=N}return m=l.G,d=l.wa,m&&d&&ve(_,m,d),ve(_,"VER",l.ka),Ks(l,_),_}function Jg(l,d,m){if(d&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Aa&&!l.ma?new Ae(new qc({ab:m})):new Ae(l.ma),d.Fa(l.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zg(){}t=Zg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function qa(){}qa.prototype.g=function(l,d){return new bt(l,d)};function bt(l,d){it.call(this),this.g=new $g(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(l?l["X-WebChannel-Client-Profile"]=d.sa:l={"X-WebChannel-Client-Profile":d.sa}),this.g.U=l,(l=d&&d.Qb)&&!R(l)&&(this.g.u=l),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!R(d)&&(this.g.G=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new Pi(this)}f(bt,it),bt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},bt.prototype.close=function(){Yc(this.g)},bt.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.v&&(m={},m.__data__=Lc(l),l=m);d.i.push(new Qx(d.Ya++,l)),d.I==3&&Ka(d)},bt.prototype.N=function(){this.g.l=null,delete this.j,Yc(this.g),delete this.g,bt.Z.N.call(this)};function ey(l){Fc.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const m in d){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}f(ey,Fc);function ty(){jc.call(this),this.status=1}f(ty,jc);function Pi(l){this.g=l}f(Pi,Zg),Pi.prototype.ra=function(){gt(this.g,"a")},Pi.prototype.qa=function(l){gt(this.g,new ey(l))},Pi.prototype.pa=function(l){gt(this.g,new ty)},Pi.prototype.oa=function(){gt(this.g,"b")},qa.prototype.createWebChannel=qa.prototype.g,bt.prototype.send=bt.prototype.o,bt.prototype.open=bt.prototype.m,bt.prototype.close=bt.prototype.close,wS=function(){return new qa},CS=function(){return ja()},SS=Fr,od={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ua.NO_ERROR=0,Ua.TIMEOUT=8,Ua.HTTP_ERROR=6,zl=Ua,yg.COMPLETE="complete",ES=yg,fg.EventType=Ds,Ds.OPEN="a",Ds.CLOSE="b",Ds.ERROR="c",Ds.MESSAGE="d",it.prototype.listen=it.prototype.J,co=fg,Ae.prototype.listenOnce=Ae.prototype.K,Ae.prototype.getLastError=Ae.prototype.Ha,Ae.prototype.getLastErrorCode=Ae.prototype.ya,Ae.prototype.getStatus=Ae.prototype.ca,Ae.prototype.getResponseJson=Ae.prototype.La,Ae.prototype.getResponseText=Ae.prototype.la,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Fa,TS=Ae}).apply(typeof dl<"u"?dl:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ut.UNAUTHENTICATED=new ut(null),ut.GOOGLE_CREDENTIALS=new ut("google-credentials-uid"),ut.FIRST_PARTY=new ut("first-party-uid"),ut.MOCK_USER=new ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xs="12.8.0";function jk(t){xs=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=new uS("@firebase/firestore");function Ii(){return hi.logLevel}function z(t,...e){if(hi.logLevel<=he.DEBUG){const n=e.map(Kp);hi.debug(`Firestore (${xs}): ${t}`,...n)}}function $n(t,...e){if(hi.logLevel<=he.ERROR){const n=e.map(Kp);hi.error(`Firestore (${xs}): ${t}`,...n)}}function ds(t,...e){if(hi.logLevel<=he.WARN){const n=e.map(Kp);hi.warn(`Firestore (${xs}): ${t}`,...n)}}function Kp(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,xS(t,r,n)}function xS(t,e,n){let r=`FIRESTORE (${xs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw $n(r),new Error(r)}function de(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||xS(e,i,r)}function se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends vi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Uk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ut.UNAUTHENTICATED))}shutdown(){}}class Bk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $k{constructor(e){this.t=e,this.currentUser=ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Sr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Sr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Sr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string",31837,{l:r}),new PS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string",2055,{h:e}),new ut(e)}}class zk{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ut.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Hk{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new zk(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Wk{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dS(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){de(this.o===void 0,3512);const r=s=>{s.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new bv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new bv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Kk(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function le(t,e){return t<e?-1:t>e?1:0}function ad(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Dh(i)===Dh(s)?le(i,s):Dh(i)?1:-1}return le(t.length,e.length)}const Gk=55296,qk=57343;function Dh(t){const e=t.charCodeAt(0);return e>=Gk&&e<=qk}function ps(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="__name__";class gn{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return gn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=gn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return le(e.length,n.length)}static compareSegments(e,n){const r=gn.isNumericId(e),i=gn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?gn.extractNumericId(e).compare(gn.extractNumericId(n)):ad(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Er.fromString(e.substring(4,e.length-2))}}class we extends gn{construct(e,n,r){return new we(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new we(n)}static emptyPath(){return new we([])}}const Qk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class et extends gn{construct(e,n,r){return new et(e,n,r)}static isValidIdentifier(e){return Qk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Dv}static keyField(){return new et([Dv])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Y(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Y(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Y(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Y(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new et(n)}static emptyPath(){return new et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(we.fromString(e))}static fromName(e){return new J(we.fromString(e).popFirst(5))}static empty(){return new J(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return we.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new we(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(t,e,n){if(!n)throw new Y(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Xk(t,e,n,r){if(e===!0&&r===!0)throw new Y(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Vv(t){if(!J.isDocumentKey(t))throw new Y(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function RS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function qp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function la(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qp(t);throw new Y(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ia(t,e){if(!RS(t))throw new Y(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Y(j.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv=-62135596800,Nv=1e6;class ge{static now(){return ge.fromMillis(Date.now())}static fromDate(e){return ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Nv);return new ge(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Mv)throw new Y(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Nv}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ge._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ia(e,ge._jsonSchema))return new ge(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Mv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ge._jsonSchemaVersion="firestore/timestamp/1.0",ge._jsonSchema={type:je("string",ge._jsonSchemaVersion),seconds:je("number"),nanoseconds:je("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{static fromTimestamp(e){return new ie(e)}static min(){return new ie(new ge(0,0))}static max(){return new ie(new ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=-1;function Jk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new ge(n+1,0):new ge(n,r));return new Pr(i,J.empty(),e)}function Zk(t){return new Pr(t.readTime,t.key,ua)}class Pr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Pr(ie.min(),J.empty(),ua)}static max(){return new Pr(ie.max(),J.empty(),ua)}}function e2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class n2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ps(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==t2)throw t;z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(i=>i?F.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new F((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new F((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function r2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Rs(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}pc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp=-1;function mc(t){return t==null}function Iu(t){return t===0&&1/t==-1/0}function i2(t){return typeof t=="number"&&Number.isInteger(t)&&!Iu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="";function s2(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ov(e)),e=o2(t.get(n),e);return Ov(e)}function o2(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case IS:n+="";break;default:n+=s}}return n}function Ov(t){return t+IS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _i(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function AS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e,n){this.comparator=e,this.root=n||Ze.EMPTY}insert(e,n){return new Ie(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ze.BLACK,null,null))}remove(e){return new Ie(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ze.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pl(this.root,e,this.comparator,!1)}getReverseIterator(){return new pl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pl(this.root,e,this.comparator,!0)}}class pl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ze{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ze.RED,this.left=i??Ze.EMPTY,this.right=s??Ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ze(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ze.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ze.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}Ze.EMPTY=null,Ze.RED=!0,Ze.BLACK=!1;Ze.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ze(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.comparator=e,this.data=new Ie(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Fv(this.data.getIterator())}getIteratorFrom(e){return new Fv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof He)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new He(this.comparator);return n.data=e,n}}class Fv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.fields=e,e.sort(et.comparator)}static empty(){return new on([])}unionWith(e){let n=new He(et.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new on(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ps(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new kS("Invalid base64 string: "+s):s}}(e);return new rt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rt.EMPTY_BYTE_STRING=new rt("");const a2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rr(t){if(de(!!t,39018),typeof t=="string"){let e=0;const n=a2.exec(t);if(de(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(t.seconds),nanos:Me(t.nanos)}}function Me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ir(t){return typeof t=="string"?rt.fromBase64String(t):rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS="server_timestamp",DS="__type__",VS="__previous_value__",MS="__local_write_time__";function Yp(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[DS])==null?void 0:r.stringValue)===bS}function gc(t){const e=t.mapValue.fields[VS];return Yp(e)?gc(e):e}function ca(t){const e=Rr(t.mapValue.fields[MS].timestampValue);return new ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,n,r,i,s,o,a,u,c,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=h,this.apiKey=f}}const Au="(default)";class ha{constructor(e,n){this.projectId=e,this.database=n||Au}static empty(){return new ha("","")}get isDefaultDatabase(){return this.database===Au}isEqual(e){return e instanceof ha&&e.projectId===this.projectId&&e.database===this.database}}function u2(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Y(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ha(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="__type__",c2="__max__",ml={mapValue:{}},OS="__vector__",ku="value";function Ar(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yp(t)?4:f2(t)?9007199254740991:h2(t)?10:11:te(28295,{value:t})}function xn(t,e){if(t===e)return!0;const n=Ar(t);if(n!==Ar(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ca(t).isEqual(ca(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Rr(i.timestampValue),a=Rr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ir(i.bytesValue).isEqual(Ir(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Me(i.geoPointValue.latitude)===Me(s.geoPointValue.latitude)&&Me(i.geoPointValue.longitude)===Me(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Me(i.integerValue)===Me(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Me(i.doubleValue),a=Me(s.doubleValue);return o===a?Iu(o)===Iu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ps(t.arrayValue.values||[],e.arrayValue.values||[],xn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Lv(o)!==Lv(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!xn(o[u],a[u])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function fa(t,e){return(t.values||[]).find(n=>xn(n,e))!==void 0}function ms(t,e){if(t===e)return 0;const n=Ar(t),r=Ar(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Me(s.integerValue||s.doubleValue),u=Me(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return jv(t.timestampValue,e.timestampValue);case 4:return jv(ca(t),ca(e));case 5:return ad(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ir(s),u=Ir(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const h=le(a[c],u[c]);if(h!==0)return h}return le(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=le(Me(s.latitude),Me(o.latitude));return a!==0?a:le(Me(s.longitude),Me(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Uv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var p,g,w,P;const a=s.fields||{},u=o.fields||{},c=(p=a[ku])==null?void 0:p.arrayValue,h=(g=u[ku])==null?void 0:g.arrayValue,f=le(((w=c==null?void 0:c.values)==null?void 0:w.length)||0,((P=h==null?void 0:h.values)==null?void 0:P.length)||0);return f!==0?f:Uv(c,h)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===ml.mapValue&&o===ml.mapValue)return 0;if(s===ml.mapValue)return 1;if(o===ml.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const p=ad(u[f],h[f]);if(p!==0)return p;const g=ms(a[u[f]],c[h[f]]);if(g!==0)return g}return le(u.length,h.length)}(t.mapValue,e.mapValue);default:throw te(23264,{he:n})}}function jv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=Rr(t),r=Rr(e),i=le(n.seconds,r.seconds);return i!==0?i:le(n.nanos,r.nanos)}function Uv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ms(n[i],r[i]);if(s)return s}return le(n.length,r.length)}function gs(t){return ld(t)}function ld(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Rr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ir(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=ld(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${ld(n.fields[o])}`;return i+"}"}(t.mapValue):te(61005,{value:t})}function Hl(t){switch(Ar(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gc(t);return e?16+Hl(e):16;case 5:return 2*t.stringValue.length;case 6:return Ir(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Hl(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return _i(r.fields,(s,o)=>{i+=s.length+Hl(o)}),i}(t.mapValue);default:throw te(13486,{value:t})}}function ud(t){return!!t&&"integerValue"in t}function Xp(t){return!!t&&"arrayValue"in t}function Bv(t){return!!t&&"nullValue"in t}function $v(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wl(t){return!!t&&"mapValue"in t}function h2(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[NS])==null?void 0:r.stringValue)===OS}function Ao(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return _i(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ao(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ao(t.arrayValue.values[n]);return e}return{...t}}function f2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===c2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.value=e}static empty(){return new Kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Wl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ao(n)}setAll(e){let n=et.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ao(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Wl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Wl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){_i(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Kt(Ao(this.value))}}function LS(t){const e=[];return _i(t.fields,(n,r)=>{const i=new et([n]);if(Wl(r)){const s=LS(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new on(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ft(e,0,ie.min(),ie.min(),ie.min(),Kt.empty(),0)}static newFoundDocument(e,n,r,i){return new ft(e,1,n,ie.min(),r,i,0)}static newNoDocument(e,n){return new ft(e,2,n,ie.min(),ie.min(),Kt.empty(),0)}static newUnknownDocument(e,n){return new ft(e,3,n,ie.min(),ie.min(),Kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n){this.position=e,this.inclusive=n}}function zv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=ms(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Hv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n="asc"){this.field=e,this.dir=n}}function d2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{}class $e extends FS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new m2(e,n,r):n==="array-contains"?new v2(e,r):n==="in"?new _2(e,r):n==="not-in"?new T2(e,r):n==="array-contains-any"?new E2(e,r):new $e(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new g2(e,r):new y2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ms(n,this.value)):n!==null&&Ar(this.value)===Ar(n)&&this.matchesComparison(ms(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pn extends FS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Pn(e,n)}matches(e){return jS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function jS(t){return t.op==="and"}function US(t){return p2(t)&&jS(t)}function p2(t){for(const e of t.filters)if(e instanceof Pn)return!1;return!0}function cd(t){if(t instanceof $e)return t.field.canonicalString()+t.op.toString()+gs(t.value);if(US(t))return t.filters.map(e=>cd(e)).join(",");{const e=t.filters.map(n=>cd(n)).join(",");return`${t.op}(${e})`}}function BS(t,e){return t instanceof $e?function(r,i){return i instanceof $e&&r.op===i.op&&r.field.isEqual(i.field)&&xn(r.value,i.value)}(t,e):t instanceof Pn?function(r,i){return i instanceof Pn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&BS(o,i.filters[a]),!0):!1}(t,e):void te(19439)}function $S(t){return t instanceof $e?function(n){return`${n.field.canonicalString()} ${n.op} ${gs(n.value)}`}(t):t instanceof Pn?function(n){return n.op.toString()+" {"+n.getFilters().map($S).join(" ,")+"}"}(t):"Filter"}class m2 extends $e{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class g2 extends $e{constructor(e,n){super(e,"in",n),this.keys=zS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class y2 extends $e{constructor(e,n){super(e,"not-in",n),this.keys=zS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function zS(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class v2 extends $e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xp(n)&&fa(n.arrayValue,this.value)}}class _2 extends $e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&fa(this.value.arrayValue,n)}}class T2 extends $e{constructor(e,n){super(e,"not-in",n)}matches(e){if(fa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!fa(this.value.arrayValue,n)}}class E2 extends $e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>fa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function Wv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new S2(t,e,n,r,i,s,o)}function Jp(t){const e=se(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>cd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),mc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>gs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>gs(r)).join(",")),e.Te=n}return e.Te}function Zp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!d2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!BS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Hv(t.startAt,e.startAt)&&Hv(t.endAt,e.endAt)}function hd(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function C2(t,e,n,r,i,s,o,a){return new yc(t,e,n,r,i,s,o,a)}function em(t){return new yc(t)}function Kv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function w2(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function x2(t){return t.collectionGroup!==null}function ko(t){const e=se(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new He(et.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Du(s,r))}),n.has(et.keyField().canonicalString())||e.Ie.push(new Du(et.keyField(),r))}return e.Ie}function Tn(t){const e=se(t);return e.Ee||(e.Ee=P2(e,ko(t))),e.Ee}function P2(t,e){if(t.limitType==="F")return Wv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Du(i.field,s)});const n=t.endAt?new bu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new bu(t.startAt.position,t.startAt.inclusive):null;return Wv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function fd(t,e,n){return new yc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vc(t,e){return Zp(Tn(t),Tn(e))&&t.limitType===e.limitType}function HS(t){return`${Jp(Tn(t))}|lt:${t.limitType}`}function Ai(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$S(i)).join(", ")}]`),mc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>gs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>gs(i)).join(",")),`Target(${r})`}(Tn(t))}; limitType=${t.limitType})`}function _c(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):J.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ko(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){const c=zv(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,ko(r),i)||r.endAt&&!function(o,a,u){const c=zv(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,ko(r),i))}(t,e)}function R2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function WS(t){return(e,n)=>{let r=!1;for(const i of ko(t)){const s=I2(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function I2(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),c=a.data.field(s);return u!==null&&c!==null?ms(u,c):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_i(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return AS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=new Ie(J.comparator);function zn(){return A2}const KS=new Ie(J.comparator);function ho(...t){let e=KS;for(const n of t)e=e.insert(n.key,n);return e}function GS(t){let e=KS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zr(){return bo()}function qS(){return bo()}function bo(){return new Ti(t=>t.toString(),(t,e)=>t.isEqual(e))}const k2=new Ie(J.comparator),b2=new He(J.comparator);function ue(...t){let e=b2;for(const n of t)e=e.add(n);return e}const D2=new He(le);function V2(){return D2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Iu(e)?"-0":e}}function QS(t){return{integerValue:""+t}}function M2(t,e){return i2(e)?QS(e):tm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(){this._=void 0}}function N2(t,e,n){return t instanceof Vu?function(i,s){const o={fields:{[DS]:{stringValue:bS},[MS]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Yp(s)&&(s=gc(s)),s&&(o.fields[VS]=s),{mapValue:o}}(n,e):t instanceof da?XS(t,e):t instanceof pa?JS(t,e):function(i,s){const o=YS(i,s),a=Gv(o)+Gv(i.Ae);return ud(o)&&ud(i.Ae)?QS(a):tm(i.serializer,a)}(t,e)}function O2(t,e,n){return t instanceof da?XS(t,e):t instanceof pa?JS(t,e):n}function YS(t,e){return t instanceof Mu?function(r){return ud(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Vu extends Tc{}class da extends Tc{constructor(e){super(),this.elements=e}}function XS(t,e){const n=ZS(e);for(const r of t.elements)n.some(i=>xn(i,r))||n.push(r);return{arrayValue:{values:n}}}class pa extends Tc{constructor(e){super(),this.elements=e}}function JS(t,e){let n=ZS(e);for(const r of t.elements)n=n.filter(i=>!xn(i,r));return{arrayValue:{values:n}}}class Mu extends Tc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Gv(t){return Me(t.integerValue||t.doubleValue)}function ZS(t){return Xp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function L2(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof da&&i instanceof da||r instanceof pa&&i instanceof pa?ps(r.elements,i.elements,xn):r instanceof Mu&&i instanceof Mu?xn(r.Ae,i.Ae):r instanceof Vu&&i instanceof Vu}(t.transform,e.transform)}class F2{constructor(e,n){this.version=e,this.transformResults=n}}class Mn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mn}static exists(e){return new Mn(void 0,e)}static updateTime(e){return new Mn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ec{}function eC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new nC(t.key,Mn.none()):new Aa(t.key,t.data,Mn.none());{const n=t.data,r=Kt.empty();let i=new He(et.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ei(t.key,r,new on(i.toArray()),Mn.none())}}function j2(t,e,n){t instanceof Aa?function(i,s,o){const a=i.value.clone(),u=Qv(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ei?function(i,s,o){if(!Kl(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Qv(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(tC(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Do(t,e,n,r){return t instanceof Aa?function(s,o,a,u){if(!Kl(s.precondition,o))return a;const c=s.value.clone(),h=Yv(s.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ei?function(s,o,a,u){if(!Kl(s.precondition,o))return a;const c=Yv(s.fieldTransforms,u,o),h=o.data;return h.setAll(tC(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Kl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function U2(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=YS(r.transform,i||null);s!=null&&(n===null&&(n=Kt.empty()),n.set(r.field,s))}return n||null}function qv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ps(r,i,(s,o)=>L2(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Aa extends Ec{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ei extends Ec{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function tC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Qv(t,e,n){const r=new Map;de(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,O2(o,a,n[i]))}return r}function Yv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,N2(s,o,e))}return r}class nC extends Ec{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class B2 extends Ec{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&j2(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Do(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Do(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=qS();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=eC(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&ps(this.mutations,e.mutations,(n,r)=>qv(n,r))&&ps(this.baseMutations,e.baseMutations,(n,r)=>qv(n,r))}}class nm{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){de(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return k2}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new nm(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe,ce;function W2(t){switch(t){case j.OK:return te(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function rC(t){if(t===void 0)return $n("GRPC error has no .code"),j.UNKNOWN;switch(t){case Oe.OK:return j.OK;case Oe.CANCELLED:return j.CANCELLED;case Oe.UNKNOWN:return j.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return j.INTERNAL;case Oe.UNAVAILABLE:return j.UNAVAILABLE;case Oe.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Oe.NOT_FOUND:return j.NOT_FOUND;case Oe.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Oe.ABORTED:return j.ABORTED;case Oe.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Oe.DATA_LOSS:return j.DATA_LOSS;default:return te(39323,{code:t})}}(ce=Oe||(Oe={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=new Er([4294967295,4294967295],0);function Xv(t){const e=K2().encode(t),n=new _S;return n.update(e),new Uint8Array(n.digest())}function Jv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Er([n,r],0),new Er([i,s],0)]}class rm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new fo(`Invalid padding: ${n}`);if(r<0)throw new fo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new fo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Er.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Er.fromNumber(r)));return i.compare(G2)===1&&(i=new Er([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Xv(e),[r,i]=Jv(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new rm(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=Xv(e),[r,i]=Jv(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class fo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ka.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Sc(ie.min(),i,new Ie(le),zn(),ue())}}class ka{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ka(r,n,ue(),ue(),ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class iC{constructor(e,n){this.targetId=e,this.Ce=n}}class sC{constructor(e,n,r=rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Zv{constructor(){this.ve=0,this.Fe=e_(),this.Me=rt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ue(),n=ue(),r=ue();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:te(38017,{changeType:s})}}),new ka(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=e_()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,de(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class q2{constructor(e){this.Ge=e,this.ze=new Map,this.je=zn(),this.He=gl(),this.Je=gl(),this.Ze=new Ie(le)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(hd(s))if(r===0){const o=new J(s.path);this.et(n,o,ft.newNoDocument(o,ie.min()))}else de(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),u=a?this.ct(a,e,o):1;if(u!==0){this.it(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ir(r).toUint8Array()}catch(u){if(u instanceof kS)return ds("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new rm(o,i,s)}catch(u){return ds(u instanceof fo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&hd(a.target)){const u=new J(a.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,ft.newNoDocument(u,e))}s.Be&&(n.set(o,s.ke()),s.Ke())}});let r=ue();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Sc(e,n,this.Ze,this.je,r);return this.je=zn(),this.He=gl(),this.Je=gl(),this.Ze=new Ie(le),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Zv,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new He(le),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new He(le),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||z("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Zv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function gl(){return new Ie(J.comparator)}function e_(){return new Ie(J.comparator)}const Q2={asc:"ASCENDING",desc:"DESCENDING"},Y2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},X2={and:"AND",or:"OR"};class J2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function dd(t,e){return t.useProto3Json||mc(e)?e:{value:e}}function Nu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Z2(t,e){return Nu(t,e.toTimestamp())}function En(t){return de(!!t,49232),ie.fromTimestamp(function(n){const r=Rr(n);return new ge(r.seconds,r.nanos)}(t))}function im(t,e){return pd(t,e).canonicalString()}function pd(t,e){const n=function(i){return new we(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function aC(t){const e=we.fromString(t);return de(fC(e),10190,{key:e.toString()}),e}function md(t,e){return im(t.databaseId,e.path)}function Vh(t,e){const n=aC(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(uC(n))}function lC(t,e){return im(t.databaseId,e)}function eb(t){const e=aC(t);return e.length===4?we.emptyPath():uC(e)}function gd(t){return new we(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function uC(t){return de(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function t_(t,e,n){return{name:md(t,e),fields:n.value.mapValue.fields}}function tb(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:te(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(de(h===void 0||typeof h=="string",58123),rt.fromBase64String(h||"")):(de(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),rt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?j.UNKNOWN:rC(c.code);return new Y(h,c.message||"")}(o);n=new sC(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Vh(t,r.document.name),s=En(r.document.updateTime),o=r.document.createTime?En(r.document.createTime):ie.min(),a=new Kt({mapValue:{fields:r.document.fields}}),u=ft.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Gl(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Vh(t,r.document),s=r.readTime?En(r.readTime):ie.min(),o=ft.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Gl([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Vh(t,r.document),s=r.removedTargetIds||[];n=new Gl([],s,i,null)}else{if(!("filter"in e))return te(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new H2(i,s),a=r.targetId;n=new iC(a,o)}}return n}function nb(t,e){let n;if(e instanceof Aa)n={update:t_(t,e.key,e.value)};else if(e instanceof nC)n={delete:md(t,e.key)};else if(e instanceof Ei)n={update:t_(t,e.key,e.data),updateMask:hb(e.fieldMask)};else{if(!(e instanceof B2))return te(16599,{dt:e.type});n={verify:md(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Vu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof da)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof pa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Mu)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Z2(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:te(27497)}(t,e.precondition)),n}function rb(t,e){return t&&t.length>0?(de(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?En(i.updateTime):En(s);return o.isEqual(ie.min())&&(o=En(s)),new F2(o,i.transformResults||[])}(n,e))):[]}function ib(t,e){return{documents:[lC(t,e.path)]}}function sb(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lC(t,i);const s=function(c){if(c.length!==0)return hC(Pn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:ki(p.field),direction:lb(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=dd(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:i}}function ob(t){let e=eb(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){de(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const p=cC(f);return p instanceof Pn&&US(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(w){return new Du(bi(w.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,mc(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(f){const p=!!f.before,g=f.values||[];return new bu(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,g=f.values||[];return new bu(g,p)}(n.endAt)),C2(e,i,o,s,a,"F",u,c)}function ab(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=bi(n.unaryFilter.field);return $e.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=bi(n.unaryFilter.field);return $e.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=bi(n.unaryFilter.field);return $e.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=bi(n.unaryFilter.field);return $e.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return $e.create(bi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Pn.create(n.compositeFilter.filters.map(r=>cC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function lb(t){return Q2[t]}function ub(t){return Y2[t]}function cb(t){return X2[t]}function ki(t){return{fieldPath:t.canonicalString()}}function bi(t){return et.fromServerFormat(t.fieldPath)}function hC(t){return t instanceof $e?function(n){if(n.op==="=="){if($v(n.value))return{unaryFilter:{field:ki(n.field),op:"IS_NAN"}};if(Bv(n.value))return{unaryFilter:{field:ki(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($v(n.value))return{unaryFilter:{field:ki(n.field),op:"IS_NOT_NAN"}};if(Bv(n.value))return{unaryFilter:{field:ki(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ki(n.field),op:ub(n.op),value:n.value}}}(t):t instanceof Pn?function(n){const r=n.getFilters().map(i=>hC(i));return r.length===1?r[0]:{compositeFilter:{op:cb(n.op),filters:r}}}(t):te(54877,{filter:t})}function hb(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function fC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function dC(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n,r,i,s=ie.min(),o=ie.min(),a=rt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new lr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e){this.yt=e}}function db(t){const e=ob({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?fd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(){this.Sn=new mb}addToCollectionParentIndex(e,n){return this.Sn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Pr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Pr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class mb{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new He(we.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new He(we.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pC=41943040;class xt{static withCacheSize(e){return new xt(e,xt.DEFAULT_COLLECTION_PERCENTILE,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xt.DEFAULT_COLLECTION_PERCENTILE=10,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xt.DEFAULT=new xt(pC,xt.DEFAULT_COLLECTION_PERCENTILE,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xt.DISABLED=new xt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ys(0)}static ar(){return new ys(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="LruGarbageCollector",gb=1048576;function i_([t,e],[n,r]){const i=le(t,n);return i===0?le(e,r):i}class yb{constructor(e){this.Pr=e,this.buffer=new He(i_),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();i_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class vb{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){z(r_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Rs(n)?z(r_,"Ignoring IndexedDB error during garbage collection: ",n):await Ps(n)}await this.Ar(3e5)})}}class _b{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(pc.ce);const r=new yb(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(z("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(n_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),n_):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,s,o,a,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),Ii()<=he.DEBUG&&z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function Tb(t,e){return new _b(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(){this.changes=new Ti(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Do(r.mutation,i,on.empty(),ge.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){const i=Zr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ho();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Zr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=zn();const o=bo(),a=function(){return bo()}();return n.forEach((u,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Ei)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Do(h.mutation,c,h.mutation.getFieldMask(),ge.now())):o.set(c.key,on.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>a.set(c,new Sb(h,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=bo();let i=new Ie((o,a)=>o-a),s=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||on.empty();h=a.applyToLocalView(c,h),r.set(u,h);const f=(i.get(a.batchId)||ue()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,f=qS();h.forEach(p=>{if(!s.has(p)){const g=eC(n.get(p),r.get(p));g!==null&&f.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return w2(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):x2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):F.resolve(Zr());let a=ua,u=s;return o.next(c=>F.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,ue())).next(h=>({batchId:a,changes:GS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let i=ho();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ho();return this.indexManager.getCollectionParents(e,s).next(a=>F.forEach(a,u=>{const c=function(f,p){return new yc(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,ft.newInvalidDocument(h)))});let a=ho();return o.forEach((u,c)=>{const h=s.get(u);h!==void 0&&Do(h.mutation,c,on.empty(),ge.now()),_c(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return F.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:En(i.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(i){return{name:i.name,query:db(i.bundledQuery),readTime:En(i.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(){this.overlays=new Ie(J.comparator),this.Lr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zr();return F.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.bt(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Lr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const i=Zr(),s=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ie((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Zr(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Zr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return F.resolve(a)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new z2(n,r));let s=this.Lr.get(n);s===void 0&&(s=ue(),this.Lr.set(n,s)),this.Lr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(){this.kr=new He(Ge.Kr),this.qr=new He(Ge.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Ge(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Ge(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new J(new we([])),r=new Ge(n,e),i=new Ge(n,e+1),s=[];return this.qr.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new J(new we([])),r=new Ge(n,e),i=new Ge(n,e+1);let s=ue();return this.qr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ge(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ge{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return J.comparator(e.key,n.key)||le(e.Hr,n.Hr)}static Ur(e,n){return le(e.Hr,n.Hr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new He(Ge.Kr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new $2(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Jr=this.Jr.add(new Ge(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?Qp:this.Yn-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ge(n,0),i=new Ge(n,Number.POSITIVE_INFINITY),s=[];return this.Jr.forEachInRange([r,i],o=>{const a=this.Zr(o.Hr);s.push(a)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new He(le);return n.forEach(i=>{const s=new Ge(i,0),o=new Ge(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),F.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;J.isDocumentKey(s)||(s=s.child(""));const o=new Ge(new J(s),0);let a=new He(le);return this.Jr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.Hr)),!0)},o),F.resolve(this.Yr(a))}Yr(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){de(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return F.forEach(n.mutations,i=>{const s=new Ge(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new Ge(n,0),i=this.Jr.firstAfterOrEqual(r);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e){this.ti=e,this.docs=function(){return new Ie(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(n))}getEntries(e,n){let r=zn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ft.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=zn();const o=n.path,a=new J(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||e2(Zk(h),r)<=0||(i.has(h.key)||_c(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,r,i){te(9500)}ni(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Ab(this)}getSize(e){return F.resolve(this.size)}}class Ab extends Eb{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e){this.persistence=e,this.ri=new Ti(n=>Jp(n),Zp),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.ii=0,this.si=new sm,this.targetCount=0,this.oi=ys._r()}forEachTarget(e,n){return this.ri.forEach((r,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),F.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new ys(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.lr(n),F.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ri.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ri.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),F.waitFor(s).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,n){this._i={},this.overlays={},this.ai=new pc(0),this.ui=!1,this.ui=!0,this.ci=new Pb,this.referenceDelegate=e(this),this.li=new kb(this),this.indexManager=new pb,this.remoteDocumentCache=function(i){return new Ib(i)}(r=>this.referenceDelegate.hi(r)),this.serializer=new fb(n),this.Pi=new wb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new xb,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new Rb(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){z("MemoryPersistence","Starting transaction:",e);const i=new bb(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(s=>this.referenceDelegate.Ii(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return F.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class bb extends n2{constructor(e){super(),this.currentSequenceNumber=e}}class om{constructor(e){this.persistence=e,this.Ri=new sm,this.Ai=null}static Vi(e){return new om(e)}get di(){if(this.Ai)return this.Ai;throw te(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.di,r=>{const i=J.fromPath(r);return this.mi(e,i).next(s=>{s||n.removeEntry(i,ie.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Ou{constructor(e,n){this.persistence=e,this.fi=new Ti(r=>s2(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Tb(this,n)}static Vi(e,n){return new Ou(e,n)}Ti(){}Ii(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return F.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(s=>s?F.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ni(e,o=>this.wr(e,o,n).next(a=>{a||(r++,s.removeEntry(o,ie.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Hl(e.data.value)),n}wr(e,n,r){return F.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return F.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=ue(),i=ue();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new am(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return CA()?8:r2(EA())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.gs(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ps(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Db;return this.ys(e,n,o).next(a=>{if(s.result=a,this.As)return this.ws(e,n,o,a.size)})}).next(()=>s.result)}ws(e,n,r,i){return r.documentReadCount<this.Vs?(Ii()<=he.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",Ai(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):(Ii()<=he.DEBUG&&z("QueryEngine","Query:",Ai(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Ii()<=he.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",Ai(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tn(n))):F.resolve())}gs(e,n){if(Kv(n))return F.resolve(null);let r=Tn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=fd(n,null,"F"),r=Tn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ue(...s);return this.fs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.bs(n,a);return this.Ss(n,c,o,u.readTime)?this.gs(e,fd(n,null,"F")):this.Ds(e,c,n,u)}))})))}ps(e,n,r,i){return Kv(n)||i.isEqual(ie.min())?F.resolve(null):this.fs.getDocuments(e,r).next(s=>{const o=this.bs(n,s);return this.Ss(n,o,r,i)?F.resolve(null):(Ii()<=he.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ai(n)),this.Ds(e,o,n,Jk(i,ua)).next(a=>a))})}bs(e,n){let r=new He(WS(e));return n.forEach((i,s)=>{_c(e,s)&&(r=r.add(s))}),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ys(e,n,r){return Ii()<=he.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",Ai(n)),this.fs.getDocumentsMatchingQuery(e,n,Pr.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="LocalStore",Mb=3e8;class Nb{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new Ie(le),this.Fs=new Ti(s=>Jp(s),Zp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Cb(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function Ob(t,e,n,r){return new Nb(t,e,n,r)}async function gC(t,e){const n=se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=ue();for(const c of i){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({Ns:c,removedBatchIds:o,addedBatchIds:a}))})})}function Lb(t,e){const n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.xs.newChangeBuffer({trackRemovals:!0});return function(a,u,c,h){const f=c.batch,p=f.keys();let g=F.resolve();return p.forEach(w=>{g=g.next(()=>h.getEntry(u,w)).next(P=>{const A=c.docVersions.get(w);de(A!==null,48541),P.version.compareTo(A)<0&&(f.applyToRemoteDocument(P,c),P.isValidDocument()&&(P.setReadTime(c.commitVersion),h.addEntry(P)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ue();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function yC(t){const e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function Fb(t,e){const n=se(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const a=[];e.targetChanges.forEach((h,f)=>{const p=i.get(f);if(!p)return;a.push(n.li.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.li.addMatchingKeys(s,h.addedDocuments,f)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(rt.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(f,g),function(P,A,T){return P.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=Mb?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(p,g,h)&&a.push(n.li.updateTargetData(s,g))});let u=zn(),c=ue();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(jb(s,o,e.documentUpdates).next(h=>{u=h.Bs,c=h.Ls})),!r.isEqual(ie.min())){const h=n.li.getLastRemoteSnapshotVersion(s).next(f=>n.li.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return F.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.vs=i,s))}function jb(t,e,n){let r=ue(),i=ue();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=zn();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ie.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):z(lm,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Bs:o,Ls:i}})}function Ub(t,e){const n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Qp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Bb(t,e){const n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.li.getTargetData(r,e).next(s=>s?(i=s,F.resolve(i)):n.li.allocateTargetId(r).next(o=>(i=new lr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function yd(t,e,n){const r=se(t),i=r.vs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Rs(o))throw o;z(lm,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function s_(t,e,n){const r=se(t);let i=ie.min(),s=ue();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const f=se(u),p=f.Fs.get(h);return p!==void 0?F.resolve(f.vs.get(p)):f.li.getTargetData(c,h)}(r,o,Tn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?i:ie.min(),n?s:ue())).next(a=>($b(r,R2(e),a),{documents:a,ks:s})))}function $b(t,e,n){let r=t.Ms.get(e)||ie.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Ms.set(e,r)}class o_{constructor(){this.activeTargetIds=V2()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zb{constructor(){this.vo=new o_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new o_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_="ConnectivityMonitor";class l_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){z(a_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){z(a_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yl=null;function vd(){return yl===null?yl=function(){return 268435456+Math.round(2147483648*Math.random())}():yl++,"0x"+yl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh="RestConnection",Wb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Kb{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===Au?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const o=vd(),a=this.Qo(e,n.toUriEncodedString());z(Mh,`Sending RPC '${e}' ${o}:`,a,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,i,s);const{host:c}=new URL(a),h=dc(c);return this.zo(e,a,u,r,h).then(f=>(z(Mh,`Received RPC '${e}' ${o}: `,f),f),f=>{throw ds(Mh,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}jo(e,n,r,i,s,o){return this.Wo(e,n,r,i,s)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Qo(e,n){const r=Wb[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const at="WebChannelConnection",ro=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(i){setTimeout(()=>{throw i},0)}})};class rs extends Kb{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!rs.c_){const e=CS();ro(e,SS.STAT_EVENT,n=>{n.stat===od.PROXY?z(at,"STAT_EVENT: detected buffering proxy"):n.stat===od.NOPROXY&&z(at,"STAT_EVENT: detected no buffering proxy")}),rs.c_=!0}}zo(e,n,r,i,s){const o=vd();return new Promise((a,u)=>{const c=new TS;c.setWithCredentials(!0),c.listenOnce(ES.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case zl.NO_ERROR:const f=c.getResponseJson();z(at,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case zl.TIMEOUT:z(at,`RPC '${e}' ${o} timed out`),u(new Y(j.DEADLINE_EXCEEDED,"Request time out"));break;case zl.HTTP_ERROR:const p=c.getStatus();if(z(at,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const P=function(T){const v=T.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(v)>=0?v:j.UNKNOWN}(w.status);u(new Y(P,w.message))}else u(new Y(j.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Y(j.UNAVAILABLE,"Connection failed."));break;default:te(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{z(at,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);z(at,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",h,r,15)})}T_(e,n,r){const i=vd(),s=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(a.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const c=s.join("");z(at,`Creating RPC '${e}' stream ${i}: ${c}`,a);const h=o.createWebChannel(c,a);this.I_(h);let f=!1,p=!1;const g=new Gb({Ho:w=>{p?z(at,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(f||(z(at,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),z(at,`RPC '${e}' stream ${i} sending:`,w),h.send(w))},Jo:()=>h.close()});return ro(h,co.EventType.OPEN,()=>{p||(z(at,`RPC '${e}' stream ${i} transport opened.`),g.i_())}),ro(h,co.EventType.CLOSE,()=>{p||(p=!0,z(at,`RPC '${e}' stream ${i} transport closed`),g.o_(),this.E_(h))}),ro(h,co.EventType.ERROR,w=>{p||(p=!0,ds(at,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),g.o_(new Y(j.UNAVAILABLE,"The operation could not be completed")))}),ro(h,co.EventType.MESSAGE,w=>{var P;if(!p){const A=w.data[0];de(!!A,16349);const T=A,v=(T==null?void 0:T.error)||((P=T[0])==null?void 0:P.error);if(v){z(at,`RPC '${e}' stream ${i} received error:`,v);const C=v.status;let k=function(E){const y=Oe[E];if(y!==void 0)return rC(y)}(C),D=v.message;k===void 0&&(k=j.INTERNAL,D="Unknown error status: "+C+" with message "+v.message),p=!0,g.o_(new Y(k,D)),h.close()}else z(at,`RPC '${e}' stream ${i} received:`,A),g.__(A)}}),rs.u_(),setTimeout(()=>{g.s_()},0),g}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return wS()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(t){return new rs(t)}function Nh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(t){return new J2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rs.c_=!1;class vC{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=s,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="PersistentStream";class _C{constructor(e,n,r,i,s,o,a,u){this.Ci=e,this.b_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?($n(n.toString()),$n("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new Y(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return z(u_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(z(u_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Qb extends _C{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=tb(this.serializer,e),r=function(s){if(!("targetChange"in s))return ie.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ie.min():o.readTime?En(o.readTime):ie.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=gd(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=hd(u)?{documents:ib(s,u)}:{query:sb(s,u).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=oC(s,o.resumeToken);const c=dd(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ie.min())>0){a.readTime=Nu(s,o.snapshotVersion.toTimestamp());const c=dd(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=ab(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=gd(this.serializer),n.removeTarget=e,this.K_(n)}}class Yb extends _C{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return de(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){de(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=rb(e.writeResults,e.commitTime),r=En(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=gd(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>nb(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{}class Jb extends Xb{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Y(j.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,pd(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(j.UNKNOWN,s.toString())})}jo(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.jo(e,pd(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(j.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function Zb(t,e,n,r){return new Jb(t,e,n,r)}class eD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?($n(n),this.aa=!1):z("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi="RemoteStore";class tD{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=s,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{Si(this)&&(z(fi,"Restarting streams for network reachability change."),await async function(u){const c=se(u);c.Ea.add(4),await ba(c),c.Va.set("Unknown"),c.Ea.delete(4),await wc(c)}(this))})}),this.Va=new eD(r,i)}}async function wc(t){if(Si(t))for(const e of t.Ra)await e(!0)}async function ba(t){for(const e of t.Ra)await e(!1)}function TC(t,e){const n=se(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),fm(n)?hm(n):Is(n).O_()&&cm(n,e))}function um(t,e){const n=se(t),r=Is(n);n.Ia.delete(e),r.O_()&&EC(n,e),n.Ia.size===0&&(r.O_()?r.L_():Si(n)&&n.Va.set("Unknown"))}function cm(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Is(t).Z_(e)}function EC(t,e){t.da.$e(e),Is(t).X_(e)}function hm(t){t.da=new q2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Is(t).start(),t.Va.ua()}function fm(t){return Si(t)&&!Is(t).x_()&&t.Ia.size>0}function Si(t){return se(t).Ea.size===0}function SC(t){t.da=void 0}async function nD(t){t.Va.set("Online")}async function rD(t){t.Ia.forEach((e,n)=>{cm(t,e)})}async function iD(t,e){SC(t),fm(t)?(t.Va.ha(e),hm(t)):t.Va.set("Unknown")}async function sD(t,e,n){if(t.Va.set("Online"),e instanceof sC&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.da.removeTarget(a))}(t,e)}catch(r){z(fi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Lu(t,r)}else if(e instanceof Gl?t.da.Xe(e):e instanceof iC?t.da.st(e):t.da.tt(e),!n.isEqual(ie.min()))try{const r=await yC(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.da.Tt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.Ia.get(c);h&&s.Ia.set(c,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const h=s.Ia.get(u);if(!h)return;s.Ia.set(u,h.withResumeToken(rt.EMPTY_BYTE_STRING,h.snapshotVersion)),EC(s,u);const f=new lr(h.target,u,c,h.sequenceNumber);cm(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){z(fi,"Failed to raise snapshot:",r),await Lu(t,r)}}async function Lu(t,e,n){if(!Rs(e))throw e;t.Ea.add(1),await ba(t),t.Va.set("Offline"),n||(n=()=>yC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{z(fi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await wc(t)})}function CC(t,e){return e().catch(n=>Lu(t,n,e))}async function xc(t){const e=se(t),n=kr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Qp;for(;oD(e);)try{const i=await Ub(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,aD(e,i)}catch(i){await Lu(e,i)}wC(e)&&xC(e)}function oD(t){return Si(t)&&t.Ta.length<10}function aD(t,e){t.Ta.push(e);const n=kr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function wC(t){return Si(t)&&!kr(t).x_()&&t.Ta.length>0}function xC(t){kr(t).start()}async function lD(t){kr(t).ra()}async function uD(t){const e=kr(t);for(const n of t.Ta)e.ea(n.mutations)}async function cD(t,e,n){const r=t.Ta.shift(),i=nm.from(r,e,n);await CC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await xc(t)}async function hD(t,e){e&&kr(t).Y_&&await async function(r,i){if(function(o){return W2(o)&&o!==j.ABORTED}(i.code)){const s=r.Ta.shift();kr(r).B_(),await CC(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await xc(r)}}(t,e),wC(t)&&xC(t)}async function c_(t,e){const n=se(t);n.asyncQueue.verifyOperationInProgress(),z(fi,"RemoteStore received new credentials");const r=Si(n);n.Ea.add(3),await ba(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await wc(n)}async function fD(t,e){const n=se(t);e?(n.Ea.delete(2),await wc(n)):e||(n.Ea.add(2),await ba(n),n.Va.set("Unknown"))}function Is(t){return t.ma||(t.ma=function(n,r,i){const s=se(n);return s.sa(),new Qb(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:nD.bind(null,t),Yo:rD.bind(null,t),t_:iD.bind(null,t),J_:sD.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),fm(t)?hm(t):t.Va.set("Unknown")):(await t.ma.stop(),SC(t))})),t.ma}function kr(t){return t.fa||(t.fa=function(n,r,i){const s=se(n);return s.sa(),new Yb(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:lD.bind(null,t),t_:hD.bind(null,t),ta:uD.bind(null,t),na:cD.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await xc(t)):(await t.fa.stop(),t.Ta.length>0&&(z(fi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new dm(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pm(t,e){if($n("AsyncQueue",`${e}: ${t}`),Rs(t))return new Y(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{static emptySet(e){return new is(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=ho(),this.sortedSet=new Ie(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof is)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new is;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(){this.ga=new Ie(J.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):te(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class vs{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new vs(e,n,is.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class pD{constructor(){this.queries=f_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=se(n),s=i.queries;i.queries=f_(),s.forEach((o,a)=>{for(const u of a.ba)u.onError(r)})})(this,new Y(j.ABORTED,"Firestore shutting down"))}}function f_(){return new Ti(t=>HS(t),vc)}async function mD(t,e){const n=se(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.Da()&&(r=2):(s=new dD,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=pm(o,`Initialization of query '${Ai(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.ba.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&mm(n)}async function gD(t,e){const n=se(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.ba.indexOf(e);o>=0&&(s.ba.splice(o,1),s.ba.length===0?i=e.Da()?0:1:!s.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function yD(t,e){const n=se(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.ba)a.Fa(i)&&(r=!0);o.wa=i}}r&&mm(n)}function vD(t,e,n){const r=se(t),i=r.queries.get(e);if(i)for(const s of i.ba)s.onError(n);r.queries.delete(e)}function mm(t){t.Ca.forEach(e=>{e.next()})}var _d,d_;(d_=_d||(_d={})).Ma="default",d_.Cache="cache";class _D{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new vs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=vs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_d.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.key=e}}class RC{constructor(e){this.key=e}}class TD{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ue(),this.mutatedKeys=ue(),this.eu=WS(e),this.tu=new is(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new h_,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const p=i.get(h),g=_c(this.query,f)?f:null,w=!!p&&this.mutatedKeys.has(p.key),P=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let A=!1;p&&g?p.data.isEqual(g.data)?w!==P&&(r.track({type:3,doc:g}),A=!0):this.su(p,g)||(r.track({type:2,doc:g}),A=!0,(u&&this.eu(g,u)>0||c&&this.eu(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),A=!0):p&&!g&&(r.track({type:1,doc:p}),A=!0,(u||c)&&(a=!0)),A&&(g?(o=o.add(g),s=P?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Ss:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(g,w){const P=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{Vt:A})}};return P(g)-P(w)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],u=this.Ya.size===0&&this.current&&!i?1:0,c=u!==this.Xa;return this.Xa=u,o.length!==0||c?{snapshot:new vs(this.query,e.tu,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new h_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ue(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new RC(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new PC(r))}),n}cu(e){this.Za=e.ks,this.Ya=ue();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return vs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const gm="SyncEngine";class ED{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class SD{constructor(e){this.key=e,this.hu=!1}}class CD{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ti(a=>HS(a),vc),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ie(J.comparator),this.Au=new Map,this.Vu=new sm,this.du={},this.mu=new Map,this.fu=ys.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function wD(t,e,n=!0){const r=VC(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await IC(r,e,n,!0),i}async function xD(t,e){const n=VC(t);await IC(n,e,!0,!1)}async function IC(t,e,n,r){const i=await Bb(t.localStore,Tn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await PD(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&TC(t.remoteStore,i),a}async function PD(t,e,n,r,i){t.pu=(f,p,g)=>async function(P,A,T,v){let C=A.view.ru(T);C.Ss&&(C=await s_(P.localStore,A.query,!1).then(({documents:E})=>A.view.ru(E,C)));const k=v&&v.targetChanges.get(A.targetId),D=v&&v.targetMismatches.get(A.targetId)!=null,O=A.view.applyChanges(C,P.isPrimaryClient,k,D);return m_(P,A.targetId,O.au),O.snapshot}(t,f,p,g);const s=await s_(t.localStore,e,!0),o=new TD(e,s.ks),a=o.ru(s.documents),u=ka.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);m_(t,n,c.au);const h=new ED(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function RD(t,e,n){const r=se(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!vc(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await yd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&um(r.remoteStore,i.targetId),Td(r,i.targetId)}).catch(Ps)):(Td(r,i.targetId),await yd(r.localStore,i.targetId,!0))}async function ID(t,e){const n=se(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),um(n.remoteStore,r.targetId))}async function AD(t,e,n){const r=OD(t);try{const i=await function(o,a){const u=se(o),c=ge.now(),h=a.reduce((g,w)=>g.add(w.key),ue());let f,p;return u.persistence.runTransaction("Locally write mutations","readwrite",g=>{let w=zn(),P=ue();return u.xs.getEntries(g,h).next(A=>{w=A,w.forEach((T,v)=>{v.isValidDocument()||(P=P.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(g,w)).next(A=>{f=A;const T=[];for(const v of a){const C=U2(v,f.get(v.key).overlayedDocument);C!=null&&T.push(new Ei(v.key,C,LS(C.value.mapValue),Mn.exists(!0)))}return u.mutationQueue.addMutationBatch(g,c,T,a)}).next(A=>{p=A;const T=A.applyToLocalDocumentSet(f,P);return u.documentOverlayCache.saveOverlays(g,A.batchId,T)})}).then(()=>({batchId:p.batchId,changes:GS(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let c=o.du[o.currentUser.toKey()];c||(c=new Ie(le)),c=c.insert(a,u),o.du[o.currentUser.toKey()]=c}(r,i.batchId,n),await Da(r,i.changes),await xc(r.remoteStore)}catch(i){const s=pm(i,"Failed to persist write");n.reject(s)}}async function AC(t,e){const n=se(t);try{const r=await Fb(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(de(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?de(o.hu,14607):i.removedDocuments.size>0&&(de(o.hu,42227),o.hu=!1))}),await Da(n,r,e)}catch(r){await Ps(r)}}function p_(t,e,n){const r=se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=se(o);u.onlineState=a;let c=!1;u.queries.forEach((h,f)=>{for(const p of f.ba)p.va(a)&&(c=!0)}),c&&mm(u)}(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function kD(t,e,n){const r=se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ie(J.comparator);o=o.insert(s,ft.newNoDocument(s,ie.min()));const a=ue().add(s),u=new Sc(ie.min(),new Map,new Ie(le),o,a);await AC(r,u),r.Ru=r.Ru.remove(s),r.Au.delete(e),ym(r)}else await yd(r.localStore,e,!1).then(()=>Td(r,e,n)).catch(Ps)}async function bD(t,e){const n=se(t),r=e.batch.batchId;try{const i=await Lb(n.localStore,e);bC(n,r,null),kC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Da(n,i)}catch(i){await Ps(i)}}async function DD(t,e,n){const r=se(t);try{const i=await function(o,a){const u=se(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,a).next(f=>(de(f!==null,37113),h=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);bC(r,e,n),kC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Da(r,i)}catch(i){await Ps(i)}}function kC(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function bC(t,e,n){const r=se(t);let i=r.du[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function Td(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||DC(t,r)})}function DC(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(um(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),ym(t))}function m_(t,e,n){for(const r of n)r instanceof PC?(t.Vu.addReference(r.key,e),VD(t,r)):r instanceof RC?(z(gm,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||DC(t,r.key)):te(19791,{wu:r})}function VD(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(z(gm,"New document in limbo: "+n),t.Eu.add(r),ym(t))}function ym(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new J(we.fromString(e)),r=t.fu.next();t.Au.set(r,new SD(n)),t.Ru=t.Ru.insert(n,r),TC(t.remoteStore,new lr(Tn(em(n.path)),r,"TargetPurposeLimboResolution",pc.ce))}}async function Da(t,e,n){const r=se(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,u)=>{o.push(r.pu(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){i.push(c);const f=am.Es(u.targetId,c);s.push(f)}}))}),await Promise.all(o),r.Pu.J_(i),await async function(u,c){const h=se(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>F.forEach(c,p=>F.forEach(p.Ts,g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>F.forEach(p.Is,g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!Rs(f))throw f;z(lm,"Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const g=h.vs.get(p),w=g.snapshotVersion,P=g.withLastLimboFreeSnapshotVersion(w);h.vs=h.vs.insert(p,P)}}}(r.localStore,s))}async function MD(t,e){const n=se(t);if(!n.currentUser.isEqual(e)){z(gm,"User change. New user:",e.toKey());const r=await gC(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(u=>{u.reject(new Y(j.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Da(n,r.Ns)}}function ND(t,e){const n=se(t),r=n.Au.get(e);if(r&&r.hu)return ue().add(r.key);{let i=ue();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function VC(t){const e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ND.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kD.bind(null,e),e.Pu.J_=yD.bind(null,e.eventManager),e.Pu.yu=vD.bind(null,e.eventManager),e}function OD(t){const e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DD.bind(null,e),e}class Fu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Ob(this.persistence,new Vb,e.initialUser,this.serializer)}Cu(e){return new mC(om.Vi,this.serializer)}Du(e){return new zb}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fu.provider={build:()=>new Fu};class LD extends Fu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){de(this.persistence.referenceDelegate instanceof Ou,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new vb(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?xt.withCacheSize(this.cacheSizeBytes):xt.DEFAULT;return new mC(r=>Ou.Vi(r,n),this.serializer)}}class Ed{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>p_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=MD.bind(null,this.syncEngine),await fD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new pD}()}createDatastore(e){const n=Cc(e.databaseInfo.databaseId),r=qb(e.databaseInfo);return Zb(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new tD(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>p_(this.syncEngine,n,0),function(){return l_.v()?new l_:new Hb}())}createSyncEngine(e,n){return function(i,s,o,a,u,c,h){const f=new CD(i,s,o,a,u,c);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=se(i);z(fi,"RemoteStore shutting down."),s.Ea.add(5),await ba(s),s.Aa.shutdown(),s.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Ed.provider={build:()=>new Ed};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):$n("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="FirestoreClient";class jD{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=ut.UNAUTHENTICATED,this.clientId=Gp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{z(br,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(z(br,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=pm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Oh(t,e){t.asyncQueue.verifyOperationInProgress(),z(br,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await gC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function g_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await UD(t);z(br,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>c_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>c_(e.remoteStore,i)),t._onlineComponents=e}async function UD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){z(br,"Using user provided OfflineComponentProvider");try{await Oh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ds("Error using user provided cache. Falling back to memory cache: "+n),await Oh(t,new Fu)}}else z(br,"Using default OfflineComponentProvider"),await Oh(t,new LD(void 0));return t._offlineComponents}async function MC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(z(br,"Using user provided OnlineComponentProvider"),await g_(t,t._uninitializedComponentsProvider._online)):(z(br,"Using default OnlineComponentProvider"),await g_(t,new Ed))),t._onlineComponents}function BD(t){return MC(t).then(e=>e.syncEngine)}async function $D(t){const e=await MC(t),n=e.eventManager;return n.onListen=wD.bind(null,e.syncEngine),n.onUnlisten=RD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=xD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ID.bind(null,e.syncEngine),n}function zD(t,e,n={}){const r=new Sr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const h=new FD({next:p=>{h.Nu(),o.enqueueAndForget(()=>gD(s,f));const g=p.docs.has(a);!g&&p.fromCache?c.reject(new Y(j.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&u&&u.source==="server"?c.reject(new Y(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new _D(em(a.path),h,{includeMetadataChanges:!0,Ka:!0});return mD(s,f)}(await $D(t),t.asyncQueue,e,n,r)),r.promise}function HD(t,e){const n=new Sr;return t.asyncQueue.enqueueAndForget(async()=>AD(await BD(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD="ComponentProvider",y_=new Map;function KD(t,e,n,r,i){return new l2(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,NC(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="firestore.googleapis.com",v_=!0;class __{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Y(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=OC,this.ssl=v_}else this.host=e.host,this.ssl=e.ssl??v_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=pC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gb)throw new Y(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Xk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NC(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new __({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new __(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Uk;switch(r.type){case"firstParty":return new Hk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=y_.get(n);r&&(z(WD,"Removing Datastore"),y_.delete(n),r.terminate())}(this),Promise.resolve()}}function GD(t,e,n,r={}){var c;t=la(t,vm);const i=dc(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(sS(`https://${a}`),aS("Firestore",!0)),s.host!==OC&&s.host!==a&&ds("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:a,ssl:i,emulatorOptions:r};if(!Pu(u,o)&&(t._setSettings(u),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=ut.MOCK_USER;else{h=oS(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Y(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new ut(p)}t._authCredentials=new Bk(new PS(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _m(this.firestore,e,this._query)}}class Qe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ma(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qe(this.firestore,e,this._key)}toJSON(){return{type:Qe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ia(n,Qe._jsonSchema))return new Qe(e,r||null,new J(we.fromString(n.referencePath)))}}Qe._jsonSchemaVersion="firestore/documentReference/1.0",Qe._jsonSchema={type:je("string",Qe._jsonSchemaVersion),referencePath:je("string")};class ma extends _m{constructor(e,n,r){super(e,n,em(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qe(this.firestore,null,new J(e))}withConverter(e){return new ma(this.firestore,e,this._path)}}function T_(t,e,...n){if(t=sa(t),arguments.length===1&&(e=Gp.newId()),Yk("doc","path",e),t instanceof vm){const r=we.fromString(e,...n);return Vv(r),new Qe(t,null,new J(r))}{if(!(t instanceof Qe||t instanceof ma))throw new Y(j.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return Vv(r),new Qe(t.firestore,t instanceof ma?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="AsyncQueue";class S_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vC(this,"async_queue_retry"),this._c=()=>{const r=Nh();r&&z(E_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Nh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Nh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Sr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Rs(e))throw e;z(E_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,$n("INTERNAL UNHANDLED ERROR: ",C_(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=dm.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&te(47125,{Pc:C_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function C_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Tm extends vm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new S_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new S_(e),this._firestoreClient=void 0,await e}}}function qD(t,e){const n=typeof t=="object"?t:gS(),r=typeof t=="string"?t:Au,i=fS(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=rS("firestore");s&&GD(i,...s)}return i}function LC(t){if(t._terminated)throw new Y(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||QD(t),t._firestoreClient}function QD(t){var r,i,s,o;const e=t._freezeSettings(),n=KD(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(i=t._app)==null?void 0:i.options.apiKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new jD(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gt(rt.fromBase64String(e))}catch(n){throw new Y(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Gt(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ia(e,Gt._jsonSchema))return Gt.fromBase64String(e.bytes)}}Gt._jsonSchemaVersion="firestore/bytes/1.0",Gt._jsonSchema={type:je("string",Gt._jsonSchemaVersion),bytes:je("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Sn._jsonSchemaVersion}}static fromJSON(e){if(Ia(e,Sn._jsonSchema))return new Sn(e.latitude,e.longitude)}}Sn._jsonSchemaVersion="firestore/geoPoint/1.0",Sn._jsonSchema={type:je("string",Sn._jsonSchemaVersion),latitude:je("number"),longitude:je("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:cn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ia(e,cn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new cn(e.vectorValues);throw new Y(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}cn._jsonSchemaVersion="firestore/vectorValue/1.0",cn._jsonSchema={type:je("string",cn._jsonSchemaVersion),vectorValues:je("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=/^__.*__$/;class XD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ei(e,this.data,this.fieldMask,n,this.fieldTransforms):new Aa(e,this.data,n,this.fieldTransforms)}}function UC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{dataSource:t})}}class Em{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.validatePath(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Em({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return ju(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(UC(this.dataSource)&&YD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class JD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Cc(e)}createContext(e,n,r,i=!1){return new Em({dataSource:e,methodName:n,targetDoc:r,path:et.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ZD(t){const e=t._freezeSettings(),n=Cc(t._databaseId);return new JD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function eV(t,e,n,r,i,s={}){const o=t.createContext(s.merge||s.mergeFields?2:0,e,n,i);HC("Data must be an object, but it was:",o,r);const a=$C(r,o);let u,c;if(s.merge)u=new on(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const p=Sm(e,f,n);if(!o.contains(p))throw new Y(j.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);rV(h,p)||h.push(p)}u=new on(h),c=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=o.fieldTransforms;return new XD(new Kt(a),u,c)}function BC(t,e){if(zC(t=sa(t)))return HC("Unsupported field value:",e,t),$C(t,e);if(t instanceof jC)return function(r,i){if(!UC(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=BC(a,i.childContextForArray(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=sa(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return M2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ge.fromDate(r);return{timestampValue:Nu(i.serializer,s)}}if(r instanceof ge){const s=new ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nu(i.serializer,s)}}if(r instanceof Sn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gt)return{bytesValue:oC(i.serializer,r._byteString)};if(r instanceof Qe){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:im(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof cn)return function(o,a){const u=o instanceof cn?o.toArray():o;return{mapValue:{fields:{[NS]:{stringValue:OS},[ku]:{arrayValue:{values:u.map(h=>{if(typeof h!="number")throw a.createError("VectorValues must only contain numeric values.");return tm(a.serializer,h)})}}}}}}(r,i);if(dC(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${qp(r)}`)}(t,e)}function $C(t,e){const n={};return AS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_i(t,(r,i)=>{const s=BC(i,e.childContextForField(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function zC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ge||t instanceof Sn||t instanceof Gt||t instanceof Qe||t instanceof jC||t instanceof cn||dC(t))}function HC(t,e,n){if(!zC(n)||!RS(n)){const r=qp(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Sm(t,e,n){if((e=sa(e))instanceof FC)return e._internalPath;if(typeof e=="string")return nV(t,e);throw ju("Field path arguments must be of type string or ",t,!1,void 0,n)}const tV=new RegExp("[~\\*/\\[\\]]");function nV(t,e,n){if(e.search(tV)>=0)throw ju(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new FC(...e.split("."))._internalPath}catch{throw ju(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ju(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Y(j.INVALID_ARGUMENT,a+t+u)}function rV(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{convertValue(e,n="none"){switch(Ar(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ir(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return _i(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[ku].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Me(o.doubleValue));return new cn(n)}convertGeoPoint(e){return new Sn(Me(e.latitude),Me(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=gc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ca(e));default:return null}}convertTimestamp(e){const n=Rr(e);return new ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=we.fromString(e);de(fC(r),9688,{name:e});const i=new ha(r.get(1),r.get(3)),s=new J(r.popFirst(5));return i.isEqual(n)||$n(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV extends iV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qe(this.firestore,null,n)}}const w_="@firebase/firestore",x_="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Sm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class oV extends WC{data(){return super.data()}}function aV(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class po{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ii extends WC{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ql(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Sm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ii._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ii._jsonSchemaVersion="firestore/documentSnapshot/1.0",ii._jsonSchema={type:je("string",ii._jsonSchemaVersion),bundleSource:je("string","DocumentSnapshot"),bundleName:je("string"),bundle:je("string")};class ql extends ii{data(e={}){return super.data(e)}}class Vo{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new po(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ql(this._firestore,this._userDataWriter,r.key,r,new po(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new ql(i._firestore,i._userDataWriter,a.doc.key,a.doc,new po(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new ql(i._firestore,i._userDataWriter,a.doc.key,a.doc,new po(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:lV(a.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vo._jsonSchemaVersion="firestore/querySnapshot/1.0",Vo._jsonSchema={type:je("string",Vo._jsonSchemaVersion),bundleSource:je("string","QuerySnapshot"),bundleName:je("string"),bundle:je("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uV(t){t=la(t,Qe);const e=la(t.firestore,Tm),n=LC(e);return zD(n,t._key).then(r=>fV(e,t,r))}function cV(t,e,n){t=la(t,Qe);const r=la(t.firestore,Tm),i=aV(t.converter,e),s=ZD(r);return hV(r,[eV(s,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Mn.none())])}function hV(t,e){const n=LC(t);return HD(n,e)}function fV(t,e,n){const r=n.docs.get(e._key),i=new sV(t);return new ii(t,i,e._key,r,new po(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){jk(pS),oa(new fs("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Tm(new $k(r.getProvider("auth-internal")),new Wk(o,r.getProvider("app-check-internal")),u2(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Tr(w_,x_,e),Tr(w_,x_,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="firebasestorage.googleapis.com",dV="storageBucket",pV=2*60*1e3,mV=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In extends vi{constructor(e,n,r=0){super(Lh(e),`Firebase Storage: ${n} (${Lh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,In.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Lh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Rn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Rn||(Rn={}));function Lh(t){return"storage/"+t}function gV(){const t="An unknown error occurred, please check the error payload for server response.";return new In(Rn.UNKNOWN,t)}function yV(){return new In(Rn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function vV(){return new In(Rn.CANCELED,"User canceled the upload/download.")}function _V(t){return new In(Rn.INVALID_URL,"Invalid URL '"+t+"'.")}function TV(t){return new In(Rn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function P_(t){return new In(Rn.INVALID_ARGUMENT,t)}function GC(){return new In(Rn.APP_DELETED,"The Firebase app was deleted.")}function EV(t){return new In(Rn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=an.makeFromUrl(e,n)}catch{return new an(e,"")}if(r.path==="")return r;throw TV(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function c(k){k.path_=decodeURIComponent(k.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",g=new RegExp(`^https?://${f}/${h}/b/${i}/o${p}`,"i"),w={bucket:1,path:3},P=n===KC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",T=new RegExp(`^https?://${P}/${i}/${A}`,"i"),C=[{regex:a,indices:u,postModify:s},{regex:g,indices:w,postModify:c},{regex:T,indices:{bucket:1,path:2},postModify:c}];for(let k=0;k<C.length;k++){const D=C[k],O=D.regex.exec(e);if(O){const E=O[D.indices.bucket];let y=O[D.indices.path];y||(y=""),r=new an(E,y),D.postModify(r);break}}if(r==null)throw _V(e);return r}}class SV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CV(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let c=!1;function h(...A){c||(c=!0,e.apply(null,A))}function f(A){i=setTimeout(()=>{i=null,t(g,u())},A)}function p(){s&&clearTimeout(s)}function g(A,...T){if(c){p();return}if(A){p(),h.call(null,A,...T);return}if(u()||o){p(),h.call(null,A,...T);return}r<64&&(r*=2);let C;a===1?(a=2,C=0):C=(r+Math.random())*1e3,f(C)}let w=!1;function P(A){w||(w=!0,p(),!c&&(i!==null?(A||(a=2),clearTimeout(i),f(0)):A||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,P(!0)},n),P}function wV(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(t){return t!==void 0}function R_(t,e,n,r){if(r<e)throw P_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw P_(`Invalid value for '${t}'. Expected ${n} or less.`)}function PV(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Uu;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Uu||(Uu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RV(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e,n,r,i,s,o,a,u,c,h,f,p=!0,g=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,P)=>{this.resolve_=w,this.reject_=P,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new vl(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Uu.NO_ERROR,u=s.getStatus();if(!a||RV(u,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===Uu.ABORT;r(!1,new vl(!1,null,h));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new vl(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());xV(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=gV();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?GC():vV();o(u)}else{const u=yV();o(u)}};this.canceled_?n(!1,new vl(!1,null,!0)):this.backoffId_=CV(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&wV(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class vl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function AV(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function kV(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function bV(t,e){e&&(t["X-Firebase-GMPID"]=e)}function DV(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function VV(t,e,n,r,i,s,o=!0,a=!1){const u=PV(t.urlParams),c=t.url+u,h=Object.assign({},t.headers);return bV(h,e),AV(h,n),kV(h,s),DV(h,r),new IV(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MV(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function NV(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n){this._service=e,n instanceof an?this._location=n:this._location=an.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Bu(e,n)}get root(){const e=new an(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return NV(this._location.path)}get storage(){return this._service}get parent(){const e=MV(this._location.path);if(e===null)return null;const n=new an(this._location.bucket,e);return new Bu(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw EV(e)}}function I_(t,e){const n=e==null?void 0:e[dV];return n==null?null:an.makeFromBucketSpec(n,t)}function OV(t,e,n,r={}){t.host=`${e}:${n}`;const i=dc(e);i&&(sS(`https://${t.host}/b`),aS("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:oS(s,t.app.options.projectId))}class LV{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=KC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pV,this._maxUploadRetryTime=mV,this._requests=new Set,i!=null?this._bucket=an.makeFromBucketSpec(i,this._host):this._bucket=I_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=an.makeFromBucketSpec(this._url,e):this._bucket=I_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){R_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){R_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(dS(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bu(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new SV(GC());{const o=VV(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const A_="@firebase/storage",k_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC="storage";function FV(t=gS(),e){t=sa(t);const r=fS(t,qC).getImmediate({identifier:e}),i=rS("storage");return i&&jV(r,...i),r}function jV(t,e,n,r={}){OV(t,e,n,r)}function UV(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new LV(n,r,i,e,pS)}function BV(){oa(new fs(qC,UV,"PUBLIC").setMultipleInstances(!0)),Tr(A_,k_,""),Tr(A_,k_,"esm2020")}BV();const $V={apiKey:"AIzaSyCH4Ijp4l0xf4UXpzxeXml8HXDPLPH1PSg",authDomain:"vignanpad.firebaseapp.com",projectId:"vignanpad",storageBucket:"vignanpad.firebasestorage.app",messagingSenderId:"903092439725",appId:"1:903092439725:web:f1f4f9e5a7780575e25424",measurementId:"G-1K8YWXNQMV"},QC=mS($V),b_=qD(QC);FV(QC);const YC=L.createContext(),XC=()=>L.useContext(YC),zV=()=>{const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let e="";for(let n=0;n<6;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},HV=({children:t})=>{const[e,n]=L.useState(!1),[r,i]=L.useState(!1),[s,o]=L.useState(""),[a,u]=L.useState(""),c=async(f,p="javascript")=>{n(!0),o(""),u("");try{const g=zV(),w=ge.fromDate(new Date(Date.now()+72*60*60*1e3));return await cV(T_(b_,"snippets",g),{content:f,language:p,createdAt:ge.now(),expiresAt:w}),u(g),n(!1),g}catch(g){return console.error("Error saving to cloud:",g),o("Failed to save. Check Firebase config."),n(!1),null}},h=async f=>{i(!0),o("");try{const p=T_(b_,"snippets",f.toUpperCase()),g=await uV(p);if(!g.exists())return o("Code not found."),i(!1),null;const w=g.data(),P=new Date,A=w.expiresAt.toDate();return P>A?(o("This code has expired."),i(!1),null):(i(!1),w.content)}catch(p){return console.error("Error loading from cloud:",p),o("Failed to load. Check your connection."),i(!1),null}};return M.jsx(YC.Provider,{value:{saveToCloud:c,loadFromCloud:h,isSaving:e,isLoading:r,cloudError:s,savedCode:a,setSavedCode:u},children:t})},Cm=L.createContext({});function wm(t){const e=L.useRef(null);return e.current===null&&(e.current=t()),e.current}const Pc=L.createContext(null),xm=L.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class WV extends L.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function KV({children:t,isPresent:e}){const n=L.useId(),r=L.useRef(null),i=L.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=L.useContext(xm);return L.useInsertionEffect(()=>{const{width:o,height:a,top:u,left:c}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const h=document.createElement("style");return s&&(h.nonce=s),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),M.jsx(WV,{isPresent:e,childRef:r,sizeRef:i,children:L.cloneElement(t,{ref:r})})}const GV=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=wm(qV),u=L.useId(),c=L.useCallback(f=>{a.set(f,!0);for(const p of a.values())if(!p)return;r&&r()},[a,r]),h=L.useMemo(()=>({id:u,initial:e,isPresent:n,custom:i,onExitComplete:c,register:f=>(a.set(f,!1),()=>a.delete(f))}),s?[Math.random(),c]:[n,c]);return L.useMemo(()=>{a.forEach((f,p)=>a.set(p,!1))},[n]),L.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=M.jsx(KV,{isPresent:n,children:t})),M.jsx(Pc.Provider,{value:h,children:t})};function qV(){return new Map}function JC(t=!0){const e=L.useContext(Pc);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=L.useId();L.useEffect(()=>{t&&i(s)},[t]);const o=L.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const _l=t=>t.key||"";function D_(t){const e=[];return L.Children.forEach(t,n=>{L.isValidElement(n)&&e.push(n)}),e}const Pm=typeof window<"u",ZC=Pm?L.useLayoutEffect:L.useEffect,Rm=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[a,u]=JC(o),c=L.useMemo(()=>D_(t),[t]),h=o&&!a?[]:c.map(_l),f=L.useRef(!0),p=L.useRef(c),g=wm(()=>new Map),[w,P]=L.useState(c),[A,T]=L.useState(c);ZC(()=>{f.current=!1,p.current=c;for(let k=0;k<A.length;k++){const D=_l(A[k]);h.includes(D)?g.delete(D):g.get(D)!==!0&&g.set(D,!1)}},[A,h.length,h.join("-")]);const v=[];if(c!==w){let k=[...c];for(let D=0;D<A.length;D++){const O=A[D],E=_l(O);h.includes(E)||(k.splice(D,0,O),v.push(O))}s==="wait"&&v.length&&(k=v),T(D_(k)),P(c);return}const{forceRender:C}=L.useContext(Cm);return M.jsx(M.Fragment,{children:A.map(k=>{const D=_l(k),O=o&&!a?!1:c===A||h.includes(D),E=()=>{if(g.has(D))g.set(D,!0);else return;let y=!0;g.forEach(S=>{S||(y=!1)}),y&&(C==null||C(),T(p.current),o&&(u==null||u()),r&&r())};return M.jsx(GV,{isPresent:O,initial:!f.current||n?void 0:!1,custom:O?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:O?void 0:E,children:k},D)})})},Ot=t=>t;let ew=Ot;function Im(t){let e;return()=>(e===void 0&&(e=t()),e)}const _s=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Nn=t=>t*1e3,On=t=>t/1e3,QV={useManualTiming:!1};function YV(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(u.schedule(c),t()),c(o)}const u={schedule:(c,h=!1,f=!1)=>{const g=f&&r?e:n;return h&&s.add(c),g.has(c)||g.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,u.process(c))}};return u}const Tl=["read","resolveKeyframes","update","preRender","render","postRender"],XV=40;function tw(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Tl.reduce((T,v)=>(T[v]=YV(s),T),{}),{read:a,resolveKeyframes:u,update:c,preRender:h,render:f,postRender:p}=o,g=()=>{const T=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(T-i.timestamp,XV),1),i.timestamp=T,i.isProcessing=!0,a.process(i),u.process(i),c.process(i),h.process(i),f.process(i),p.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(g))},w=()=>{n=!0,r=!0,i.isProcessing||t(g)};return{schedule:Tl.reduce((T,v)=>{const C=o[v];return T[v]=(k,D=!1,O=!1)=>(n||w(),C.schedule(k,D,O)),T},{}),cancel:T=>{for(let v=0;v<Tl.length;v++)o[Tl[v]].cancel(T)},state:i,steps:o}}const{schedule:Ee,cancel:Dr,state:Je,steps:Fh}=tw(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ot,!0),nw=L.createContext({strict:!1}),V_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ts={};for(const t in V_)Ts[t]={isEnabled:e=>V_[t].some(n=>!!e[n])};function JV(t){for(const e in t)Ts[e]={...Ts[e],...t[e]}}const ZV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $u(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||ZV.has(t)}let rw=t=>!$u(t);function eM(t){t&&(rw=e=>e.startsWith("on")?!$u(e):t(e))}try{eM(require("@emotion/is-prop-valid").default)}catch{}function tM(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(rw(i)||n===!0&&$u(i)||!e&&!$u(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function nM(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Rc=L.createContext({});function ga(t){return typeof t=="string"||Array.isArray(t)}function Ic(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Am=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],km=["initial",...Am];function Ac(t){return Ic(t.animate)||km.some(e=>ga(t[e]))}function iw(t){return!!(Ac(t)||t.variants)}function rM(t,e){if(Ac(t)){const{initial:n,animate:r}=t;return{initial:n===!1||ga(n)?n:void 0,animate:ga(r)?r:void 0}}return t.inherit!==!1?e:{}}function iM(t){const{initial:e,animate:n}=rM(t,L.useContext(Rc));return L.useMemo(()=>({initial:e,animate:n}),[M_(e),M_(n)])}function M_(t){return Array.isArray(t)?t.join(" "):t}const sM=Symbol.for("motionComponentSymbol");function Hi(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function oM(t,e,n){return L.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Hi(n)&&(n.current=r))},[e])}const bm=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),aM="framerAppearId",sw="data-"+bm(aM),{schedule:Dm}=tw(queueMicrotask,!1),ow=L.createContext({});function lM(t,e,n,r,i){var s,o;const{visualElement:a}=L.useContext(Rc),u=L.useContext(nw),c=L.useContext(Pc),h=L.useContext(xm).reducedMotion,f=L.useRef(null);r=r||u.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const p=f.current,g=L.useContext(ow);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&uM(f.current,n,i,g);const w=L.useRef(!1);L.useInsertionEffect(()=>{p&&w.current&&p.update(n,c)});const P=n[sw],A=L.useRef(!!P&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,P))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,P)));return ZC(()=>{p&&(w.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),Dm.render(p.render),A.current&&p.animationState&&p.animationState.animateChanges())}),L.useEffect(()=>{p&&(!A.current&&p.animationState&&p.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{var T;(T=window.MotionHandoffMarkAsComplete)===null||T===void 0||T.call(window,P)}),A.current=!1))}),p}function uM(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:u,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:aw(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Hi(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:u,layoutRoot:c})}function aw(t){if(t)return t.options.allowProjection!==!1?t.projection:aw(t.parent)}function cM({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&JV(t);function a(c,h){let f;const p={...L.useContext(xm),...c,layoutId:hM(c)},{isStatic:g}=p,w=iM(c),P=r(c,g);if(!g&&Pm){fM();const A=dM(p);f=A.MeasureLayout,w.visualElement=lM(i,P,p,e,A.ProjectionNode)}return M.jsxs(Rc.Provider,{value:w,children:[f&&w.visualElement?M.jsx(f,{visualElement:w.visualElement,...p}):null,n(i,c,oM(P,w.visualElement,h),P,g,w.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const u=L.forwardRef(a);return u[sM]=i,u}function hM({layoutId:t}){const e=L.useContext(Cm).id;return e&&t!==void 0?e+"-"+t:t}function fM(t,e){L.useContext(nw).strict}function dM(t){const{drag:e,layout:n}=Ts;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const pM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Vm(t){return typeof t!="string"||t.includes("-")?!1:!!(pM.indexOf(t)>-1||/[A-Z]/u.test(t))}function N_(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Mm(t,e,n,r){if(typeof e=="function"){const[i,s]=N_(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=N_(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const Sd=t=>Array.isArray(t),mM=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),gM=t=>Sd(t)?t[t.length-1]||0:t,dt=t=>!!(t&&t.getVelocity);function Ql(t){const e=dt(t)?t.get():t;return mM(e)?e.toValue():e}function yM({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:vM(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const lw=t=>(e,n)=>{const r=L.useContext(Rc),i=L.useContext(Pc),s=()=>yM(t,e,r,i);return n?s():wm(s)};function vM(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=Ql(s[p]);let{initial:o,animate:a}=t;const u=Ac(t),c=iw(t);e&&c&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const f=h?a:o;if(f&&typeof f!="boolean"&&!Ic(f)){const p=Array.isArray(f)?f:[f];for(let g=0;g<p.length;g++){const w=Mm(t,p[g]);if(w){const{transitionEnd:P,transition:A,...T}=w;for(const v in T){let C=T[v];if(Array.isArray(C)){const k=h?C.length-1:0;C=C[k]}C!==null&&(i[v]=C)}for(const v in P)i[v]=P[v]}}}return i}const As=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ci=new Set(As),uw=t=>e=>typeof e=="string"&&e.startsWith(t),cw=uw("--"),_M=uw("var(--"),Nm=t=>_M(t)?TM.test(t.split("/*")[0].trim()):!1,TM=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,hw=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Hn=(t,e,n)=>n>e?e:n<t?t:n,ks={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ya={...ks,transform:t=>Hn(0,1,t)},El={...ks,default:1},Va=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),er=Va("deg"),Cn=Va("%"),ee=Va("px"),EM=Va("vh"),SM=Va("vw"),O_={...Cn,parse:t=>Cn.parse(t)/100,transform:t=>Cn.transform(t*100)},CM={borderWidth:ee,borderTopWidth:ee,borderRightWidth:ee,borderBottomWidth:ee,borderLeftWidth:ee,borderRadius:ee,radius:ee,borderTopLeftRadius:ee,borderTopRightRadius:ee,borderBottomRightRadius:ee,borderBottomLeftRadius:ee,width:ee,maxWidth:ee,height:ee,maxHeight:ee,top:ee,right:ee,bottom:ee,left:ee,padding:ee,paddingTop:ee,paddingRight:ee,paddingBottom:ee,paddingLeft:ee,margin:ee,marginTop:ee,marginRight:ee,marginBottom:ee,marginLeft:ee,backgroundPositionX:ee,backgroundPositionY:ee},wM={rotate:er,rotateX:er,rotateY:er,rotateZ:er,scale:El,scaleX:El,scaleY:El,scaleZ:El,skew:er,skewX:er,skewY:er,distance:ee,translateX:ee,translateY:ee,translateZ:ee,x:ee,y:ee,z:ee,perspective:ee,transformPerspective:ee,opacity:ya,originX:O_,originY:O_,originZ:ee},L_={...ks,transform:Math.round},Om={...CM,...wM,zIndex:L_,size:ee,fillOpacity:ya,strokeOpacity:ya,numOctaves:L_},xM={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},PM=As.length;function RM(t,e,n){let r="",i=!0;for(let s=0;s<PM;s++){const o=As[s],a=t[o];if(a===void 0)continue;let u=!0;if(typeof a=="number"?u=a===(o.startsWith("scale")?1:0):u=parseFloat(a)===0,!u||n){const c=hw(a,Om[o]);if(!u){i=!1;const h=xM[o]||o;r+=`${h}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Lm(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const u in e){const c=e[u];if(Ci.has(u)){o=!0;continue}else if(cw(u)){i[u]=c;continue}else{const h=hw(c,Om[u]);u.startsWith("origin")?(a=!0,s[u]=h):r[u]=h}}if(e.transform||(o||n?r.transform=RM(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:u="50%",originY:c="50%",originZ:h=0}=s;r.transformOrigin=`${u} ${c} ${h}`}}const IM={offset:"stroke-dashoffset",array:"stroke-dasharray"},AM={offset:"strokeDashoffset",array:"strokeDasharray"};function kM(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?IM:AM;t[s.offset]=ee.transform(-r);const o=ee.transform(e),a=ee.transform(n);t[s.array]=`${o} ${a}`}function F_(t,e,n){return typeof t=="string"?t:ee.transform(e+n*t)}function bM(t,e,n){const r=F_(e,t.x,t.width),i=F_(n,t.y,t.height);return`${r} ${i}`}function Fm(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:u=0,...c},h,f){if(Lm(t,c,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:g,dimensions:w}=t;p.transform&&(w&&(g.transform=p.transform),delete p.transform),w&&(i!==void 0||s!==void 0||g.transform)&&(g.transformOrigin=bM(w,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),o!==void 0&&kM(p,o,a,u,!1)}const jm=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),fw=()=>({...jm(),attrs:{}}),Um=t=>typeof t=="string"&&t.toLowerCase()==="svg";function dw(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const pw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function mw(t,e,n,r){dw(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(pw.has(i)?i:bm(i),e.attrs[i])}const zu={};function DM(t){Object.assign(zu,t)}function gw(t,{layout:e,layoutId:n}){return Ci.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!zu[t]||t==="opacity")}function Bm(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(dt(i[o])||e.style&&dt(e.style[o])||gw(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function yw(t,e,n){const r=Bm(t,e,n);for(const i in t)if(dt(t[i])||dt(e[i])){const s=As.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function VM(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const j_=["x","y","width","height","cx","cy","r"],MM={useVisualState:lw({scrapeMotionValuesFromProps:yw,createRenderState:fw,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(Ci.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<j_.length;a++){const u=j_[a];t[u]!==e[u]&&(o=!0)}o&&Ee.read(()=>{VM(n,r),Ee.render(()=>{Fm(r,i,Um(n.tagName),t.transformTemplate),mw(n,r)})})}})},NM={useVisualState:lw({scrapeMotionValuesFromProps:Bm,createRenderState:jm})};function vw(t,e,n){for(const r in e)!dt(e[r])&&!gw(r,n)&&(t[r]=e[r])}function OM({transformTemplate:t},e){return L.useMemo(()=>{const n=jm();return Lm(n,e,t),Object.assign({},n.vars,n.style)},[e])}function LM(t,e){const n=t.style||{},r={};return vw(r,n,t),Object.assign(r,OM(t,e)),r}function FM(t,e){const n={},r=LM(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function jM(t,e,n,r){const i=L.useMemo(()=>{const s=fw();return Fm(s,e,Um(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};vw(s,t.style,t),i.style={...s,...i.style}}return i}function UM(t=!1){return(n,r,i,{latestValues:s},o)=>{const u=(Vm(n)?jM:FM)(r,s,o,n),c=tM(r,typeof n=="string",t),h=n!==L.Fragment?{...c,...u,ref:i}:{},{children:f}=r,p=L.useMemo(()=>dt(f)?f.get():f,[f]);return L.createElement(n,{...h,children:p})}}function BM(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...Vm(r)?MM:NM,preloadedFeatures:t,useRender:UM(i),createVisualElement:e,Component:r};return cM(o)}}function _w(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function kc(t,e,n){const r=t.getProps();return Mm(r,e,n!==void 0?n:r.custom,t)}const $M=Im(()=>window.ScrollTimeline!==void 0);class zM{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if($M()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class HM extends zM{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function $m(t,e){return t?t[e]||t.default||t:void 0}const Cd=2e4;function Tw(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Cd;)e+=n,r=t.next(e);return e>=Cd?1/0:e}function zm(t){return typeof t=="function"}function U_(t,e){t.timeline=e,t.onfinish=null}const Hm=t=>Array.isArray(t)&&typeof t[0]=="number",WM={linearEasing:void 0};function KM(t,e){const n=Im(t);return()=>{var r;return(r=WM[e])!==null&&r!==void 0?r:n()}}const Hu=KM(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ew=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(_s(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function Sw(t){return!!(typeof t=="function"&&Hu()||!t||typeof t=="string"&&(t in wd||Hu())||Hm(t)||Array.isArray(t)&&t.every(Sw))}const mo=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,wd={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:mo([0,.65,.55,1]),circOut:mo([.55,0,1,.45]),backIn:mo([.31,.01,.66,-.59]),backOut:mo([.33,1.53,.69,.99])};function Cw(t,e){if(t)return typeof t=="function"&&Hu()?Ew(t,e):Hm(t)?mo(t):Array.isArray(t)?t.map(n=>Cw(n,e)||wd.easeOut):wd[t]}const en={x:!1,y:!1};function ww(){return en.x||en.y}function GM(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function xw(t,e){const n=GM(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function B_(t){return e=>{e.pointerType==="touch"||ww()||t(e)}}function qM(t,e,n={}){const[r,i,s]=xw(t,n),o=B_(a=>{const{target:u}=a,c=e(a);if(typeof c!="function"||!u)return;const h=B_(f=>{c(f),u.removeEventListener("pointerleave",h)});u.addEventListener("pointerleave",h,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const Pw=(t,e)=>e?t===e?!0:Pw(t,e.parentElement):!1,Wm=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,QM=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function YM(t){return QM.has(t.tagName)||t.tabIndex!==-1}const go=new WeakSet;function $_(t){return e=>{e.key==="Enter"&&t(e)}}function jh(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const XM=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=$_(()=>{if(go.has(n))return;jh(n,"down");const i=$_(()=>{jh(n,"up")}),s=()=>jh(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function z_(t){return Wm(t)&&!ww()}function JM(t,e,n={}){const[r,i,s]=xw(t,n),o=a=>{const u=a.currentTarget;if(!z_(a)||go.has(u))return;go.add(u);const c=e(a),h=(g,w)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),!(!z_(g)||!go.has(u))&&(go.delete(u),typeof c=="function"&&c(g,{success:w}))},f=g=>{h(g,n.useGlobalTarget||Pw(u,g.target))},p=g=>{h(g,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",p,i)};return r.forEach(a=>{!YM(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>XM(c,i),i)}),s}function ZM(t){return t==="x"||t==="y"?en[t]?null:(en[t]=!0,()=>{en[t]=!1}):en.x||en.y?null:(en.x=en.y=!0,()=>{en.x=en.y=!1})}const Rw=new Set(["width","height","top","left","right","bottom",...As]);let Yl;function eN(){Yl=void 0}const wn={now:()=>(Yl===void 0&&wn.set(Je.isProcessing||QV.useManualTiming?Je.timestamp:performance.now()),Yl),set:t=>{Yl=t,queueMicrotask(eN)}};function Km(t,e){t.indexOf(e)===-1&&t.push(e)}function Gm(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class qm{constructor(){this.subscriptions=[]}add(e){return Km(this.subscriptions,e),()=>Gm(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Iw(t,e){return e?t*(1e3/e):0}const H_=30,tN=t=>!isNaN(parseFloat(t));class nN{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=wn.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=wn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=tN(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new qm);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ee.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=wn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>H_)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,H_);return Iw(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function va(t,e){return new nN(t,e)}function rN(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,va(n))}function iN(t,e){const n=kc(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=gM(s[o]);rN(t,o,a)}}function sN(t){return!!(dt(t)&&t.add)}function xd(t,e){const n=t.getValue("willChange");if(sN(n))return n.add(e)}function Aw(t){return t.props[sw]}const kw=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,oN=1e-7,aN=12;function lN(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=kw(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>oN&&++a<aN);return o}function Ma(t,e,n,r){if(t===e&&n===r)return Ot;const i=s=>lN(s,0,1,t,n);return s=>s===0||s===1?s:kw(i(s),e,r)}const bw=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Dw=t=>e=>1-t(1-e),Vw=Ma(.33,1.53,.69,.99),Qm=Dw(Vw),Mw=bw(Qm),Nw=t=>(t*=2)<1?.5*Qm(t):.5*(2-Math.pow(2,-10*(t-1))),Ym=t=>1-Math.sin(Math.acos(t)),Ow=Dw(Ym),Lw=bw(Ym),Fw=t=>/^0[^.\s]+$/u.test(t);function uN(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Fw(t):!0}const Mo=t=>Math.round(t*1e5)/1e5,Xm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function cN(t){return t==null}const hN=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Jm=(t,e)=>n=>!!(typeof n=="string"&&hN.test(n)&&n.startsWith(t)||e&&!cN(n)&&Object.prototype.hasOwnProperty.call(n,e)),jw=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(Xm);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},fN=t=>Hn(0,255,t),Uh={...ks,transform:t=>Math.round(fN(t))},ei={test:Jm("rgb","red"),parse:jw("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Uh.transform(t)+", "+Uh.transform(e)+", "+Uh.transform(n)+", "+Mo(ya.transform(r))+")"};function dN(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Pd={test:Jm("#"),parse:dN,transform:ei.transform},Wi={test:Jm("hsl","hue"),parse:jw("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Cn.transform(Mo(e))+", "+Cn.transform(Mo(n))+", "+Mo(ya.transform(r))+")"},lt={test:t=>ei.test(t)||Pd.test(t)||Wi.test(t),parse:t=>ei.test(t)?ei.parse(t):Wi.test(t)?Wi.parse(t):Pd.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ei.transform(t):Wi.transform(t)},pN=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function mN(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Xm))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(pN))===null||n===void 0?void 0:n.length)||0)>0}const Uw="number",Bw="color",gN="var",yN="var(",W_="${}",vN=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function _a(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(vN,u=>(lt.test(u)?(r.color.push(s),i.push(Bw),n.push(lt.parse(u))):u.startsWith(yN)?(r.var.push(s),i.push(gN),n.push(u)):(r.number.push(s),i.push(Uw),n.push(parseFloat(u))),++s,W_)).split(W_);return{values:n,split:a,indexes:r,types:i}}function $w(t){return _a(t).values}function zw(t){const{split:e,types:n}=_a(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===Uw?s+=Mo(i[o]):a===Bw?s+=lt.transform(i[o]):s+=i[o]}return s}}const _N=t=>typeof t=="number"?0:t;function TN(t){const e=$w(t);return zw(t)(e.map(_N))}const Vr={test:mN,parse:$w,createTransformer:zw,getAnimatableNone:TN},EN=new Set(["brightness","contrast","saturate","opacity"]);function SN(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Xm)||[];if(!r)return t;const i=n.replace(r,"");let s=EN.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const CN=/\b([a-z-]*)\(.*?\)/gu,Rd={...Vr,getAnimatableNone:t=>{const e=t.match(CN);return e?e.map(SN).join(" "):t}},wN={...Om,color:lt,backgroundColor:lt,outlineColor:lt,fill:lt,stroke:lt,borderColor:lt,borderTopColor:lt,borderRightColor:lt,borderBottomColor:lt,borderLeftColor:lt,filter:Rd,WebkitFilter:Rd},Zm=t=>wN[t];function Hw(t,e){let n=Zm(t);return n!==Rd&&(n=Vr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const xN=new Set(["auto","none","0"]);function PN(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!xN.has(s)&&_a(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=Hw(n,i)}const K_=t=>t===ks||t===ee,G_=(t,e)=>parseFloat(t.split(", ")[e]),q_=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return G_(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?G_(s[1],t):0}},RN=new Set(["x","y","z"]),IN=As.filter(t=>!RN.has(t));function AN(t){const e=[];return IN.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Es={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:q_(4,13),y:q_(5,14)};Es.translateX=Es.x;Es.translateY=Es.y;const si=new Set;let Id=!1,Ad=!1;function Ww(){if(Ad){const t=Array.from(si).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=AN(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Ad=!1,Id=!1,si.forEach(t=>t.complete()),si.clear()}function Kw(){si.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Ad=!0)})}function kN(){Kw(),Ww()}class eg{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(si.add(this),Id||(Id=!0,Ee.read(Kw),Ee.resolveKeyframes(Ww))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const u=r.readValue(n,a);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),si.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,si.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Gw=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),bN=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function DN(t){const e=bN.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function qw(t,e,n=1){const[r,i]=DN(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return Gw(o)?parseFloat(o):o}return Nm(i)?qw(i,e,n+1):i}const Qw=t=>e=>e.test(t),VN={test:t=>t==="auto",parse:t=>t},Yw=[ks,ee,Cn,er,SM,EM,VN],Q_=t=>Yw.find(Qw(t));class Xw extends eg{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let c=e[u];if(typeof c=="string"&&(c=c.trim(),Nm(c))){const h=qw(c,n.current);h!==void 0&&(e[u]=h),u===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!Rw.has(r)||e.length!==2)return;const[i,s]=e,o=Q_(i),a=Q_(s);if(o!==a)if(K_(o)&&K_(a))for(let u=0;u<e.length;u++){const c=e[u];typeof c=="string"&&(e[u]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)uN(e[i])&&r.push(i);r.length&&PN(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Es[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=Es[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,c])=>{n.getValue(u).set(c)}),this.resolveNoneKeyframes()}}const Y_=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Vr.test(t)||t==="0")&&!t.startsWith("url("));function MN(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function NN(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=Y_(i,e),a=Y_(s,e);return!o||!a?!1:MN(t)||(n==="spring"||zm(n))&&r}const ON=t=>t!==null;function bc(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(ON),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const LN=40;class Jw{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=wn.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>LN?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&kN(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=wn.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:u,isGenerator:c}=this.options;if(!c&&!NN(e,r,i,s))if(o)this.options.duration=0;else{u&&u(bc(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const xe=(t,e,n)=>t+(e-t)*n;function Bh(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function FN({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,u=2*n-a;i=Bh(u,a,t+1/3),s=Bh(u,a,t),o=Bh(u,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Wu(t,e){return n=>n>0?e:t}const $h=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},jN=[Pd,ei,Wi],UN=t=>jN.find(e=>e.test(t));function X_(t){const e=UN(t);if(!e)return!1;let n=e.parse(t);return e===Wi&&(n=FN(n)),n}const J_=(t,e)=>{const n=X_(t),r=X_(e);if(!n||!r)return Wu(t,e);const i={...n};return s=>(i.red=$h(n.red,r.red,s),i.green=$h(n.green,r.green,s),i.blue=$h(n.blue,r.blue,s),i.alpha=xe(n.alpha,r.alpha,s),ei.transform(i))},BN=(t,e)=>n=>e(t(n)),Na=(...t)=>t.reduce(BN),kd=new Set(["none","hidden"]);function $N(t,e){return kd.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function zN(t,e){return n=>xe(t,e,n)}function tg(t){return typeof t=="number"?zN:typeof t=="string"?Nm(t)?Wu:lt.test(t)?J_:KN:Array.isArray(t)?Zw:typeof t=="object"?lt.test(t)?J_:HN:Wu}function Zw(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>tg(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function HN(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=tg(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function WN(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],u=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=u,i[o]++}return r}const KN=(t,e)=>{const n=Vr.createTransformer(e),r=_a(t),i=_a(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?kd.has(t)&&!i.values.length||kd.has(e)&&!r.values.length?$N(t,e):Na(Zw(WN(r,i),i.values),n):Wu(t,e)};function ex(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?xe(t,e,n):tg(t)(t,e)}const GN=5;function tx(t,e,n){const r=Math.max(e-GN,0);return Iw(n-t(r),e-r)}const ke={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},zh=.001;function qN({duration:t=ke.duration,bounce:e=ke.bounce,velocity:n=ke.velocity,mass:r=ke.mass}){let i,s,o=1-e;o=Hn(ke.minDamping,ke.maxDamping,o),t=Hn(ke.minDuration,ke.maxDuration,On(t)),o<1?(i=c=>{const h=c*o,f=h*t,p=h-n,g=bd(c,o),w=Math.exp(-f);return zh-p/g*w},s=c=>{const f=c*o*t,p=f*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,w=Math.exp(-f),P=bd(Math.pow(c,2),o);return(-i(c)+zh>0?-1:1)*((p-g)*w)/P}):(i=c=>{const h=Math.exp(-c*t),f=(c-n)*t+1;return-zh+h*f},s=c=>{const h=Math.exp(-c*t),f=(n-c)*(t*t);return h*f});const a=5/t,u=YN(i,s,a);if(t=Nn(t),isNaN(u))return{stiffness:ke.stiffness,damping:ke.damping,duration:t};{const c=Math.pow(u,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const QN=12;function YN(t,e,n){let r=n;for(let i=1;i<QN;i++)r=r-t(r)/e(r);return r}function bd(t,e){return t*Math.sqrt(1-e*e)}const XN=["duration","bounce"],JN=["stiffness","damping","mass"];function Z_(t,e){return e.some(n=>t[n]!==void 0)}function ZN(t){let e={velocity:ke.velocity,stiffness:ke.stiffness,damping:ke.damping,mass:ke.mass,isResolvedFromDuration:!1,...t};if(!Z_(t,JN)&&Z_(t,XN))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Hn(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:ke.mass,stiffness:i,damping:s}}else{const n=qN(t);e={...e,...n,mass:ke.mass},e.isResolvedFromDuration=!0}return e}function nx(t=ke.visualDuration,e=ke.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:u,damping:c,mass:h,duration:f,velocity:p,isResolvedFromDuration:g}=ZN({...n,velocity:-On(n.velocity||0)}),w=p||0,P=c/(2*Math.sqrt(u*h)),A=o-s,T=On(Math.sqrt(u/h)),v=Math.abs(A)<5;r||(r=v?ke.restSpeed.granular:ke.restSpeed.default),i||(i=v?ke.restDelta.granular:ke.restDelta.default);let C;if(P<1){const D=bd(T,P);C=O=>{const E=Math.exp(-P*T*O);return o-E*((w+P*T*A)/D*Math.sin(D*O)+A*Math.cos(D*O))}}else if(P===1)C=D=>o-Math.exp(-T*D)*(A+(w+T*A)*D);else{const D=T*Math.sqrt(P*P-1);C=O=>{const E=Math.exp(-P*T*O),y=Math.min(D*O,300);return o-E*((w+P*T*A)*Math.sinh(y)+D*A*Math.cosh(y))/D}}const k={calculatedDuration:g&&f||null,next:D=>{const O=C(D);if(g)a.done=D>=f;else{let E=0;P<1&&(E=D===0?Nn(w):tx(C,D,O));const y=Math.abs(E)<=r,S=Math.abs(o-O)<=i;a.done=y&&S}return a.value=a.done?o:O,a},toString:()=>{const D=Math.min(Tw(k),Cd),O=Ew(E=>k.next(D*E).value,D,30);return D+"ms "+O}};return k}function e0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:u,restDelta:c=.5,restSpeed:h}){const f=t[0],p={done:!1,value:f},g=y=>a!==void 0&&y<a||u!==void 0&&y>u,w=y=>a===void 0?u:u===void 0||Math.abs(a-y)<Math.abs(u-y)?a:u;let P=n*e;const A=f+P,T=o===void 0?A:o(A);T!==A&&(P=T-f);const v=y=>-P*Math.exp(-y/r),C=y=>T+v(y),k=y=>{const S=v(y),x=C(y);p.done=Math.abs(S)<=c,p.value=p.done?T:x};let D,O;const E=y=>{g(p.value)&&(D=y,O=nx({keyframes:[p.value,w(p.value)],velocity:tx(C,y,p.value),damping:i,stiffness:s,restDelta:c,restSpeed:h}))};return E(0),{calculatedDuration:null,next:y=>{let S=!1;return!O&&D===void 0&&(S=!0,k(y),E(y)),D!==void 0&&y>=D?O.next(y-D):(!S&&k(y),p)}}}const eO=Ma(.42,0,1,1),tO=Ma(0,0,.58,1),rx=Ma(.42,0,.58,1),nO=t=>Array.isArray(t)&&typeof t[0]!="number",rO={linear:Ot,easeIn:eO,easeInOut:rx,easeOut:tO,circIn:Ym,circInOut:Lw,circOut:Ow,backIn:Qm,backInOut:Mw,backOut:Vw,anticipate:Nw},t0=t=>{if(Hm(t)){ew(t.length===4);const[e,n,r,i]=t;return Ma(e,n,r,i)}else if(typeof t=="string")return rO[t];return t};function iO(t,e,n){const r=[],i=n||ex,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||Ot:e;a=Na(u,a)}r.push(a)}return r}function sO(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(ew(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=iO(e,r,i),u=a.length,c=h=>{if(o&&h<t[0])return e[0];let f=0;if(u>1)for(;f<t.length-2&&!(h<t[f+1]);f++);const p=_s(t[f],t[f+1],h);return a[f](p)};return n?h=>c(Hn(t[0],t[s-1],h)):c}function oO(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=_s(0,e,r);t.push(xe(n,1,i))}}function aO(t){const e=[0];return oO(e,t.length-1),e}function lO(t,e){return t.map(n=>n*e)}function uO(t,e){return t.map(()=>e||rx).splice(0,t.length-1)}function Ku({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=nO(r)?r.map(t0):t0(r),s={done:!1,value:e[0]},o=lO(n&&n.length===e.length?n:aO(e),t),a=sO(o,e,{ease:Array.isArray(i)?i:uO(e,i)});return{calculatedDuration:t,next:u=>(s.value=a(u),s.done=u>=t,s)}}const cO=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ee.update(e,!0),stop:()=>Dr(e),now:()=>Je.isProcessing?Je.timestamp:wn.now()}},hO={decay:e0,inertia:e0,tween:Ku,keyframes:Ku,spring:nx},fO=t=>t/100;class ng extends Jw{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||eg,a=(u,c)=>this.onKeyframesResolved(u,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=zm(n)?n:hO[n]||Ku;let u,c;a!==Ku&&typeof e[0]!="number"&&(u=Na(fO,ex(e[0],e[1])),e=[0,100]);const h=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=Tw(h));const{calculatedDuration:f}=h,p=f+i,g=p*(r+1)-i;return{generator:h,mirroredGenerator:c,mapPercentToKeyframes:u,calculatedDuration:f,resolvedDuration:p,totalDuration:g}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:y}=this.options;return{done:!0,value:y[y.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:u,calculatedDuration:c,totalDuration:h,resolvedDuration:f}=r;if(this.startTime===null)return s.next(0);const{delay:p,repeat:g,repeatType:w,repeatDelay:P,onUpdate:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const T=this.currentTime-p*(this.speed>=0?1:-1),v=this.speed>=0?T<0:T>h;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let C=this.currentTime,k=s;if(g){const y=Math.min(this.currentTime,h)/f;let S=Math.floor(y),x=y%1;!x&&y>=1&&(x=1),x===1&&S--,S=Math.min(S,g+1),!!(S%2)&&(w==="reverse"?(x=1-x,P&&(x-=P/f)):w==="mirror"&&(k=o)),C=Hn(0,1,x)*f}const D=v?{done:!1,value:u[0]}:k.next(C);a&&(D.value=a(D.value));let{done:O}=D;!v&&c!==null&&(O=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return E&&i!==void 0&&(D.value=bc(u,this.options,i)),A&&A(D.value),E&&this.finish(),D}get duration(){const{resolved:e}=this;return e?On(e.calculatedDuration):0}get time(){return On(this.currentTime)}set time(e){e=Nn(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=On(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=cO,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const dO=new Set(["opacity","clipPath","filter","transform"]);function pO(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:u}={}){const c={[e]:n};u&&(c.offset=u);const h=Cw(a,i);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const mO=Im(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Gu=10,gO=2e4;function yO(t){return zm(t.type)||t.type==="spring"||!Sw(t.ease)}function vO(t,e){const n=new ng({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<gO;)r=n.sample(s),i.push(r.value),s+=Gu;return{times:void 0,keyframes:i,duration:s-Gu,ease:"linear"}}const ix={anticipate:Nw,backInOut:Mw,circInOut:Lw};function _O(t){return t in ix}class n0 extends Jw{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new Xw(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:u,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&Hu()&&_O(s)&&(s=ix[s]),yO(this.options)){const{onComplete:f,onUpdate:p,motionValue:g,element:w,...P}=this.options,A=vO(e,P);e=A.keyframes,e.length===1&&(e[1]=e[0]),r=A.duration,i=A.times,s=A.ease,o="keyframes"}const h=pO(a.owner.current,u,e,{...this.options,duration:r,times:i,ease:s});return h.startTime=c??this.calcStartTime(),this.pendingTimeline?(U_(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:f}=this.options;a.set(bc(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return On(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return On(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Nn(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Ot;const{animation:r}=n;U_(r,e)}return Ot}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:h,onComplete:f,element:p,...g}=this.options,w=new ng({...g,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),P=Nn(this.time);c.setWithVelocity(w.sample(P-Gu).value,w.sample(P).value,Gu)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:c}=n.owner.getProps();return mO()&&r&&dO.has(r)&&!u&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const TO={type:"spring",stiffness:500,damping:25,restSpeed:10},EO=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),SO={type:"keyframes",duration:.8},CO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},wO=(t,{keyframes:e})=>e.length>2?SO:Ci.has(t)?t.startsWith("scale")?EO(e[1]):TO:CO;function xO({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:u,elapsed:c,...h}){return!!Object.keys(h).length}const rg=(t,e,n,r={},i,s)=>o=>{const a=$m(r,t)||{},u=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Nn(u);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};xO(a)||(h={...h,...wO(t,h)}),h.duration&&(h.duration=Nn(h.duration)),h.repeatDelay&&(h.repeatDelay=Nn(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const p=bc(h.keyframes,a);if(p!==void 0)return Ee.update(()=>{h.onUpdate(p),h.onComplete()}),new HM([])}return!s&&n0.supports(h)?new n0(h):new ng(h)};function PO({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function sx(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...u}=e;r&&(o=r);const c=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const f in u){const p=t.getValue(f,(s=t.latestValues[f])!==null&&s!==void 0?s:null),g=u[f];if(g===void 0||h&&PO(h,f))continue;const w={delay:n,...$m(o||{},f)};let P=!1;if(window.MotionHandoffAnimation){const T=Aw(t);if(T){const v=window.MotionHandoffAnimation(T,f,Ee);v!==null&&(w.startTime=v,P=!0)}}xd(t,f),p.start(rg(f,p,g,t.shouldReduceMotion&&Rw.has(f)?{type:!1}:w,t,P));const A=p.animation;A&&c.push(A)}return a&&Promise.all(c).then(()=>{Ee.update(()=>{a&&iN(t,a)})}),c}function Dd(t,e,n={}){var r;const i=kc(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(sx(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:p}=s;return RO(t,e,h+c,f,p,n)}:()=>Promise.resolve(),{when:u}=s;if(u){const[c,h]=u==="beforeChildren"?[o,a]:[a,o];return c().then(()=>h())}else return Promise.all([o(),a(n.delay)])}function RO(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,u=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(IO).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(Dd(c,e,{...s,delay:n+u(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function IO(t,e){return t.sortNodePosition(e)}function AO(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Dd(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Dd(t,e,n);else{const i=typeof e=="function"?kc(t,e,n.custom):e;r=Promise.all(sx(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const kO=km.length;function ox(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?ox(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<kO;n++){const r=km[n],i=t.props[r];(ga(i)||i===!1)&&(e[r]=i)}return e}const bO=[...Am].reverse(),DO=Am.length;function VO(t){return e=>Promise.all(e.map(({animation:n,options:r})=>AO(t,n,r)))}function MO(t){let e=VO(t),n=r0(),r=!0;const i=u=>(c,h)=>{var f;const p=kc(t,h,u==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(p){const{transition:g,transitionEnd:w,...P}=p;c={...c,...P,...w}}return c};function s(u){e=u(t)}function o(u){const{props:c}=t,h=ox(t.parent)||{},f=[],p=new Set;let g={},w=1/0;for(let A=0;A<DO;A++){const T=bO[A],v=n[T],C=c[T]!==void 0?c[T]:h[T],k=ga(C),D=T===u?v.isActive:null;D===!1&&(w=A);let O=C===h[T]&&C!==c[T]&&k;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),v.protectedKeys={...g},!v.isActive&&D===null||!C&&!v.prevProp||Ic(C)||typeof C=="boolean")continue;const E=NO(v.prevProp,C);let y=E||T===u&&v.isActive&&!O&&k||A>w&&k,S=!1;const x=Array.isArray(C)?C:[C];let I=x.reduce(i(T),{});D===!1&&(I={});const{prevResolvedValues:b={}}=v,R={...b,...I},K=ne=>{y=!0,p.has(ne)&&(S=!0,p.delete(ne)),v.needsAnimating[ne]=!0;const U=t.getValue(ne);U&&(U.liveStyle=!1)};for(const ne in R){const U=I[ne],W=b[ne];if(g.hasOwnProperty(ne))continue;let Z=!1;Sd(U)&&Sd(W)?Z=!_w(U,W):Z=U!==W,Z?U!=null?K(ne):p.add(ne):U!==void 0&&p.has(ne)?K(ne):v.protectedKeys[ne]=!0}v.prevProp=C,v.prevResolvedValues=I,v.isActive&&(g={...g,...I}),r&&t.blockInitialAnimation&&(y=!1),y&&(!(O&&E)||S)&&f.push(...x.map(ne=>({animation:ne,options:{type:T}})))}if(p.size){const A={};p.forEach(T=>{const v=t.getBaseTarget(T),C=t.getValue(T);C&&(C.liveStyle=!0),A[T]=v??null}),f.push({animation:A})}let P=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(P=!1),r=!1,P?e(f):Promise.resolve()}function a(u,c){var h;if(n[u].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(p=>{var g;return(g=p.animationState)===null||g===void 0?void 0:g.setActive(u,c)}),n[u].isActive=c;const f=o(u);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=r0(),r=!0}}}function NO(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!_w(e,t):!1}function zr(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function r0(){return{animate:zr(!0),whileInView:zr(),whileHover:zr(),whileTap:zr(),whileDrag:zr(),whileFocus:zr(),exit:zr()}}class Lr{constructor(e){this.isMounted=!1,this.node=e}update(){}}class OO extends Lr{constructor(e){super(e),e.animationState||(e.animationState=MO(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ic(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let LO=0;class FO extends Lr{constructor(){super(...arguments),this.id=LO++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const jO={animation:{Feature:OO},exit:{Feature:FO}};function Ta(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Oa(t){return{point:{x:t.pageX,y:t.pageY}}}const UO=t=>e=>Wm(e)&&t(e,Oa(e));function No(t,e,n,r){return Ta(t,e,UO(n),r)}const i0=(t,e)=>Math.abs(t-e);function BO(t,e){const n=i0(t.x,e.x),r=i0(t.y,e.y);return Math.sqrt(n**2+r**2)}class ax{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Wh(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=BO(f.offset,{x:0,y:0})>=3;if(!p&&!g)return;const{point:w}=f,{timestamp:P}=Je;this.history.push({...w,timestamp:P});const{onStart:A,onMove:T}=this.handlers;p||(A&&A(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Hh(p,this.transformPagePoint),Ee.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:g,onSessionEnd:w,resumeAnimation:P}=this.handlers;if(this.dragSnapToOrigin&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=Wh(f.type==="pointercancel"?this.lastMoveEventInfo:Hh(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(f,A),w&&w(f,A)},!Wm(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Oa(e),a=Hh(o,this.transformPagePoint),{point:u}=a,{timestamp:c}=Je;this.history=[{...u,timestamp:c}];const{onSessionStart:h}=n;h&&h(e,Wh(a,this.history)),this.removeListeners=Na(No(this.contextWindow,"pointermove",this.handlePointerMove),No(this.contextWindow,"pointerup",this.handlePointerUp),No(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Dr(this.updatePoint)}}function Hh(t,e){return e?{point:e(t.point)}:t}function s0(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Wh({point:t},e){return{point:t,delta:s0(t,lx(e)),offset:s0(t,$O(e)),velocity:zO(e,.1)}}function $O(t){return t[0]}function lx(t){return t[t.length-1]}function zO(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=lx(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Nn(e)));)n--;if(!r)return{x:0,y:0};const s=On(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const ux=1e-4,HO=1-ux,WO=1+ux,cx=.01,KO=0-cx,GO=0+cx;function Ft(t){return t.max-t.min}function qO(t,e,n){return Math.abs(t-e)<=n}function o0(t,e,n,r=.5){t.origin=r,t.originPoint=xe(e.min,e.max,t.origin),t.scale=Ft(n)/Ft(e),t.translate=xe(n.min,n.max,t.origin)-t.originPoint,(t.scale>=HO&&t.scale<=WO||isNaN(t.scale))&&(t.scale=1),(t.translate>=KO&&t.translate<=GO||isNaN(t.translate))&&(t.translate=0)}function Oo(t,e,n,r){o0(t.x,e.x,n.x,r?r.originX:void 0),o0(t.y,e.y,n.y,r?r.originY:void 0)}function a0(t,e,n){t.min=n.min+e.min,t.max=t.min+Ft(e)}function QO(t,e,n){a0(t.x,e.x,n.x),a0(t.y,e.y,n.y)}function l0(t,e,n){t.min=e.min-n.min,t.max=t.min+Ft(e)}function Lo(t,e,n){l0(t.x,e.x,n.x),l0(t.y,e.y,n.y)}function YO(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?xe(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?xe(n,t,r.max):Math.min(t,n)),t}function u0(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function XO(t,{top:e,left:n,bottom:r,right:i}){return{x:u0(t.x,n,i),y:u0(t.y,e,r)}}function c0(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function JO(t,e){return{x:c0(t.x,e.x),y:c0(t.y,e.y)}}function ZO(t,e){let n=.5;const r=Ft(t),i=Ft(e);return i>r?n=_s(e.min,e.max-r,t.min):r>i&&(n=_s(t.min,t.max-i,e.min)),Hn(0,1,n)}function e4(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Vd=.35;function t4(t=Vd){return t===!1?t=0:t===!0&&(t=Vd),{x:h0(t,"left","right"),y:h0(t,"top","bottom")}}function h0(t,e,n){return{min:f0(t,e),max:f0(t,n)}}function f0(t,e){return typeof t=="number"?t:t[e]||0}const d0=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ki=()=>({x:d0(),y:d0()}),p0=()=>({min:0,max:0}),Ve=()=>({x:p0(),y:p0()});function zt(t){return[t("x"),t("y")]}function hx({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function n4({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function r4(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Kh(t){return t===void 0||t===1}function Md({scale:t,scaleX:e,scaleY:n}){return!Kh(t)||!Kh(e)||!Kh(n)}function Gr(t){return Md(t)||fx(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function fx(t){return m0(t.x)||m0(t.y)}function m0(t){return t&&t!=="0%"}function qu(t,e,n){const r=t-n,i=e*r;return n+i}function g0(t,e,n,r,i){return i!==void 0&&(t=qu(t,i,r)),qu(t,n,r)+e}function Nd(t,e=0,n=1,r,i){t.min=g0(t.min,e,n,r,i),t.max=g0(t.max,e,n,r,i)}function dx(t,{x:e,y:n}){Nd(t.x,e.translate,e.scale,e.originPoint),Nd(t.y,n.translate,n.scale,n.originPoint)}const y0=.999999999999,v0=1.0000000000001;function i4(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&qi(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,dx(t,o)),r&&Gr(s.latestValues)&&qi(t,s.latestValues))}e.x<v0&&e.x>y0&&(e.x=1),e.y<v0&&e.y>y0&&(e.y=1)}function Gi(t,e){t.min=t.min+e,t.max=t.max+e}function _0(t,e,n,r,i=.5){const s=xe(t.min,t.max,i);Nd(t,e,n,s,r)}function qi(t,e){_0(t.x,e.x,e.scaleX,e.scale,e.originX),_0(t.y,e.y,e.scaleY,e.scale,e.originY)}function px(t,e){return hx(r4(t.getBoundingClientRect(),e))}function s4(t,e,n){const r=px(t,n),{scroll:i}=e;return i&&(Gi(r.x,i.offset.x),Gi(r.y,i.offset.y)),r}const mx=({current:t})=>t?t.ownerDocument.defaultView:null,o4=new WeakMap;class a4{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ve(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Oa(h).point)},s=(h,f)=>{const{drag:p,dragPropagation:g,onDragStart:w}=this.getProps();if(p&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=ZM(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zt(A=>{let T=this.getAxisMotionValue(A).get()||0;if(Cn.test(T)){const{projection:v}=this.visualElement;if(v&&v.layout){const C=v.layout.layoutBox[A];C&&(T=Ft(C)*(parseFloat(T)/100))}}this.originPoint[A]=T}),w&&Ee.postRender(()=>w(h,f)),xd(this.visualElement,"transform");const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},o=(h,f)=>{const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:w,onDrag:P}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:A}=f;if(g&&this.currentDirection===null){this.currentDirection=l4(A),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",f.point,A),this.updateAxis("y",f.point,A),this.visualElement.render(),P&&P(h,f)},a=(h,f)=>this.stop(h,f),u=()=>zt(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new ax(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:mx(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Ee.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Sl(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=YO(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Hi(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=XO(i.layoutBox,n):this.constraints=!1,this.elastic=t4(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&zt(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=e4(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Hi(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=s4(r,i.root,this.visualElement.getTransformPagePoint());let o=JO(i.layout.layoutBox,s);if(n){const a=n(n4(o));this.hasMutatedConstraints=!!a,a&&(o=hx(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),u=this.constraints||{},c=zt(h=>{if(!Sl(h,n,this.currentDirection))return;let f=u&&u[h]||{};o&&(f={min:0,max:0});const p=i?200:1e6,g=i?40:1e7,w={type:"inertia",velocity:r?e[h]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(h,w)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return xd(this.visualElement,e),r.start(rg(e,r,0,n,this.visualElement,!1))}stopAnimation(){zt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){zt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){zt(n=>{const{drag:r}=this.getProps();if(!Sl(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-xe(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Hi(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};zt(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const u=a.get();i[o]=ZO({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),zt(o=>{if(!Sl(o,e,null))return;const a=this.getAxisMotionValue(o),{min:u,max:c}=this.constraints[o];a.set(xe(u,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;o4.set(this.visualElement,this);const e=this.visualElement.current,n=No(e,"pointerdown",u=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Hi(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ee.read(r);const o=Ta(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:c})=>{this.isDragging&&c&&(zt(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=u[h].translate,f.set(f.get()+u[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Vd,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Sl(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function l4(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class u4 extends Lr{constructor(e){super(e),this.removeGroupControls=Ot,this.removeListeners=Ot,this.controls=new a4(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ot}unmount(){this.removeGroupControls(),this.removeListeners()}}const T0=t=>(e,n)=>{t&&Ee.postRender(()=>t(e,n))};class c4 extends Lr{constructor(){super(...arguments),this.removePointerDownListener=Ot}onPointerDown(e){this.session=new ax(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:mx(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:T0(e),onStart:T0(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ee.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=No(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Xl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function E0(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const io={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ee.test(t))t=parseFloat(t);else return t;const n=E0(t,e.target.x),r=E0(t,e.target.y);return`${n}% ${r}%`}},h4={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Vr.parse(t);if(i.length>5)return r;const s=Vr.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,u=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=u;const c=xe(a,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class f4 extends L.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;DM(d4),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Xl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ee.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Dm.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function gx(t){const[e,n]=JC(),r=L.useContext(Cm);return M.jsx(f4,{...t,layoutGroup:r,switchLayoutGroup:L.useContext(ow),isPresent:e,safeToRemove:n})}const d4={borderRadius:{...io,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:io,borderTopRightRadius:io,borderBottomLeftRadius:io,borderBottomRightRadius:io,boxShadow:h4};function p4(t,e,n){const r=dt(t)?t:va(t);return r.start(rg("",r,e,n)),r.animation}function m4(t){return t instanceof SVGElement&&t.tagName!=="svg"}const g4=(t,e)=>t.depth-e.depth;class y4{constructor(){this.children=[],this.isDirty=!1}add(e){Km(this.children,e),this.isDirty=!0}remove(e){Gm(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(g4),this.isDirty=!1,this.children.forEach(e)}}function v4(t,e){const n=wn.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Dr(r),t(s-e))};return Ee.read(r,!0),()=>Dr(r)}const yx=["TopLeft","TopRight","BottomLeft","BottomRight"],_4=yx.length,S0=t=>typeof t=="string"?parseFloat(t):t,C0=t=>typeof t=="number"||ee.test(t);function T4(t,e,n,r,i,s){i?(t.opacity=xe(0,n.opacity!==void 0?n.opacity:1,E4(r)),t.opacityExit=xe(e.opacity!==void 0?e.opacity:1,0,S4(r))):s&&(t.opacity=xe(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<_4;o++){const a=`border${yx[o]}Radius`;let u=w0(e,a),c=w0(n,a);if(u===void 0&&c===void 0)continue;u||(u=0),c||(c=0),u===0||c===0||C0(u)===C0(c)?(t[a]=Math.max(xe(S0(u),S0(c),r),0),(Cn.test(c)||Cn.test(u))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=xe(e.rotate||0,n.rotate||0,r))}function w0(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const E4=vx(0,.5,Ow),S4=vx(.5,.95,Ot);function vx(t,e,n){return r=>r<t?0:r>e?1:n(_s(t,e,r))}function x0(t,e){t.min=e.min,t.max=e.max}function $t(t,e){x0(t.x,e.x),x0(t.y,e.y)}function P0(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function R0(t,e,n,r,i){return t-=e,t=qu(t,1/n,r),i!==void 0&&(t=qu(t,1/i,r)),t}function C4(t,e=0,n=1,r=.5,i,s=t,o=t){if(Cn.test(e)&&(e=parseFloat(e),e=xe(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=xe(s.min,s.max,r);t===s&&(a-=e),t.min=R0(t.min,e,n,a,i),t.max=R0(t.max,e,n,a,i)}function I0(t,e,[n,r,i],s,o){C4(t,e[n],e[r],e[i],e.scale,s,o)}const w4=["x","scaleX","originX"],x4=["y","scaleY","originY"];function A0(t,e,n,r){I0(t.x,e,w4,n?n.x:void 0,r?r.x:void 0),I0(t.y,e,x4,n?n.y:void 0,r?r.y:void 0)}function k0(t){return t.translate===0&&t.scale===1}function _x(t){return k0(t.x)&&k0(t.y)}function b0(t,e){return t.min===e.min&&t.max===e.max}function P4(t,e){return b0(t.x,e.x)&&b0(t.y,e.y)}function D0(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Tx(t,e){return D0(t.x,e.x)&&D0(t.y,e.y)}function V0(t){return Ft(t.x)/Ft(t.y)}function M0(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class R4{constructor(){this.members=[]}add(e){Km(this.members,e),e.scheduleRender()}remove(e){if(Gm(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function I4(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:h,rotateX:f,rotateY:p,skewX:g,skewY:w}=n;c&&(r=`perspective(${c}px) ${r}`),h&&(r+=`rotate(${h}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `),g&&(r+=`skewX(${g}deg) `),w&&(r+=`skewY(${w}deg) `)}const a=t.x.scale*e.x,u=t.y.scale*e.y;return(a!==1||u!==1)&&(r+=`scale(${a}, ${u})`),r||"none"}const qr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},yo=typeof window<"u"&&window.MotionDebug!==void 0,Gh=["","X","Y","Z"],A4={visibility:"hidden"},N0=1e3;let k4=0;function qh(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Ex(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Aw(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ee,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Ex(r)}function Sx({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=k4++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,yo&&(qr.totalNodes=qr.resolvedTargetDeltas=qr.recalculatedProjection=0),this.nodes.forEach(V4),this.nodes.forEach(F4),this.nodes.forEach(j4),this.nodes.forEach(M4),yo&&window.MotionDebug.record(qr)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new y4)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new qm),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const u=this.eventHandlers.get(o);u&&u.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=m4(o),this.instance=o;const{layoutId:u,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||u)&&(this.isLayoutDirty=!0),t){let f;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=v4(p,250),Xl.hasAnimatedSinceResize&&(Xl.hasAnimatedSinceResize=!1,this.nodes.forEach(L0))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&h&&(u||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:g,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const P=this.options.transition||h.getDefaultTransition()||H4,{onLayoutAnimationStart:A,onLayoutAnimationComplete:T}=h.getProps(),v=!this.targetLayout||!Tx(this.targetLayout,w)||g,C=!p&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||p&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,C);const k={...$m(P,"layout"),onPlay:A,onComplete:T};(h.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k)}else p||L0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Dr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(U4),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Ex(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:u}=this.options;if(a===void 0&&!u)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(O0);return}this.isUpdating||this.nodes.forEach(O4),this.isUpdating=!1,this.nodes.forEach(L4),this.nodes.forEach(b4),this.nodes.forEach(D4),this.clearAllSnapshots();const a=wn.now();Je.delta=Hn(0,1e3/60,a-Je.timestamp),Je.timestamp=a,Je.isProcessing=!0,Fh.update.process(Je),Fh.preRender.process(Je),Fh.render.process(Je),Je.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Dm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(N4),this.sharedNodes.forEach(B4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ee.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ee.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ve(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!_x(this.projectionDelta),u=this.getTransformTemplate(),c=u?u(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&(a||Gr(this.latestValues)||h)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let u=this.removeElementScroll(a);return o&&(u=this.removeTransform(u)),W4(u),{animationId:this.root.animationId,measuredBox:a,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Ve();const u=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(K4))){const{scroll:h}=this.root;h&&(Gi(u.x,h.offset.x),Gi(u.y,h.offset.y))}return u}removeElementScroll(o){var a;const u=Ve();if($t(u,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return u;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:f,options:p}=h;h!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&$t(u,o),Gi(u.x,f.offset.x),Gi(u.y,f.offset.y))}return u}applyTransform(o,a=!1){const u=Ve();$t(u,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&qi(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Gr(h.latestValues)&&qi(u,h.latestValues)}return Gr(this.latestValues)&&qi(u,this.latestValues),u}removeTransform(o){const a=Ve();$t(a,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];if(!c.instance||!Gr(c.latestValues))continue;Md(c.latestValues)&&c.updateSnapshot();const h=Ve(),f=c.measurePageBox();$t(h,f),A0(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return Gr(this.latestValues)&&A0(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Je.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==u;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=Je.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ve(),this.relativeTargetOrigin=Ve(),Lo(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),$t(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ve(),this.targetWithTransforms=Ve()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),QO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):$t(this.target,this.layout.layoutBox),dx(this.target,this.targetDelta)):$t(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ve(),this.relativeTargetOrigin=Ve(),Lo(this.relativeTargetOrigin,this.target,g.target),$t(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}yo&&qr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Md(this.parent.latestValues)||fx(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),u=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Je.timestamp&&(c=!1),c)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;$t(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;i4(this.layoutCorrected,this.treeScale,this.path,u),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Ve());const{target:w}=a;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(P0(this.prevProjectionDelta.x,this.projectionDelta.x),P0(this.prevProjectionDelta.y,this.projectionDelta.y)),Oo(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==g||!M0(this.projectionDelta.x,this.prevProjectionDelta.x)||!M0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w)),yo&&qr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ki(),this.projectionDelta=Ki(),this.projectionDeltaWithTransform=Ki()}setAnimationOrigin(o,a=!1){const u=this.snapshot,c=u?u.latestValues:{},h={...this.latestValues},f=Ki();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Ve(),g=u?u.source:void 0,w=this.layout?this.layout.source:void 0,P=g!==w,A=this.getStack(),T=!A||A.members.length<=1,v=!!(P&&!T&&this.options.crossfade===!0&&!this.path.some(z4));this.animationProgress=0;let C;this.mixTargetDelta=k=>{const D=k/1e3;F0(f.x,o.x,D),F0(f.y,o.y,D),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Lo(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),$4(this.relativeTarget,this.relativeTargetOrigin,p,D),C&&P4(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=Ve()),$t(C,this.relativeTarget)),P&&(this.animationValues=h,T4(h,c,this.latestValues,D,v,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Dr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ee.update(()=>{Xl.hasAnimatedSinceResize=!0,this.currentAnimation=p4(0,N0,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(N0),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:u,layout:c,latestValues:h}=o;if(!(!a||!u||!c)){if(this!==o&&this.layout&&c&&Cx(this.options.animationType,this.layout.layoutBox,c.layoutBox)){u=this.target||Ve();const f=Ft(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+f;const p=Ft(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+p}$t(a,u),qi(a,h),Oo(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new R4),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:u}={}){const c=this.getStack();c&&c.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(a=!0),!a)return;const c={};u.z&&qh("z",o,c,this.animationValues);for(let h=0;h<Gh.length;h++)qh(`rotate${Gh[h]}`,o,c,this.animationValues),qh(`skew${Gh[h]}`,o,c,this.animationValues);o.render();for(const h in c)o.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);o.scheduleRender()}getProjectionStyles(o){var a,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return A4;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Ql(o==null?void 0:o.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const P={};return this.options.layoutId&&(P.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,P.pointerEvents=Ql(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Gr(this.latestValues)&&(P.transform=h?h({},""):"none",this.hasProjected=!1),P}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=I4(this.projectionDeltaWithTransform,this.treeScale,p),h&&(c.transform=h(p,c.transform));const{x:g,y:w}=this.projectionDelta;c.transformOrigin=`${g.origin*100}% ${w.origin*100}% 0`,f.animationValues?c.opacity=f===this?(u=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const P in zu){if(p[P]===void 0)continue;const{correct:A,applyTo:T}=zu[P],v=c.transform==="none"?p[P]:A(p[P],f);if(T){const C=T.length;for(let k=0;k<C;k++)c[T[k]]=v}else c[P]=v}return this.options.layoutId&&(c.pointerEvents=f===this?Ql(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(O0),this.root.sharedNodes.clear()}}}function b4(t){t.updateLayout()}function D4(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?zt(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],g=Ft(p);p.min=r[f].min,p.max=p.min+g}):Cx(s,n.layoutBox,r)&&zt(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],g=Ft(r[f]);p.max=p.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const a=Ki();Oo(a,r,n.layoutBox);const u=Ki();o?Oo(u,t.applyTransform(i,!0),n.measuredBox):Oo(u,r,n.layoutBox);const c=!_x(a);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:g}=f;if(p&&g){const w=Ve();Lo(w,n.layoutBox,p.layoutBox);const P=Ve();Lo(P,r,g.layoutBox),Tx(w,P)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=P,t.relativeTargetOrigin=w,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:u,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function V4(t){yo&&qr.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function M4(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function N4(t){t.clearSnapshot()}function O0(t){t.clearMeasurements()}function O4(t){t.isLayoutDirty=!1}function L4(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function L0(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function F4(t){t.resolveTargetDelta()}function j4(t){t.calcProjection()}function U4(t){t.resetSkewAndRotation()}function B4(t){t.removeLeadSnapshot()}function F0(t,e,n){t.translate=xe(e.translate,0,n),t.scale=xe(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function j0(t,e,n,r){t.min=xe(e.min,n.min,r),t.max=xe(e.max,n.max,r)}function $4(t,e,n,r){j0(t.x,e.x,n.x,r),j0(t.y,e.y,n.y,r)}function z4(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const H4={duration:.45,ease:[.4,0,.1,1]},U0=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),B0=U0("applewebkit/")&&!U0("chrome/")?Math.round:Ot;function $0(t){t.min=B0(t.min),t.max=B0(t.max)}function W4(t){$0(t.x),$0(t.y)}function Cx(t,e,n){return t==="position"||t==="preserve-aspect"&&!qO(V0(e),V0(n),.2)}function K4(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const G4=Sx({attachResizeListener:(t,e)=>Ta(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Qh={current:void 0},wx=Sx({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Qh.current){const t=new G4({});t.mount(window),t.setOptions({layoutScroll:!0}),Qh.current=t}return Qh.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),q4={pan:{Feature:c4},drag:{Feature:u4,ProjectionNode:wx,MeasureLayout:gx}};function z0(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Ee.postRender(()=>s(e,Oa(e)))}class Q4 extends Lr{mount(){const{current:e}=this.node;e&&(this.unmount=qM(e,n=>(z0(this.node,n,"Start"),r=>z0(this.node,r,"End"))))}unmount(){}}class Y4 extends Lr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Na(Ta(this.node.current,"focus",()=>this.onFocus()),Ta(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function H0(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Ee.postRender(()=>s(e,Oa(e)))}class X4 extends Lr{mount(){const{current:e}=this.node;e&&(this.unmount=JM(e,n=>(H0(this.node,n,"Start"),(r,{success:i})=>H0(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Od=new WeakMap,Yh=new WeakMap,J4=t=>{const e=Od.get(t.target);e&&e(t)},Z4=t=>{t.forEach(J4)};function eL({root:t,...e}){const n=t||document;Yh.has(n)||Yh.set(n,{});const r=Yh.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Z4,{root:t,...e})),r[i]}function tL(t,e,n){const r=eL(e);return Od.set(t,n),r.observe(t),()=>{Od.delete(t),r.unobserve(t)}}const nL={some:0,all:1};class rL extends Lr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:nL[i]},a=u=>{const{isIntersecting:c}=u;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),p=c?h:f;p&&p(u)};return tL(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(iL(e,n))&&this.startObserver()}unmount(){}}function iL({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const sL={inView:{Feature:rL},tap:{Feature:X4},focus:{Feature:Y4},hover:{Feature:Q4}},oL={layout:{ProjectionNode:wx,MeasureLayout:gx}},Ld={current:null},xx={current:!1};function aL(){if(xx.current=!0,!!Pm)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ld.current=t.matches;t.addListener(e),e()}else Ld.current=!1}const lL=[...Yw,lt,Vr],uL=t=>lL.find(Qw(t)),W0=new WeakMap;function cL(t,e,n){for(const r in e){const i=e[r],s=n[r];if(dt(i))t.addValue(r,i);else if(dt(s))t.addValue(r,va(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,va(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const K0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class hL{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=eg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=wn.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Ee.render(this.render,!1,!0))};const{latestValues:u,renderState:c,onUpdate:h}=o;this.onUpdate=h,this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Ac(n),this.isVariantNode=iw(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in p){const w=p[g];u[g]!==void 0&&dt(w)&&w.set(u[g],!1)}}mount(e){this.current=e,W0.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),xx.current||aL(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ld.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){W0.delete(this.current),this.projection&&this.projection.unmount(),Dr(this.notifyUpdate),Dr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ci.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ee.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ts){const n=Ts[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ve()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<K0.length;r++){const i=K0[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=cL(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=va(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(Gw(i)||Fw(i))?i=parseFloat(i):!uL(i)&&Vr.test(n)&&(i=Hw(e,n)),this.setBaseTarget(e,dt(i)?i.get():i)),dt(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=Mm(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!dt(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new qm),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Px extends hL{constructor(){super(...arguments),this.KeyframeResolver=Xw}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;dt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function fL(t){return window.getComputedStyle(t)}class dL extends Px{constructor(){super(...arguments),this.type="html",this.renderInstance=dw}readValueFromInstance(e,n){if(Ci.has(n)){const r=Zm(n);return r&&r.default||0}else{const r=fL(e),i=(cw(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return px(e,n)}build(e,n,r){Lm(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Bm(e,n,r)}}class pL extends Px{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ve}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ci.has(n)){const r=Zm(n);return r&&r.default||0}return n=pw.has(n)?n:bm(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return yw(e,n,r)}build(e,n,r){Fm(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){mw(e,n,r,i)}mount(e){this.isSVGTag=Um(e.tagName),super.mount(e)}}const mL=(t,e)=>Vm(t)?new pL(e):new dL(e,{allowProjection:t!==L.Fragment}),gL=BM({...jO,...sL,...q4,...oL},mL),sn=nM(gL);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Bt=(t,e)=>{const n=L.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:u,...c},h)=>L.createElement("svg",{ref:h,...yL,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${vL(t)}`,a].join(" "),...c},[...e.map(([f,p])=>L.createElement(f,p)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=Bt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=Bt("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=Bt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=Bt("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=Bt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=Bt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=Bt("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=Bt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=Bt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=Bt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=Bt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=Bt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=Bt("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),IL=()=>{const{createSession:t,joinSession:e,error:n,setInitialCode:r}=Ra(),{loadFromCloud:i,isLoading:s,cloudError:o}=XC(),[a,u]=L.useState(""),[c,h]=L.useState(""),[f,p]=L.useState(!1),[g,w]=L.useState(!1),P=()=>{t()},A=v=>{v.preventDefault(),e(a)},T=async v=>{if(v.preventDefault(),!c||c.length!==6)return;const C=await i(c);C&&(r(C),t())};return M.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 text-center",children:M.jsxs(sn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-3xl w-full",children:[M.jsx("div",{className:"mb-8 flex justify-center",children:M.jsx("div",{className:"p-3 glass-panel rounded-2xl bg-indigo-500/20 text-indigo-300",children:M.jsx(Fd,{size:40})})}),M.jsx("h1",{className:"text-5xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-purple-400",children:"VignanPad"}),M.jsx("p",{className:"text-slate-400 text-lg mb-12 max-w-lg mx-auto",children:"Share files and collaborate on code in real-time. No servers, no accounts. Just a PIN."}),M.jsxs("div",{className:"grid md:grid-cols-3 gap-4 max-w-2xl mx-auto",children:[M.jsxs(sn.div,{whileHover:{scale:1.02},className:"glass-panel p-6 rounded-2xl flex flex-col items-center gap-4 cursor-pointer hover:bg-slate-800/50 transition-colors",onClick:P,children:[M.jsx("div",{className:"p-3 rounded-full bg-emerald-500/20 text-emerald-400",children:M.jsx(RL,{size:24})}),M.jsx("h3",{className:"text-lg font-semibold",children:"Start Session"}),M.jsx("p",{className:"text-xs text-slate-400",children:"Generate a PIN for live collaboration."})]}),M.jsxs(sn.div,{whileHover:{scale:1.02},className:`glass-panel p-6 rounded-2xl flex flex-col items-center gap-4 ${f?"ring-2 ring-indigo-500":""}`,onClick:()=>{p(!0),w(!1)},children:[M.jsx("div",{className:"p-3 rounded-full bg-blue-500/20 text-blue-400",children:M.jsx(_L,{size:24})}),f?M.jsxs("form",{onSubmit:A,className:"w-full flex flex-col gap-2",children:[M.jsx("input",{type:"text",maxLength:6,placeholder:"000000",className:"glass-input w-full px-3 py-2 rounded-lg text-center text-lg tracking-widest",value:a,onChange:v=>u(v.target.value.toUpperCase()),autoFocus:!0,onClick:v=>v.stopPropagation()}),M.jsx("button",{type:"submit",className:"btn-primary w-full py-2 rounded-lg font-medium text-sm",onClick:v=>v.stopPropagation(),children:"Connect"})]}):M.jsxs(M.Fragment,{children:[M.jsx("h3",{className:"text-lg font-semibold",children:"Join Session"}),M.jsx("p",{className:"text-xs text-slate-400",children:"Enter a 6-digit PIN to connect."})]})]}),M.jsxs(sn.div,{whileHover:{scale:1.02},className:`glass-panel p-6 rounded-2xl flex flex-col items-center gap-4 ${g?"ring-2 ring-purple-500":""}`,onClick:()=>{w(!0),p(!1)},children:[M.jsx("div",{className:"p-3 rounded-full bg-purple-500/20 text-purple-400",children:M.jsx(Ud,{size:24})}),g?M.jsxs("form",{onSubmit:T,className:"w-full flex flex-col gap-2",children:[M.jsx("input",{type:"text",maxLength:6,placeholder:"ABC123",className:"glass-input w-full px-3 py-2 rounded-lg text-center text-lg tracking-widest",value:c,onChange:v=>h(v.target.value.toUpperCase()),autoFocus:!0,onClick:v=>v.stopPropagation()}),M.jsxs("button",{type:"submit",className:"btn-primary w-full py-2 rounded-lg font-medium text-sm flex items-center justify-center gap-2",onClick:v=>v.stopPropagation(),disabled:s,children:[s?M.jsx(SL,{size:16,className:"animate-spin"}):null,"Load Code"]})]}):M.jsxs(M.Fragment,{children:[M.jsx("h3",{className:"text-lg font-semibold",children:"Load Saved"}),M.jsx("p",{className:"text-xs text-slate-400",children:"Enter code to load saved content."})]})]})]}),(n||o)&&M.jsx(sn.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-8 p-3 bg-red-500/10 border border-red-500/20 text-red-200 rounded-lg inline-block",children:n||o}),M.jsxs("div",{className:"mt-16 flex justify-center gap-8 text-slate-500 text-sm flex-wrap",children:[M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx(wL,{size:16})," End-to-End Encrypted"]}),M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx(Fd,{size:16})," Serverless P2P"]}),M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx(Ud,{size:16})," 72h Cloud Storage"]})]})]})})};function G0(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function AL(t){if(Array.isArray(t))return t}function kL(t,e,n){return(e=LL(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bL(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],u=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(u=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);u=!0);}catch(h){c=!0,i=h}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function DL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q0(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Q0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q0(Object(n),!0).forEach(function(r){kL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q0(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VL(t,e){if(t==null)return{};var n,r,i=ML(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ML(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function NL(t,e){return AL(t)||bL(t,e)||FL(t,e)||DL()}function OL(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LL(t){var e=OL(t,"string");return typeof e=="symbol"?e:e+""}function FL(t,e){if(t){if(typeof t=="string")return G0(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G0(t,e):void 0}}function jL(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y0(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function X0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y0(Object(n),!0).forEach(function(r){jL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y0(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UL(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduceRight(function(i,s){return s(i)},r)}}function vo(t){return function e(){for(var n=this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return i.length>=t.length?t.apply(this,i):function(){for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];return e.apply(n,[].concat(i,a))}}}function Qu(t){return{}.toString.call(t).includes("Object")}function BL(t){return!Object.keys(t).length}function Ea(t){return typeof t=="function"}function $L(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function zL(t,e){return Qu(e)||Cr("changeType"),Object.keys(e).some(function(n){return!$L(t,n)})&&Cr("changeField"),e}function HL(t){Ea(t)||Cr("selectorType")}function WL(t){Ea(t)||Qu(t)||Cr("handlerType"),Qu(t)&&Object.values(t).some(function(e){return!Ea(e)})&&Cr("handlersType")}function KL(t){t||Cr("initialIsRequired"),Qu(t)||Cr("initialType"),BL(t)&&Cr("initialContent")}function GL(t,e){throw new Error(t[e]||t.default)}var qL={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Cr=vo(GL)(qL),Cl={changes:zL,selector:HL,handler:WL,initial:KL};function QL(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Cl.initial(t),Cl.handler(e);var n={current:t},r=vo(JL)(n,e),i=vo(XL)(n),s=vo(Cl.changes)(t),o=vo(YL)(n);function a(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(h){return h};return Cl.selector(c),c(n.current)}function u(c){UL(r,i,s,o)(c)}return[a,u]}function YL(t,e){return Ea(e)?e(t.current):e}function XL(t,e){return t.current=X0(X0({},t.current),e),e}function JL(t,e,n){return Ea(e)?e(t.current):Object.keys(n).forEach(function(r){var i;return(i=e[r])===null||i===void 0?void 0:i.call(e,t.current[r])}),n}var ZL={create:QL},e3={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function t3(t){return function e(){for(var n=this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return i.length>=t.length?t.apply(this,i):function(){for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];return e.apply(n,[].concat(i,a))}}}function n3(t){return{}.toString.call(t).includes("Object")}function r3(t){return t||J0("configIsRequired"),n3(t)||J0("configType"),t.urls?(i3(),{paths:{vs:t.urls.monacoBase}}):t}function i3(){console.warn(Rx.deprecation)}function s3(t,e){throw new Error(t[e]||t.default)}var Rx={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},J0=t3(s3)(Rx),o3={config:r3},a3=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(i){return n.reduceRight(function(s,o){return o(s)},i)}};function Ix(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],Ix(t[n],e[n]))}),Q0(Q0({},t),e)}var l3={type:"cancelation",msg:"operation is manually canceled"};function Xh(t){var e=!1,n=new Promise(function(r,i){t.then(function(s){return e?i(l3):r(s)}),t.catch(i)});return n.cancel=function(){return e=!0},n}var u3=["monaco"],c3=ZL.create({config:e3,isInitialized:!1,resolve:null,reject:null,monaco:null}),Ax=NL(c3,2),La=Ax[0],Dc=Ax[1];function h3(t){var e=o3.config(t),n=e.monaco,r=VL(e,u3);Dc(function(i){return{config:Ix(i.config,r),monaco:n}})}function f3(){var t=La(function(e){var n=e.monaco,r=e.isInitialized,i=e.resolve;return{monaco:n,isInitialized:r,resolve:i}});if(!t.isInitialized){if(Dc({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),Xh(Jh);if(window.monaco&&window.monaco.editor)return kx(window.monaco),t.resolve(window.monaco),Xh(Jh);a3(d3,m3)(g3)}return Xh(Jh)}function d3(t){return document.body.appendChild(t)}function p3(t){var e=document.createElement("script");return t&&(e.src=t),e}function m3(t){var e=La(function(r){var i=r.config,s=r.reject;return{config:i,reject:s}}),n=p3("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function g3(){var t=La(function(n){var r=n.config,i=n.resolve,s=n.reject;return{config:r,resolve:i,reject:s}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){var r=n.m||n;kx(r),t.resolve(r)},function(n){t.reject(n)})}function kx(t){La().monaco||Dc({monaco:t})}function y3(){return La(function(t){var e=t.monaco;return e})}var Jh=new Promise(function(t,e){return Dc({resolve:t,reject:e})}),bx={config:h3,init:f3,__getMonacoInstance:y3},v3={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Zh=v3,_3={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},T3=_3;function E3({children:t}){return ti.createElement("div",{style:T3.container},t)}var S3=E3,C3=S3;function w3({width:t,height:e,isEditorReady:n,loading:r,_ref:i,className:s,wrapperProps:o}){return ti.createElement("section",{style:{...Zh.wrapper,width:t,height:e},...o},!n&&ti.createElement(C3,null,r),ti.createElement("div",{ref:i,style:{...Zh.fullWidth,...!n&&Zh.hide},className:s}))}var x3=w3,Dx=L.memo(x3);function P3(t){L.useEffect(t,[])}var Vx=P3;function R3(t,e,n=!0){let r=L.useRef(!0);L.useEffect(r.current||!n?()=>{r.current=!1}:t,e)}var Vt=R3;function Fo(){}function Qi(t,e,n,r){return I3(t,r)||A3(t,e,n,r)}function I3(t,e){return t.editor.getModel(Mx(t,e))}function A3(t,e,n,r){return t.editor.createModel(e,n,r?Mx(t,r):void 0)}function Mx(t,e){return t.Uri.parse(e)}function k3({original:t,modified:e,language:n,originalLanguage:r,modifiedLanguage:i,originalModelPath:s,modifiedModelPath:o,keepCurrentOriginalModel:a=!1,keepCurrentModifiedModel:u=!1,theme:c="light",loading:h="Loading...",options:f={},height:p="100%",width:g="100%",className:w,wrapperProps:P={},beforeMount:A=Fo,onMount:T=Fo}){let[v,C]=L.useState(!1),[k,D]=L.useState(!0),O=L.useRef(null),E=L.useRef(null),y=L.useRef(null),S=L.useRef(T),x=L.useRef(A),I=L.useRef(!1);Vx(()=>{let G=bx.init();return G.then(X=>(E.current=X)&&D(!1)).catch(X=>(X==null?void 0:X.type)!=="cancelation"&&console.error("Monaco initialization: error:",X)),()=>O.current?K():G.cancel()}),Vt(()=>{if(O.current&&E.current){let G=O.current.getOriginalEditor(),X=Qi(E.current,t||"",r||n||"text",s||"");X!==G.getModel()&&G.setModel(X)}},[s],v),Vt(()=>{if(O.current&&E.current){let G=O.current.getModifiedEditor(),X=Qi(E.current,e||"",i||n||"text",o||"");X!==G.getModel()&&G.setModel(X)}},[o],v),Vt(()=>{let G=O.current.getModifiedEditor();G.getOption(E.current.editor.EditorOption.readOnly)?G.setValue(e||""):e!==G.getValue()&&(G.executeEdits("",[{range:G.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),G.pushUndoStop())},[e],v),Vt(()=>{var G,X;(X=(G=O.current)==null?void 0:G.getModel())==null||X.original.setValue(t||"")},[t],v),Vt(()=>{let{original:G,modified:X}=O.current.getModel();E.current.editor.setModelLanguage(G,r||n||"text"),E.current.editor.setModelLanguage(X,i||n||"text")},[n,r,i],v),Vt(()=>{var G;(G=E.current)==null||G.editor.setTheme(c)},[c],v),Vt(()=>{var G;(G=O.current)==null||G.updateOptions(f)},[f],v);let b=L.useCallback(()=>{var ne;if(!E.current)return;x.current(E.current);let G=Qi(E.current,t||"",r||n||"text",s||""),X=Qi(E.current,e||"",i||n||"text",o||"");(ne=O.current)==null||ne.setModel({original:G,modified:X})},[n,e,i,t,r,s,o]),R=L.useCallback(()=>{var G;!I.current&&y.current&&(O.current=E.current.editor.createDiffEditor(y.current,{automaticLayout:!0,...f}),b(),(G=E.current)==null||G.editor.setTheme(c),C(!0),I.current=!0)},[f,c,b]);L.useEffect(()=>{v&&S.current(O.current,E.current)},[v]),L.useEffect(()=>{!k&&!v&&R()},[k,v,R]);function K(){var X,ne,U,W;let G=(X=O.current)==null?void 0:X.getModel();a||((ne=G==null?void 0:G.original)==null||ne.dispose()),u||((U=G==null?void 0:G.modified)==null||U.dispose()),(W=O.current)==null||W.dispose()}return ti.createElement(Dx,{width:g,height:p,isEditorReady:v,loading:h,_ref:y,className:w,wrapperProps:P})}var b3=k3;L.memo(b3);function D3(t){let e=L.useRef();return L.useEffect(()=>{e.current=t},[t]),e.current}var V3=D3,wl=new Map;function M3({defaultValue:t,defaultLanguage:e,defaultPath:n,value:r,language:i,path:s,theme:o="light",line:a,loading:u="Loading...",options:c={},overrideServices:h={},saveViewState:f=!0,keepCurrentModel:p=!1,width:g="100%",height:w="100%",className:P,wrapperProps:A={},beforeMount:T=Fo,onMount:v=Fo,onChange:C,onValidate:k=Fo}){let[D,O]=L.useState(!1),[E,y]=L.useState(!0),S=L.useRef(null),x=L.useRef(null),I=L.useRef(null),b=L.useRef(v),R=L.useRef(T),K=L.useRef(),G=L.useRef(r),X=V3(s),ne=L.useRef(!1),U=L.useRef(!1);Vx(()=>{let Q=bx.init();return Q.then(re=>(S.current=re)&&y(!1)).catch(re=>(re==null?void 0:re.type)!=="cancelation"&&console.error("Monaco initialization: error:",re)),()=>x.current?Z():Q.cancel()}),Vt(()=>{var re,De,We,Ct;let Q=Qi(S.current,t||r||"",e||i||"",s||n||"");Q!==((re=x.current)==null?void 0:re.getModel())&&(f&&wl.set(X,(De=x.current)==null?void 0:De.saveViewState()),(We=x.current)==null||We.setModel(Q),f&&((Ct=x.current)==null||Ct.restoreViewState(wl.get(s))))},[s],D),Vt(()=>{var Q;(Q=x.current)==null||Q.updateOptions(c)},[c],D),Vt(()=>{!x.current||r===void 0||(x.current.getOption(S.current.editor.EditorOption.readOnly)?x.current.setValue(r):r!==x.current.getValue()&&(U.current=!0,x.current.executeEdits("",[{range:x.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),x.current.pushUndoStop(),U.current=!1))},[r],D),Vt(()=>{var re,De;let Q=(re=x.current)==null?void 0:re.getModel();Q&&i&&((De=S.current)==null||De.editor.setModelLanguage(Q,i))},[i],D),Vt(()=>{var Q;a!==void 0&&((Q=x.current)==null||Q.revealLine(a))},[a],D),Vt(()=>{var Q;(Q=S.current)==null||Q.editor.setTheme(o)},[o],D);let W=L.useCallback(()=>{var Q;if(!(!I.current||!S.current)&&!ne.current){R.current(S.current);let re=s||n,De=Qi(S.current,r||t||"",e||i||"",re||"");x.current=(Q=S.current)==null?void 0:Q.editor.create(I.current,{model:De,automaticLayout:!0,...c},h),f&&x.current.restoreViewState(wl.get(re)),S.current.editor.setTheme(o),a!==void 0&&x.current.revealLine(a),O(!0),ne.current=!0}},[t,e,n,r,i,s,c,h,f,o,a]);L.useEffect(()=>{D&&b.current(x.current,S.current)},[D]),L.useEffect(()=>{!E&&!D&&W()},[E,D,W]),G.current=r,L.useEffect(()=>{var Q,re;D&&C&&((Q=K.current)==null||Q.dispose(),K.current=(re=x.current)==null?void 0:re.onDidChangeModelContent(De=>{U.current||C(x.current.getValue(),De)}))},[D,C]),L.useEffect(()=>{if(D){let Q=S.current.editor.onDidChangeMarkers(re=>{var We;let De=(We=x.current.getModel())==null?void 0:We.uri;if(De&&re.find(Ct=>Ct.path===De.path)){let Ct=S.current.editor.getModelMarkers({resource:De});k==null||k(Ct)}});return()=>{Q==null||Q.dispose()}}return()=>{}},[D,k]);function Z(){var Q,re;(Q=K.current)==null||Q.dispose(),p?f&&wl.set(s,x.current.saveViewState()):(re=x.current.getModel())==null||re.dispose(),x.current.dispose()}return ti.createElement(Dx,{width:g,height:w,isEditorReady:D,loading:u,_ref:I,className:P,wrapperProps:A})}var N3=M3,O3=L.memo(N3),L3=O3;const F3=()=>{const{updateCode:t,code:e,isConnected:n,isHost:r}=Ra(),{saveToCloud:i,isSaving:s,savedCode:o,setSavedCode:a,cloudError:u}=XC(),[c,h]=L.useState(!1),[f,p]=L.useState(!1),g=T=>{t(T)},w=()=>{navigator.clipboard.writeText(e),h(!0),setTimeout(()=>h(!1),2e3)},P=async()=>{await i(e)&&p(!0)},A=()=>{navigator.clipboard.writeText(o)};return M.jsxs("div",{className:"flex flex-col h-full bg-[#1e1e1e] rounded-xl overflow-hidden shadow-2xl border border-white/10 relative",children:[M.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-[#2d2d2d] border-b border-white/5",children:[M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx("div",{className:`w-3 h-3 rounded-full ${n?"bg-red-900/30":"bg-red-500"}`}),M.jsx("div",{className:`w-3 h-3 rounded-full ${!n&&!r?"bg-yellow-500":"bg-yellow-900/30"}`,title:r?"Hosting":"Connecting"}),M.jsx("div",{className:`w-3 h-3 rounded-full ${n?"bg-green-500":"bg-green-900/30"}`}),M.jsx("span",{className:"ml-2 text-xs text-stone-400 font-mono",children:n?"Connected":r?"Waiting for Peer...":"Disconnected"})]}),M.jsxs("div",{className:"flex items-center gap-1",children:[M.jsxs("button",{onClick:P,disabled:s,className:"flex items-center gap-1.5 px-2 py-1 text-xs bg-indigo-500/20 hover:bg-indigo-500/30 text-indigo-300 rounded transition-colors disabled:opacity-50",title:"Save to Cloud (72h)",children:[M.jsx(Ud,{size:14}),s?"Saving...":"Save 72h"]}),M.jsx("button",{onClick:w,className:"p-1.5 hover:bg-white/10 rounded transition-colors",title:"Copy Code",children:c?M.jsx(jd,{size:16,className:"text-green-400"}):M.jsx(Bd,{size:16,className:"text-stone-400"})})]})]}),M.jsx("div",{className:"flex-1",children:M.jsx(L3,{height:"100%",defaultLanguage:"javascript",theme:"vs-dark",value:e,onChange:g,options:{minimap:{enabled:!1},fontSize:14,padding:{top:16},fontFamily:"JetBrains Mono, Menlo, monospace",scrollBeyondLastLine:!1,automaticLayout:!0}})}),!n&&!r&&M.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-10 pointer-events-none",children:M.jsx("span",{className:"px-4 py-2 bg-black/80 rounded-lg border border-white/10",children:"Connecting..."})}),M.jsx(Rm,{children:f&&o&&M.jsx(sn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-20",onClick:()=>p(!1),children:M.jsxs(sn.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-slate-800 border border-white/10 rounded-xl p-6 max-w-sm w-full mx-4 text-center",onClick:T=>T.stopPropagation(),children:[M.jsx("button",{onClick:()=>p(!1),className:"absolute top-3 right-3 p-1 hover:bg-white/10 rounded",children:M.jsx(PL,{size:18,className:"text-slate-400"})}),M.jsx("div",{className:"p-3 bg-emerald-500/20 rounded-full w-fit mx-auto mb-4",children:M.jsx(jd,{size:32,className:"text-emerald-400"})}),M.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Saved to Cloud!"}),M.jsx("p",{className:"text-slate-400 text-sm mb-4",children:"Share this code. Valid for 72 hours."}),M.jsxs("div",{className:"flex items-center justify-center gap-2 bg-slate-900 rounded-lg p-3 mb-4",children:[M.jsx("span",{className:"text-2xl font-mono font-bold tracking-widest text-white",children:o}),M.jsx("button",{onClick:A,className:"p-1.5 hover:bg-white/10 rounded",title:"Copy Code",children:M.jsx(Bd,{size:18,className:"text-slate-400"})})]}),M.jsx("button",{onClick:()=>{p(!1),a("")},className:"w-full py-2 bg-indigo-500 hover:bg-indigo-600 rounded-lg font-medium transition-colors",children:"Done"})]})})}),u&&M.jsx("div",{className:"absolute bottom-4 left-4 right-4 bg-red-500/20 border border-red-500/30 text-red-200 px-4 py-2 rounded-lg text-sm",children:u})]})},j3=()=>{const{sendFile:t,fileProgress:e,incomingFile:n,receivedFiles:r,isConnected:i,isHost:s}=Ra(),o=L.useRef(null),a=c=>{if(!i){alert("No peer connected. Wait for someone to join with your PIN.");return}const h=c.target.files[0];h&&t(h)},u=(c,h=2)=>{if(!+c)return"0 Bytes";const f=1024,p=h<0?0:h,g=["Bytes","KB","MB","GB","TB"],w=Math.floor(Math.log(c)/Math.log(f));return`${parseFloat((c/Math.pow(f,w)).toFixed(p))} ${g[w]}`};return M.jsxs("div",{className:"h-full flex flex-col gap-4",children:[M.jsx("div",{className:`px-4 py-2 rounded-lg text-center text-sm font-medium ${i?"bg-emerald-500/20 text-emerald-300":"bg-amber-500/20 text-amber-300"}`,children:i?" Connected - Ready to send files!":s?" Waiting for peer to join with your PIN...":" Not connected"}),M.jsxs("div",{className:`flex-1 glass-panel rounded-xl border-dashed border-2 flex flex-col items-center justify-center p-6 transition-colors ${i?"border-emerald-500/30 hover:bg-emerald-500/5 cursor-pointer":"border-white/10 opacity-50 cursor-not-allowed"} group`,onClick:()=>i&&o.current.click(),children:[M.jsx("input",{type:"file",className:"hidden",ref:o,onChange:a}),M.jsx("div",{className:`p-4 rounded-full mb-3 transition-transform ${i?"bg-emerald-500/20 text-emerald-400 group-hover:scale-110":"bg-slate-500/20 text-slate-500"}`,children:M.jsx(xL,{size:28})}),M.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Send a File"}),M.jsx("p",{className:"text-xs text-slate-400",children:i?"Click to browse or drag & drop":"Connect with a peer first"})]}),M.jsxs("div",{className:"flex-1 glass-panel rounded-xl p-4 flex flex-col overflow-hidden",children:[M.jsx("h3",{className:"text-sm font-semibold text-slate-400 uppercase tracking-wider mb-4 px-2",children:"Transfers"}),M.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2 custom-scrollbar",children:[M.jsx(Rm,{children:n&&M.jsx(sn.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"p-3 bg-white/5 rounded-lg border border-white/10",children:M.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[M.jsx("div",{className:"p-2 bg-blue-500/20 text-blue-400 rounded",children:M.jsx(EL,{size:18})}),M.jsxs("div",{className:"flex-1 min-w-0",children:[M.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[M.jsx("span",{className:"truncate font-medium",children:n.name}),M.jsxs("span",{className:"text-slate-400",children:[Math.round(e),"%"]})]}),M.jsx("div",{className:"h-1.5 w-full bg-slate-700/50 rounded-full overflow-hidden",children:M.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:`${e}%`}})})]})]})})}),r.map((c,h)=>M.jsx(sn.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-3 bg-emerald-500/5 hover:bg-emerald-500/10 transition-colors rounded-lg border border-emerald-500/20 group",children:M.jsxs("div",{className:"flex items-center gap-3",children:[M.jsx("div",{className:"p-2 bg-emerald-500/20 text-emerald-400 rounded",children:M.jsx(jd,{size:18})}),M.jsxs("div",{className:"flex-1 min-w-0",children:[M.jsx("h4",{className:"font-medium text-sm truncate",children:c.name}),M.jsx("p",{className:"text-xs text-slate-400",children:u(c.size)})]}),M.jsx("a",{href:c.url,download:c.name,className:"p-2 hover:bg-emerald-500/20 rounded-full text-emerald-400 transition-colors",title:"Download",children:M.jsx(TL,{size:18})})]})},h)),r.length===0&&!n&&M.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-600",children:[M.jsx(Fd,{size:32,className:"mb-2 opacity-50"}),M.jsx("p",{className:"text-sm",children:"No files shared yet"})]})]})]})]})},U3=()=>{const{myId:t,isHost:e}=Ra(),[n,r]=L.useState("code"),i=()=>{navigator.clipboard.writeText(t)},s=()=>{window.location.reload()};return M.jsxs("div",{className:"flex flex-col h-screen p-4 gap-4",children:[M.jsxs("header",{className:"flex items-center justify-between glass-panel p-4 rounded-xl",children:[M.jsxs("div",{className:"flex items-center gap-4",children:[M.jsx("h1",{className:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-purple-400",children:"VignanPad"}),M.jsxs("div",{className:"hidden md:flex items-center gap-2 px-3 py-1 bg-white/5 rounded-full border border-white/10",children:[M.jsx("span",{className:"text-xs text-slate-400 uppercase tracking-wider font-semibold",children:"Session PIN"}),M.jsx("span",{className:"font-mono text-lg font-bold text-white tracking-widest",children:t}),M.jsx("button",{onClick:i,className:"p-1 hover:text-indigo-400 transition-colors",children:M.jsx(Bd,{size:14})})]})]}),M.jsxs("div",{className:"flex items-center gap-4",children:[M.jsx("div",{className:"md:hidden font-mono font-bold",children:t}),M.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-red-500/10 hover:text-red-400 transition-colors text-sm font-medium",children:[M.jsx(CL,{size:16})," Exit"]})]})]}),M.jsxs("div",{className:"flex-1 min-h-0 grid md:grid-cols-3 gap-4",children:[M.jsxs("div",{className:"md:hidden col-span-1 flex gap-2 mb-2",children:[M.jsx("button",{className:`flex-1 py-2 rounded-lg text-sm font-medium transition-colors ${n==="code"?"bg-indigo-600 text-white":"bg-white/5 text-slate-400"}`,onClick:()=>r("code"),children:"Code"}),M.jsx("button",{className:`flex-1 py-2 rounded-lg text-sm font-medium transition-colors ${n==="files"?"bg-indigo-600 text-white":"bg-white/5 text-slate-400"}`,onClick:()=>r("files"),children:"Files"})]}),M.jsx("div",{className:`col-span-1 md:col-span-2 ${n==="code"?"block":"hidden md:block"} h-full min-h-0`,children:M.jsx(F3,{})}),M.jsx("div",{className:`col-span-1 ${n==="files"?"block":"hidden md:block"} h-full min-h-0`,children:M.jsx(j3,{})})]})]})};function B3(){const{isHost:t,isConnected:e,myId:n,peer:r}=Ra(),i=!!r;return M.jsx("div",{className:"min-h-screen text-white font-sans selection:bg-indigo-500/30",children:M.jsx(Rm,{mode:"wait",children:i?M.jsx(sn.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:M.jsx(U3,{})},"session"):M.jsx(sn.div,{exit:{opacity:0,scale:.95},transition:{duration:.3},children:M.jsx(IL,{})},"landing")})})}ef.createRoot(document.getElementById("root")).render(M.jsx(ti.StrictMode,{children:M.jsx(HV,{children:M.jsx(aA,{children:M.jsx(B3,{})})})}));
